{"version":3,"file":"api.js","sources":["/@dropins/storefront-order/src/data/transforms/transform-acdl.ts","/@dropins/storefront-order/src/data/transforms/transform-place-order.ts","/@dropins/storefront-order/src/data/transforms/transform-place-negotiable-quote-order.ts","/@dropins/storefront-order/src/lib/acdl.ts","/@dropins/storefront-order/src/lib/place-order-error.ts","/@dropins/storefront-order/src/api/placeOrder/graphql/placeOrderMutation.ts","/@dropins/storefront-order/src/lib/setReCaptchaToken.ts","/@dropins/storefront-order/src/api/placeOrder/placeOrder.ts","/@dropins/storefront-order/src/api/setPaymentMethodAndPlaceOrder/graphql/setPaymentMethodAndPlaceOrderMutation.ts","/@dropins/storefront-order/src/api/setPaymentMethodAndPlaceOrder/setPaymentMethodAndPlaceOrder.ts","/@dropins/storefront-order/src/api/placeNegotiableQuoteOrder/graphql/placeNegotiableQuoteOrderMutation.graphql.ts","/@dropins/storefront-order/src/api/placeNegotiableQuoteOrder/placeNegotiableQuoteOrder.ts"],"sourcesContent":["/********************************************************************\n * ADOBE CONFIDENTIAL\n *\n *  Copyright 2024 Adobe\n *  All Rights Reserved.\n *\n * NOTICE:  All information contained herein is, and remains\n * the property of Adobe and its suppliers, if any. The intellectual\n * and technical concepts contained herein are proprietary to Adobe\n * and its suppliers and are protected by all applicable intellectual\n * property laws, including trade secret and copyright laws.\n * Dissemination of this information or reproduction of this material\n * is strictly forbidden unless prior written permission is obtained\n * from Adobe.\n *******************************************************************/\n\nimport {\n  OrderContext,\n  OrderDataModel,\n  ShoppingCartContext,\n} from '@/order/data/models';\n\nconst sumDiscounts = (accum: number, discount: any): number => {\n  return accum + discount.amount.value;\n};\n\nexport const transformShoppingCartContext = (\n  cartId: string,\n  data: OrderDataModel\n): ShoppingCartContext => {\n  return {\n    id: cartId,\n    totalQuantity: data.totalQuantity,\n    possibleOnepageCheckout: true,\n    // @ts-ignore\n    items: data.items.map((orderItem) => ({\n      // we don't know if the checkout drop-in can apply Manufacturerâ€™s Suggested Retail Price\n      canApplyMsrp: true,\n      formattedPrice: '',\n      id: orderItem.id,\n      quantity: orderItem.totalQuantity,\n      product: {\n        canonicalUrl: orderItem.product?.canonicalUrl,\n        mainImageUrl: orderItem.product?.image ?? '',\n        name: orderItem.product?.name ?? '',\n        productId: 0, // productId not exposed by core GraphQL as number (uid is string)\n        productType: orderItem.product?.productType,\n        sku: orderItem.product?.sku ?? '',\n        topLevelSku: orderItem.product?.sku,\n      },\n      prices: {\n        price: {\n          value: orderItem.price.value,\n          currency: orderItem.price.currency,\n          regularPrice: orderItem.regularPrice?.value ?? orderItem.price.value,\n        },\n      },\n      configurableOptions:\n        orderItem.selectedOptions?.map((selectedOption) => ({\n          optionLabel: selectedOption.label,\n          valueLabel: selectedOption.value,\n        })) || [],\n      discountAmount:\n        (orderItem.itemPrices?.discounts ?? orderItem.prices?.discounts)\n          ?.reduce(sumDiscounts, 0) ?? 0,\n    })),\n    prices: {\n      subtotalExcludingTax: {\n        value: data.subtotalExclTax.value,\n        currency: data.subtotalExclTax.currency,\n      },\n      subtotalIncludingTax: {\n        value: data.subtotalInclTax.value,\n        currency: data.subtotalInclTax.currency,\n      },\n    },\n    discountAmount: data.discounts.reduce(sumDiscounts, 0),\n  };\n};\n\nexport const transformOrderContext = (data: OrderDataModel): OrderContext => {\n  const firstCoupon = data.coupons[0];\n  // for now, we only support one payment per order\n  const orderPayment = data.payments?.[0];\n\n  return {\n    appliedCouponCode: firstCoupon?.code ?? '',\n    email: data.email,\n    grandTotal: data.grandTotal.value,\n    orderId: data.number,\n    orderType: 'checkout',\n    otherTax: 0,\n    salesTax: data.totalTax.value,\n    shipping: {\n      shippingMethod: data.shipping?.code ?? '',\n      shippingAmount: data.shipping?.amount ?? 0,\n    },\n    subtotalExcludingTax: data.subtotalExclTax.value,\n    subtotalIncludingTax: data.subtotalInclTax.value,\n    payments: orderPayment\n      ? [\n          {\n            paymentMethodCode: orderPayment?.code || '',\n            paymentMethodName: orderPayment?.name || '',\n            total: data.grandTotal.value,\n            orderId: data.number,\n          },\n        ]\n      : [],\n    discountAmount: data.discounts.reduce(sumDiscounts, 0),\n    taxAmount: data.totalTax.value,\n    paymentAmount: data.grandTotal.value,\n    priceTotal: data.grandTotal.value,\n  };\n};\n","/********************************************************************\n * ADOBE CONFIDENTIAL\n *\n *  Copyright 2024 Adobe\n *  All Rights Reserved.\n *\n * NOTICE:  All information contained herein is, and remains\n * the property of Adobe and its suppliers, if any. The intellectual\n * and technical concepts contained herein are proprietary to Adobe\n * and its suppliers and are protected by all applicable intellectual\n * property laws, including trade secret and copyright laws.\n * Dissemination of this information or reproduction of this material\n * is strictly forbidden unless prior written permission is obtained\n * from Adobe.\n *******************************************************************/\n\nimport { PlaceOrderResponse } from '@/order/types';\nimport { OrderDataModel } from '../models';\nimport { transformOrderData } from './transform-order-details';\n\nexport const transformPlaceOrder = (\n  response: PlaceOrderResponse\n): OrderDataModel | null => {\n  const orderData = response?.data?.placeOrder?.orderV2;\n  if (!orderData) return null;\n  return transformOrderData(orderData);\n};\n","/********************************************************************\n *  Copyright 2025 Adobe\n *  All Rights Reserved.\n *\n * NOTICE:  Adobe permits you to use, modify, and distribute this\n * file in accordance with the terms of the Adobe license agreement\n * accompanying it.\n *******************************************************************/\n\nimport { PlaceNegotiableQuoteOrderResponse } from '@/order/types';\nimport { OrderDataModel } from '../models';\nimport { transformOrderData } from './transform-order-details';\n\nexport const transformPlaceNegotiableQuoteOrder = (\n  response: PlaceNegotiableQuoteOrderResponse\n): OrderDataModel | null => {\n  const orderData = response?.data?.placeNegotiableQuoteOrderV2?.order;\n  if (!orderData) return null;\n  return transformOrderData(orderData);\n};\n","/********************************************************************\n * ADOBE CONFIDENTIAL\n *\n *  Copyright 2024 Adobe\n *  All Rights Reserved.\n *\n * NOTICE:  All information contained herein is, and remains\n * the property of Adobe and its suppliers, if any. The intellectual\n * and technical concepts contained herein are proprietary to Adobe\n * and its suppliers and are protected by all applicable intellectual\n * property laws, including trade secret and copyright laws.\n * Dissemination of this information or reproduction of this material\n * is strictly forbidden unless prior written permission is obtained\n * from Adobe.\n *******************************************************************/\n\nimport { OrderDataModel } from '@/order/data/models';\nimport {\n  transformOrderContext,\n  transformShoppingCartContext,\n} from '@/order/data/transforms';\n\n/**\n * See: https://github.com/adobe/commerce-events/blob/main/packages/storefront-events-sdk/src/contexts.ts\n */\nexport const contexts = {\n  SHOPPING_CART_CONTEXT: 'shoppingCartContext',\n  ORDER_CONTEXT: 'orderContext',\n  CHANNEL_CONTEXT: 'channelContext',\n  PERSONAL_EMAIL_CONTEXT: 'personalEmail',\n};\n\n/**\n * See: https://github.com/adobe/commerce-events/blob/main/packages/storefront-events-sdk/src/events.ts\n */\nexport const events = {\n  // See: https://github.com/adobe/commerce-events/blob/main/examples/events/place-order.md\n  PLACE_ORDER: 'place-order',\n};\n\nexport function getAdobeDataLayer() {\n  // @ts-ignore\n  window.adobeDataLayer = window.adobeDataLayer || [];\n  // @ts-ignore\n  return window.adobeDataLayer;\n}\n\n/**\n * Sets a context in the Adobe Client Data Layer (ACDL)\n * Logic based on: https://github.com/adobe/commerce-events/blob/main/packages/storefront-events-sdk/src/Base.ts#L6\n */\nfunction setContext(name: string, data: any) {\n  const adobeDataLayer = getAdobeDataLayer();\n\n  // Clear existing context\n  adobeDataLayer.push({\n    [name]: null,\n  });\n\n  // Set new context\n  adobeDataLayer.push({\n    [name]: data,\n  });\n}\n\n/**\n * Pushes an event to the Adobe Client Data Layer (ACDL)\n * Logic based on: https://github.com/adobe/commerce-events/blob/main/packages/storefront-events-sdk/src/Base.ts#L35\n */\nfunction pushEvent(event: string) {\n  const adobeDataLayer = getAdobeDataLayer();\n\n  adobeDataLayer.push((acdl: any) => {\n    const state = acdl.getState ? acdl.getState() : {};\n\n    acdl.push({\n      event,\n      eventInfo: {\n        ...state,\n      },\n    });\n  });\n}\n\nfunction getChannelContext() {\n  return {\n    _id: \"https://ns.adobe.com/xdm/channels/web\",\n    _type: \"https://ns.adobe.com/xdm/channel-types/web\",\n  };\n}\n\nexport function setChannelContext() {\n  setContext(contexts.CHANNEL_CONTEXT, getChannelContext());\n}\n\n// Triggered when an order is placed\nexport function publishPlaceOrderEvent(cartId: string, data: OrderDataModel) {\n  const orderContext = transformOrderContext(data);\n  const shoppingCartContext = transformShoppingCartContext(cartId, data);\n\n  // Set context and push open cart event\n  setContext(contexts.ORDER_CONTEXT, {\n    ...orderContext,\n  });\n\n  setContext(contexts.SHOPPING_CART_CONTEXT, {\n    ...shoppingCartContext,\n  });\n\n  setContext(contexts.PERSONAL_EMAIL_CONTEXT, {\n    address: data.email,\n  });\n\n  setChannelContext();\n\n  pushEvent(events.PLACE_ORDER);\n}\n","/********************************************************************\n * ADOBE CONFIDENTIAL\n *\n *  Copyright 2024 Adobe\n *  All Rights Reserved.\n *\n * NOTICE:  All information contained herein is, and remains\n * the property of Adobe and its suppliers, if any. The intellectual\n * and technical concepts contained herein are proprietary to Adobe\n * and its suppliers and are protected by all applicable intellectual\n * property laws, including trade secret and copyright laws.\n * Dissemination of this information or reproduction of this material\n * is strictly forbidden unless prior written permission is obtained\n * from Adobe.\n *******************************************************************/\n\nimport { PlaceOrderResponse } from '@/order/types';\n\nexport class PlaceOrderError extends Error {\n  constructor(message: string) {\n    super(message);\n    this.name = 'PlaceOrderError';\n  }\n}\n\nexport const handlePlaceOrderError = (\n  errors: NonNullable<PlaceOrderResponse['errors']>\n) => {\n  const errorMessage = errors.map((e: any) => e.message).join(' ');\n  throw new PlaceOrderError(errorMessage);\n};\n","/********************************************************************\n * ADOBE CONFIDENTIAL\n *\n *  Copyright 2024 Adobe\n *  All Rights Reserved.\n *\n * NOTICE:  All information contained herein is, and remains\n * the property of Adobe and its suppliers, if any. The intellectual\n * and technical concepts contained herein are proprietary to Adobe\n * and its suppliers and are protected by all applicable intellectual\n * property laws, including trade secret and copyright laws.\n * Dissemination of this information or reproduction of this material\n * is strictly forbidden unless prior written permission is obtained\n * from Adobe.\n *******************************************************************/\n\nimport { PLACE_ORDER_FRAGMENT } from \"@/order/api/graphql/PlaceOrderFragment.graphql\";\n\nexport const PLACE_ORDER_MUTATION = /* GraphQL */ `\n  mutation PLACE_ORDER_MUTATION($cartId: String!) {\n    placeOrder(input: { cart_id: $cartId }) {\n      ...PLACE_ORDER_FRAGMENT\n    }\n  }\n\n  ${PLACE_ORDER_FRAGMENT}\n`;\n","/********************************************************************\n * ADOBE CONFIDENTIAL\n * __________________\n *\n *  Copyright 2025 Adobe\n *  All Rights Reserved.\n *\n * NOTICE:  All information contained herein is, and remains\n * the property of Adobe and its suppliers, if any. The intellectual\n * and technical concepts contained herein are proprietary to Adobe\n * and its suppliers and are protected by all applicable intellectual\n * property laws, including trade secret and copyright laws.\n * Dissemination of this information or reproduction of this material\n * is strictly forbidden unless prior written permission is obtained\n * from Adobe.\n *******************************************************************/\n\nimport { verifyReCaptcha } from '@adobe-commerce/recaptcha';\nimport { setFetchGraphQlHeader } from '../api';\n\nexport const setReCaptchaToken = async () => {\n  const token = await verifyReCaptcha();\n\n  if (token) {\n    setFetchGraphQlHeader('X-ReCaptcha', token);\n  }\n};\n","/********************************************************************\n * ADOBE CONFIDENTIAL\n *\n *  Copyright 2024 Adobe\n *  All Rights Reserved.\n *\n * NOTICE:  All information contained herein is, and remains\n * the property of Adobe and its suppliers, if any. The intellectual\n * and technical concepts contained herein are proprietary to Adobe\n * and its suppliers and are protected by all applicable intellectual\n * property laws, including trade secret and copyright laws.\n * Dissemination of this information or reproduction of this material\n * is strictly forbidden unless prior written permission is obtained\n * from Adobe.\n *******************************************************************/\n\nimport { fetchGraphQl } from '@/order/api';\nimport { OrderDataModel } from '@/order/data/models';\nimport { transformPlaceOrder } from '@/order/data/transforms';\nimport { publishPlaceOrderEvent } from '@/order/lib/acdl';\nimport { handleFetchError } from '@/order/lib/fetch-error';\nimport { handleNetworkError } from '@/order/lib/network-error';\nimport { handlePlaceOrderError } from '@/order/lib/place-order-error';\nimport { PlaceOrderResponse } from '@/order/types/index';\nimport { events } from '@adobe-commerce/event-bus';\nimport { PLACE_ORDER_MUTATION } from './graphql/placeOrderMutation';\nimport { setReCaptchaToken } from '@/order/lib/setReCaptchaToken';\n\nexport const placeOrder = async (\n  cartId: string\n): Promise<OrderDataModel | null | undefined> => {\n  if (!cartId) throw new Error('No cart ID found');\n  await setReCaptchaToken();\n\n  return fetchGraphQl(PLACE_ORDER_MUTATION, {\n    method: 'POST',\n    variables: { cartId },\n  })\n    .then((response: PlaceOrderResponse) => {\n      if (response.errors?.length) {\n        handleFetchError(response.errors);\n      }\n\n      if (response.data?.placeOrder?.errors?.length) {\n        handlePlaceOrderError(response.data.placeOrder?.errors);\n      }\n\n      const payload = transformPlaceOrder(response);\n\n      if (payload) {\n        events.emit('order/placed', payload);\n        events.emit('cart/reset', undefined);\n        publishPlaceOrderEvent(cartId, payload);\n      }\n\n      return payload;\n    })\n    .catch(handleNetworkError);\n};\n","/********************************************************************\n * ADOBE CONFIDENTIAL\n * __________________\n *\n *  Copyright 2025 Adobe\n *  All Rights Reserved.\n *\n * NOTICE:  All information contained herein is, and remains\n * the property of Adobe and its suppliers, if any. The intellectual\n * and technical concepts contained herein are proprietary to Adobe\n * and its suppliers and are protected by all applicable intellectual\n * property laws, including trade secret and copyright laws.\n * Dissemination of this information or reproduction of this material\n * is strictly forbidden unless prior written permission is obtained\n * from Adobe.\n *******************************************************************/\n\nimport { PLACE_ORDER_FRAGMENT } from '@/order/api/graphql/PlaceOrderFragment.graphql';\n\nexport const SET_PAYMENT_METHOD_AND_PLACE_ORDER_MUTATION = /* GraphQL */ `\n  mutation setPaymentMethodAndPlaceOrder($cartId: String!, $paymentMethod: PaymentMethodInput!) {\n    setPaymentMethodOnCart(\n      input: {\n        cart_id: $cartId\n        payment_method: $paymentMethod\n      }\n    ) {\n      cart {\n        selected_payment_method {\n          code\n          title\n        }\n      }\n    }\n    placeOrder(input: { cart_id: $cartId }) {\n      ...PLACE_ORDER_FRAGMENT\n    }\n  }\n\n  ${PLACE_ORDER_FRAGMENT}\n`;","/********************************************************************\n * ADOBE CONFIDENTIAL\n * __________________\n *\n *  Copyright 2025 Adobe\n *  All Rights Reserved.\n *\n * NOTICE:  All information contained herein is, and remains\n * the property of Adobe and its suppliers, if any. The intellectual\n * and technical concepts contained herein are proprietary to Adobe\n * and its suppliers and are protected by all applicable intellectual\n * property laws, including trade secret and copyright laws.\n * Dissemination of this information or reproduction of this material\n * is strictly forbidden unless prior written permission is obtained\n * from Adobe.\n *******************************************************************/\n\nimport { fetchGraphQl } from '@/order/api';\nimport { OrderDataModel } from '@/order/data/models';\nimport { transformPlaceOrder } from '@/order/data/transforms';\nimport { publishPlaceOrderEvent } from '@/order/lib/acdl';\nimport { handleFetchError } from '@/order/lib/fetch-error';\nimport { handleNetworkError } from '@/order/lib/network-error';\nimport { handlePlaceOrderError } from '@/order/lib/place-order-error';\nimport { events } from '@adobe-commerce/event-bus';\nimport { SET_PAYMENT_METHOD_AND_PLACE_ORDER_MUTATION } from './graphql/setPaymentMethodAndPlaceOrderMutation';\n\nexport const setPaymentMethodAndPlaceOrder = async (\n  cartId: string,\n  paymentMethod: any\n): Promise<OrderDataModel | null | undefined> => {\n  if (!cartId) throw new Error('No cart ID found');\n  if (!paymentMethod) throw new Error('No payment method found');\n\n  return fetchGraphQl(SET_PAYMENT_METHOD_AND_PLACE_ORDER_MUTATION, {\n    variables: { cartId, paymentMethod },\n  })\n    .then((response: any) => {\n      if (response.errors?.length) {\n        handleFetchError(response.errors);\n      }\n\n      // Check for errors in placeOrder part of the response\n      if (response.data?.placeOrder?.errors?.length) {\n        handlePlaceOrderError(response.data.placeOrder?.errors);\n      }\n\n      // Use the same transformation as placeOrder\n      const payload = transformPlaceOrder({ data: { placeOrder: response.data?.placeOrder } });\n\n      if (payload) {\n        events.emit('order/placed', payload);\n        events.emit('cart/reset', undefined);\n        publishPlaceOrderEvent(cartId, payload);\n      }\n\n      return payload;\n    })\n    .catch(handleNetworkError);\n};\n","/********************************************************************\n *  Copyright 2025 Adobe\n *  All Rights Reserved.\n *\n * NOTICE:  Adobe permits you to use, modify, and distribute this\n * file in accordance with the terms of the Adobe license agreement\n * accompanying it.\n *******************************************************************/\n\nimport { PLACE_NEGOTIABLE_QUOTE_ORDER_FRAGMENT } from '@/order/api/graphql/PlaceNegotiableQuoteOrderFragment.graphql';\n\nexport const PLACE_NEGOTIABLE_QUOTE_ORDER_MUTATION = /* GraphQL */ `\n  mutation PLACE_NEGOTIABLE_QUOTE_ORDER_MUTATION($quoteUid: ID!) {\n    placeNegotiableQuoteOrderV2(input: { quote_uid: $quoteUid }) {\n      ...PLACE_NEGOTIABLE_QUOTE_ORDER_FRAGMENT\n    }\n  }\n\n  ${PLACE_NEGOTIABLE_QUOTE_ORDER_FRAGMENT}\n`;\n","/********************************************************************\n *  Copyright 2025 Adobe\n *  All Rights Reserved.\n *\n * NOTICE:  Adobe permits you to use, modify, and distribute this\n * file in accordance with the terms of the Adobe license agreement\n * accompanying it.\n *******************************************************************/\n\nimport { fetchGraphQl } from '@/order/api';\nimport { OrderDataModel } from '@/order/data/models';\nimport { transformPlaceNegotiableQuoteOrder } from '@/order/data/transforms';\nimport { publishPlaceOrderEvent } from '@/order/lib/acdl';\nimport { handleFetchError } from '@/order/lib/fetch-error';\nimport { handleNetworkError } from '@/order/lib/network-error';\n  import { handlePlaceOrderError } from '@/order/lib/place-order-error';\nimport { PlaceNegotiableQuoteOrderResponse } from '@/order/types/index';\nimport { events } from '@adobe-commerce/event-bus';\nimport { PLACE_NEGOTIABLE_QUOTE_ORDER_MUTATION } from './graphql/placeNegotiableQuoteOrderMutation.graphql';\nimport { setReCaptchaToken } from '@/order/lib/setReCaptchaToken';\n\nexport const placeNegotiableQuoteOrder = async (\n  quoteUid: string\n): Promise<OrderDataModel | null | undefined> => {\n  if (!quoteUid) throw new Error('No quote UID found');\n  await setReCaptchaToken();\n\n  return fetchGraphQl(PLACE_NEGOTIABLE_QUOTE_ORDER_MUTATION, {\n    method: 'POST',\n    variables: { quoteUid },\n  })\n    .then((response: PlaceNegotiableQuoteOrderResponse) => {\n      if (response.errors?.length) {\n        handleFetchError(response.errors);\n      }\n\n      if (response.data?.placeNegotiableQuoteOrderV2?.errors?.length) {\n        handlePlaceOrderError(response.data.placeNegotiableQuoteOrderV2?.errors);\n      }\n\n      const payload = transformPlaceNegotiableQuoteOrder(response);\n\n      if (payload) {\n        events.emit('order/placed', payload);\n        publishPlaceOrderEvent(quoteUid, payload);\n      }\n\n      return payload;\n    })\n    .catch(handleNetworkError);\n};\n"],"names":["sumDiscounts","accum","discount","transformShoppingCartContext","cartId","data","orderItem","_a","_b","_c","_d","_e","_f","_g","_h","selectedOption","_k","_i","_j","transformOrderContext","firstCoupon","orderPayment","transformPlaceOrder","response","orderData","transformOrderData","transformPlaceNegotiableQuoteOrder","contexts","events","getAdobeDataLayer","setContext","name","adobeDataLayer","pushEvent","event","acdl","state","getChannelContext","setChannelContext","publishPlaceOrderEvent","orderContext","shoppingCartContext","PlaceOrderError","message","handlePlaceOrderError","errors","errorMessage","e","PLACE_ORDER_MUTATION","PLACE_ORDER_FRAGMENT","setReCaptchaToken","token","verifyReCaptcha","setFetchGraphQlHeader","placeOrder","fetchGraphQl","handleFetchError","payload","handleNetworkError","SET_PAYMENT_METHOD_AND_PLACE_ORDER_MUTATION","setPaymentMethodAndPlaceOrder","paymentMethod","PLACE_NEGOTIABLE_QUOTE_ORDER_MUTATION","PLACE_NEGOTIABLE_QUOTE_ORDER_FRAGMENT","placeNegotiableQuoteOrder","quoteUid"],"mappings":"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"}