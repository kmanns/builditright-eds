{"version":3,"file":"get-price-formatter.js","sources":["/@dropins/tools/src/lib/debounce.ts","/@dropins/tools/src/lib/is-number.ts","/@dropins/tools/src/lib/deviceUtils.ts","/@dropins/tools/src/lib/get-price-formatter.ts"],"sourcesContent":["/********************************************************************\n *  Copyright 2024 Adobe\n *  All Rights Reserved.\n *\n * NOTICE:  Adobe permits you to use, modify, and distribute this \n * file in accordance with the terms of the Adobe license agreement \n * accompanying it. \n *******************************************************************/\n\nexport const debounce = (fn: Function, ms: number) => {\n  let timeoutId: ReturnType<typeof setTimeout>;\n  return function (this: any, ...args: any[]) {\n    clearTimeout(timeoutId);\n    timeoutId = setTimeout(() => fn.apply(this, args), ms);\n  };\n};\n","/********************************************************************\n *  Copyright 2024 Adobe\n *  All Rights Reserved.\n *\n * NOTICE:  Adobe permits you to use, modify, and distribute this \n * file in accordance with the terms of the Adobe license agreement \n * accompanying it. \n *******************************************************************/\n\nexport const isNumber = (value: number | string): value is number => {\n  return typeof value === 'number';\n};\n","/********************************************************************\n *  Copyright 2024 Adobe\n *  All Rights Reserved.\n *\n * NOTICE:  Adobe permits you to use, modify, and distribute this \n * file in accordance with the terms of the Adobe license agreement \n * accompanying it. \n *******************************************************************/\n\nexport const isIOSMobileDevice = () => {\n  const userAgent = navigator.userAgent.toLowerCase();\n  const isIOS = /ipad|iphone|ipod/.test(userAgent);\n  const isMacWithTouch = userAgent.includes('mac') && 'ontouchend' in document;\n\n  return isIOS || isMacWithTouch;\n};\n","/********************************************************************\n *  Copyright 2025 Adobe\n *  All Rights Reserved.\n *\n * NOTICE:  Adobe permits you to use, modify, and distribute this\n * file in accordance with the terms of the Adobe license agreement\n * accompanying it.\n *******************************************************************/\n\nimport { getGlobalLocale } from '@adobe-commerce/elsie/lib';\n\nexport interface PriceFormatterOptions {\n  currency?: string | null;\n  locale?: string;\n  formatOptions?: Intl.NumberFormatOptions;\n}\n\n/**\n * Determines the effective locale to use for price formatting\n * Priority: prop locale > global locale > browser locale > default 'en-US'\n */\nexport function getEffectiveLocale(locale?: string): string {\n  if (locale) {\n    return locale;\n  }\n  const globalLocale = getGlobalLocale();\n  if (globalLocale) {\n    return globalLocale;\n  }\n  // Fallback to browser locale or default\n  return process.env.LOCALE && process.env.LOCALE !== 'undefined' ? process.env.LOCALE : 'en-US';\n}\n\n/**\n * Gets an Intl.NumberFormat instance for price formatting\n * Uses getEffectiveLocale internally to determine the best locale\n *\n * @example\n * // Single price formatting\n * const formatter = getPriceFormatter({ currency: 'USD', locale: 'en-US' });\n * const price = formatter.format(10.99); // \"$10.99\"\n *\n * @example\n * // Bulk price formatting (more efficient)\n * const formatter = getPriceFormatter({ currency: 'EUR', locale: 'fr-FR' });\n * const prices = [10.99, 25.50, 99.99].map(amount => formatter.format(amount));\n */\nexport function getPriceFormatter(\n  options: PriceFormatterOptions = {}\n): Intl.NumberFormat {\n  const { currency, locale, formatOptions = {} } = options;\n  const effectiveLocale = getEffectiveLocale(locale);\n\n  const params: Intl.NumberFormatOptions = {\n    style: 'currency',\n    currency: currency || 'USD',\n    // These options are needed to round to whole numbers if that's what you want.\n    minimumFractionDigits: 2, // (this suffices for whole numbers, but will print 2500.10 as $2,500.1)\n    maximumFractionDigits: 2, // (causes 2500.99 to be printed as $2,501)\n    ...formatOptions,\n  };\n\n  try {\n    return new Intl.NumberFormat(effectiveLocale, params);\n  } catch (error) {\n    console.error(`Error creating Intl.NumberFormat instance for locale ${effectiveLocale}. Falling back to en-US.`, error);\n    return new Intl.NumberFormat('en-US', params);\n  }\n}\n"],"names":["debounce","fn","ms","timeoutId","args","isNumber","value","isIOSMobileDevice","userAgent","isIOS","isMacWithTouch","getEffectiveLocale","locale","globalLocale","getGlobalLocale","define_process_env_default","getPriceFormatter","options","currency","formatOptions","effectiveLocale","params","error"],"mappings":"uCASa,MAAAA,EAAW,CAACC,EAAcC,IAAe,CAChD,IAAAC,EACJ,OAAO,YAAwBC,EAAa,CAC1C,aAAaD,CAAS,EACtBA,EAAY,WAAW,IAAMF,EAAG,MAAM,KAAMG,CAAI,EAAGF,CAAE,CACvD,CACF,ECNaG,EAAYC,GAChB,OAAOA,GAAU,SCDbC,EAAoB,IAAM,CAC/B,MAAAC,EAAY,UAAU,UAAU,YAAY,EAC5CC,EAAQ,mBAAmB,KAAKD,CAAS,EACzCE,EAAiBF,EAAU,SAAS,KAAK,GAAK,eAAgB,SAEpE,OAAOC,GAASC,CAClB,WCMO,SAASC,EAAmBC,EAAyB,CAC1D,GAAIA,EACK,OAAAA,EAET,MAAMC,EAAeC,EAAgB,EACrC,OAAID,IAIGE,EAAY,QAAUA,EAAY,SAAW,YAAcA,EAAY,OAAS,QACzF,CAgBgB,SAAAC,EACdC,EAAiC,GACd,CACnB,KAAM,CAAE,SAAAC,EAAU,OAAAN,EAAQ,cAAAO,EAAgB,CAAA,CAAO,EAAAF,EAC3CG,EAAkBT,EAAmBC,CAAM,EAE3CS,EAAmC,CACvC,MAAO,WACP,SAAUH,GAAY,MAEtB,sBAAuB,EACvB,sBAAuB,EACvB,GAAGC,CACL,EAEI,GAAA,CACF,OAAO,IAAI,KAAK,aAAaC,EAAiBC,CAAM,QAC7CC,EAAO,CACd,eAAQ,MAAM,wDAAwDF,CAAe,2BAA4BE,CAAK,EAC/G,IAAI,KAAK,aAAa,QAASD,CAAM,CAAA,CAEhD"}