{"version":3,"file":"PurchaseOrderCommentsList.js","sources":["/@dropins/storefront-purchase-order/src/components/PurchaseOrderCommentsListContent/PurchaseOrderCommentsListContent.tsx","/@dropins/storefront-purchase-order/src/containers/PurchaseOrderCommentsList/PurchaseOrderCommentsList.tsx"],"sourcesContent":["/********************************************************************\n * ADOBE CONFIDENTIAL\n * __________________\n *\n *  Copyright 2025 Adobe\n *  All Rights Reserved.\n *\n * NOTICE:  All information contained herein is, and remains\n * the property of Adobe and its suppliers, if any. The intellectual\n * and technical concepts contained herein are proprietary to Adobe\n * and its suppliers and are protected by all applicable intellectual\n * property laws, including trade secret and copyright laws.\n * Dissemination of this information or reproduction of this material\n * is strictly forbidden unless prior written permission is obtained\n * from Adobe.\n *******************************************************************/\n\nimport { Fragment, FunctionComponent } from 'preact';\nimport { Text, useText } from '@adobe-commerce/elsie/i18n';\nimport { formatDate } from '@/b2b-purchase-order/lib/formatDate';\nimport { Button } from '@adobe-commerce/elsie/components';\nimport { useState } from 'preact/hooks';\nimport '@/b2b-purchase-order/components/PurchaseOrderCommentsListContent/PurchaseOrderCommentsListContent.css';\nimport { PurchaseOrderCommentsListContentProps } from '@/b2b-purchase-order/types/components';\n\nexport const PurchaseOrderCommentsListContent: FunctionComponent<\n  PurchaseOrderCommentsListContentProps\n> = ({ commentsList = [], visibleRecordsLimit = 5 }) => {\n  const [recordsLimit, setRecordsLimit] = useState<number>(visibleRecordsLimit);\n  const showMore = commentsList.length > recordsLimit;\n  const buttonIsHidden = commentsList.length <= visibleRecordsLimit;\n\n  const t = useText({\n    showMoreLabel: 'PurchaseOrders.comments.view.ariaLabel.showMore',\n    showLessLabel: 'PurchaseOrders.comments.view.ariaLabel.showLess',\n  });\n\n  if (!commentsList.length) {\n    return (\n      <div className={'b2b-purchase-order-comment-list-content'}>\n        <Text id=\"PurchaseOrders.comments.view.emptyText\" />\n      </div>\n    );\n  }\n\n  return (\n    <div className={'b2b-purchase-order-comment-list-content'}>\n      <ul className={'b2b-purchase-order-comment-list-content__list'}>\n        {commentsList.slice(0, recordsLimit).map((item, index) => {\n          const slicedLength = Math.min(recordsLimit, commentsList.length);\n          return (\n            <Fragment key={item.uid}>\n              <li className={'b2b-purchase-order-comment-list-content__item'}>\n                <div\n                  className={'b2b-purchase-order-comment-list-content__title'}\n                >\n                  {formatDate(item.createdAt)}\n                  {item.author?.firstname && item.author?.lastname\n                    ? ` (${item.author.firstname} ${item.author.lastname})`\n                    : ''}\n                </div>\n                <div\n                  className={\n                    'b2b-purchase-order-comment-list-content__description'\n                  }\n                >\n                  {item.text}\n                </div>\n              </li>\n              {index < slicedLength - 1 && (\n                <hr\n                  className={'b2b-purchase-order-comment-list-content__divider'}\n                />\n              )}\n            </Fragment>\n          );\n        })}\n      </ul>\n      {!buttonIsHidden && (\n        <div className={'b2b-purchase-order-comment-list-content__actions'}>\n          <Button\n            variant=\"secondary\"\n            aria-expanded={!showMore}\n            aria-label={showMore ? t.showMoreLabel : t.showLessLabel}\n            onClick={() => {\n              setRecordsLimit(\n                showMore ? commentsList.length : visibleRecordsLimit\n              );\n            }}\n          >\n            <Text\n              id={`PurchaseOrders.comments.view.buttons.${\n                showMore ? 'viewMore' : 'viewLess'\n              }`}\n            />\n          </Button>\n        </div>\n      )}\n    </div>\n  );\n};\n","/********************************************************************\n * ADOBE CONFIDENTIAL\n * __________________\n *\n *  Copyright 2025 Adobe\n *  All Rights Reserved.\n *\n * NOTICE:  All information contained herein is, and remains\n * the property of Adobe and its suppliers, if any. The intellectual\n * and technical concepts contained herein are proprietary to Adobe\n * and its suppliers and are protected by all applicable intellectual\n * property laws, including trade secret and copyright laws.\n * Dissemination of this information or reproduction of this material\n * is strictly forbidden unless prior written permission is obtained\n * from Adobe.\n *******************************************************************/\n\nimport { classes, Container } from '@adobe-commerce/elsie/lib';\nimport { usePurchaseOrderData } from '@/b2b-purchase-order/hooks';\nimport { useText } from 'preact-i18n';\nimport { Card, Skeleton, SkeletonRow } from '@adobe-commerce/elsie/components';\nimport {\n  PurchaseOrderCommentsListContent,\n  PurchaseOrdersHeader,\n} from '@/b2b-purchase-order/components';\nimport { PurchaseOrderCommentsListProps } from '@/b2b-purchase-order/types/containers';\n\nexport const PurchaseOrderCommentsList: Container<\n  PurchaseOrderCommentsListProps\n> = ({\n  withHeader = true,\n  withWrapper = true,\n  visibleRecordsLimit = 5,\n  className,\n}) => {\n  const { poDataLoading, purchaseOrderData } = usePurchaseOrderData();\n  const t = useText({\n    headerText: 'PurchaseOrders.comments.view.headerText',\n  });\n\n  const commentsList = purchaseOrderData?.comments || [];\n\n  const renderCommentsList = (\n    <>\n      {withHeader && withWrapper ? (\n        <PurchaseOrdersHeader headerText={t.headerText} divider={true} />\n      ) : null}\n      {!poDataLoading ? (\n        <PurchaseOrderCommentsListContent\n          commentsList={commentsList.reverse()}\n          visibleRecordsLimit={visibleRecordsLimit}\n        />\n      ) : (\n        <Skeleton rowGap=\"medium\" data-testid=\"comment-list-loader\">\n          <SkeletonRow\n            size=\"small\"\n            variant=\"row\"\n            fullWidth\n            lines={1}\n            style={{ maxWidth: 300 }}\n          />\n          <SkeletonRow size=\"medium\" variant=\"row\" fullWidth lines={1} />\n        </Skeleton>\n      )}\n    </>\n  );\n\n  return (\n    <div\n      className={classes(['b2b-purchase-order-comment-list', className])}\n      data-testid=\"order-comment-list-container\"\n    >\n      {withHeader && !withWrapper ? (\n        <PurchaseOrdersHeader headerText={t.headerText} />\n      ) : null}\n      {withWrapper ? (\n        <Card variant={'secondary'} data-testid=\"orderCommentListCard\">\n          {renderCommentsList}\n        </Card>\n      ) : (\n        renderCommentsList\n      )}\n    </div>\n  );\n};\n"],"names":["PurchaseOrderCommentsListContent","commentsList","visibleRecordsLimit","recordsLimit","setRecordsLimit","useState","showMore","buttonIsHidden","t","useText","jsxs","jsx","item","index","slicedLength","Fragment","formatDate","_a","_b","Button","Text","PurchaseOrderCommentsList","withHeader","withWrapper","className","poDataLoading","purchaseOrderData","usePurchaseOrderData","renderCommentsList","PurchaseOrdersHeader","Skeleton","SkeletonRow","classes","Card"],"mappings":"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"}