{"version":3,"file":"ApprovalRuleForm.js","sources":["/@dropins/storefront-purchase-order/src/lib/updateFormFieldValue.ts","/@dropins/storefront-purchase-order/src/lib/formValidation.ts","/@dropins/storefront-purchase-order/src/configs/approvalRuleForm.config.ts","/@dropins/storefront-purchase-order/src/lib/transformToFormValues.ts","/@dropins/storefront-purchase-order/src/lib/cleanAndDeep.ts","/@dropins/storefront-purchase-order/src/hooks/useApprovalRuleForm.tsx","/@dropins/storefront-purchase-order/src/components/ApprovalRuleForm/blocks/ErrorMessage.tsx","/@dropins/storefront-purchase-order/src/components/ApprovalRuleForm/blocks/Form.tsx","/@dropins/storefront-purchase-order/src/components/ApprovalRuleForm/ApprovalRuleForm.tsx","/@dropins/storefront-purchase-order/src/containers/ApprovalRuleForm/ApprovalRuleForm.tsx"],"sourcesContent":["/********************************************************************\n * ADOBE CONFIDENTIAL\n * __________________\n *\n *  Copyright 2025 Adobe\n *  All Rights Reserved.\n *\n * NOTICE:  All information contained herein is, and remains\n * the property of Adobe and its suppliers, if any. The intellectual\n * and technical concepts contained herein are proprietary to Adobe\n * and its suppliers and are protected by all applicable intellectual\n * property laws, including trade secret and copyright laws.\n * Dissemination of this information or reproduction of this material\n * is strictly forbidden unless prior written permission is obtained\n * from Adobe.\n *******************************************************************/\n\nimport {\n  ConditionAttributeType,\n  ConditionOperatorType,\n  FormValuesParams,\n} from '../types/hooks';\n\nexport const updateFormFieldValue = (\n  formValues: FormValuesParams,\n  key: string,\n  value: string | number | boolean | string[]\n): FormValuesParams => {\n  const newFormValues = { ...formValues };\n\n  switch (key) {\n    case 'status':\n      newFormValues.status = value ? 'ENABLED' : 'DISABLED';\n      break;\n    case 'name':\n      newFormValues.name = value as string;\n      break;\n    case 'description':\n      newFormValues.description = value as string;\n      break;\n    case 'ruleType':\n      newFormValues.condition.attribute = value as ConditionAttributeType;\n      break;\n    case 'ruleCondition':\n      newFormValues.condition.operator = value as ConditionOperatorType;\n      break;\n    case 'ruleValue': {\n      let numericValue =\n        typeof value === 'string' ? value.replace(/[^\\d]/g, '') : String(value);\n\n      if (numericValue === '') {\n        if (newFormValues.condition.attribute === 'NUMBER_OF_SKUS') {\n          newFormValues.condition.quantity = '';\n        } else {\n          newFormValues.condition.amount.value = '';\n        }\n      } else if (newFormValues.condition.attribute === 'NUMBER_OF_SKUS') {\n        newFormValues.condition.quantity = +numericValue;\n      } else {\n        newFormValues.condition.amount.value = +numericValue;\n      }\n      break;\n    }\n    case 'ruleConditionCurrency':\n      newFormValues.condition.amount.currency = value as string;\n      break;\n    case 'approvers':\n      newFormValues.approvers = value as string[];\n      break;\n    case 'roleType':\n      newFormValues.roleType = value as string;\n      break;\n    case 'appliesTo':\n      newFormValues.appliesTo = value as string[];\n      break;\n    default:\n      break;\n  }\n\n  return newFormValues;\n};\n","/********************************************************************\n * ADOBE CONFIDENTIAL\n * __________________\n *\n *  Copyright 2025 Adobe\n *  All Rights Reserved.\n *\n * NOTICE:  All information contained herein is, and remains\n * the property of Adobe and its suppliers, if any. The intellectual\n * and technical concepts contained herein are proprietary to Adobe\n * and its suppliers and are protected by all applicable intellectual\n * property laws, including trade secret and copyright laws.\n * Dissemination of this information or reproduction of this material\n * is strictly forbidden unless prior written permission is obtained\n * from Adobe.\n *******************************************************************/\n\nimport {\n  FormValuesParams,\n  ValidationApprovalFormError,\n} from '@/b2b-purchase-order/types/hooks';\n\n/**\n * Validates all form fields and returns validation errors\n * This function contains the core validation logic for the approval rule form\n */\nexport const validateFormFields = (\n  values: FormValuesParams\n): ValidationApprovalFormError => {\n  const errors: ValidationApprovalFormError = {};\n\n  // Validate rule name (required)\n  if (!values.name || values.name.trim() === '') {\n    errors.name = 'PurchaseOrders.approvalRuleForm.errorsMessages.required';\n  }\n\n  // Validate appliesTo when specific roles are selected\n  if (\n    values.roleType === 'specific_roles' &&\n    (!values.appliesTo || values.appliesTo.length === 0)\n  ) {\n    errors.appliesTo =\n      'PurchaseOrders.approvalRuleForm.errorsMessages.approvers';\n  }\n\n  // Validate rule value based on condition type\n  if (values.condition.attribute === 'NUMBER_OF_SKUS') {\n    if (values.condition.quantity === '') {\n      errors.ruleValue =\n        'PurchaseOrders.approvalRuleForm.errorsMessages.required';\n    }\n  } else if (values.condition.amount.value === '') {\n    errors.ruleValue =\n      'PurchaseOrders.approvalRuleForm.errorsMessages.required';\n  }\n\n  // Validate approvers (required)\n  if (!values.approvers || values.approvers.length === 0) {\n    errors.approvers =\n      'PurchaseOrders.approvalRuleForm.errorsMessages.approvers';\n  }\n\n  return errors;\n};\n\n/**\n * Returns only the errors for fields that have been touched by the user\n * This prevents showing validation errors for fields the user hasn't interacted with yet\n */\nexport const getVisibleErrors = (\n  allErrors: ValidationApprovalFormError,\n  touchedFields: { [key: string]: boolean }\n): ValidationApprovalFormError => {\n  const visibleErrors: ValidationApprovalFormError = {};\n\n  // Only include errors for touched fields\n  Object.keys(allErrors).forEach((errorKey) => {\n    if (touchedFields[errorKey]) {\n      visibleErrors[errorKey] = allErrors[errorKey];\n    }\n  });\n\n  return visibleErrors;\n};\n\n/**\n * Updates errors based on new validation results and touched fields\n * This is used for incremental validation as the user fills out the form\n */\nexport const updateValidationErrors = (\n  newErrors: ValidationApprovalFormError,\n  currentErrors: ValidationApprovalFormError,\n  touchedFields: { [key: string]: boolean }\n): ValidationApprovalFormError => {\n  const updatedErrors: ValidationApprovalFormError = { ...currentErrors };\n\n  // Add new errors for touched fields\n  Object.keys(newErrors).forEach((errorKey) => {\n    if (touchedFields[errorKey]) {\n      updatedErrors[errorKey] = newErrors[errorKey];\n    }\n  });\n\n  // Remove errors for fields that became valid\n  Object.keys(updatedErrors).forEach((errorKey) => {\n    if (touchedFields[errorKey] && !newErrors[errorKey]) {\n      delete updatedErrors[errorKey];\n    }\n  });\n\n  return updatedErrors;\n};\n","/********************************************************************\n * ADOBE CONFIDENTIAL\n * __________________\n *\n *  Copyright 2025 Adobe\n *  All Rights Reserved.\n *\n * NOTICE:  All information contained herein is, and remains\n * the property of Adobe and its suppliers, if any. The intellectual\n * and technical concepts contained herein are proprietary to Adobe\n * and its suppliers and are protected by all applicable intellectual\n * property laws, including trade secret and copyright laws.\n * Dissemination of this information or reproduction of this material\n * is strictly forbidden unless prior written permission is obtained\n * from Adobe.\n *******************************************************************/\n\nimport { FormValuesParams, FormState } from '@/b2b-purchase-order/types/hooks';\n\nexport const RULE_TYPE_OPTIONS_KEYS = {\n  GRAND_TOTAL: 'ruleTypeGrandTotal',\n  SHIPPING_INCL_TAX: 'ruleTypeShippingInclTax',\n  NUMBER_OF_SKUS: 'ruleTypeNumberOfSkus',\n} as const;\n\nexport const CONDITION_OPERATORS_KEYS = {\n  MORE_THAN: 'conditionOperatorMoreThan',\n  LESS_THAN: 'conditionOperatorLessThan',\n  MORE_THAN_OR_EQUAL_TO: 'conditionOperatorMoreThanOrEqualTo',\n  LESS_THAN_OR_EQUAL_TO: 'conditionOperatorLessThanOrEqualTo',\n} as const;\n\nexport const APPLIES_TO_OPTIONS_KEYS = {\n  ALL_USERS: 'appliesToAllUsers',\n  SPECIFIC_ROLES: 'appliesToSpecificRoles',\n} as const;\n\n/**\n * Initial values for the approval rule form\n * Used when creating a new rule\n */\nexport const INITIAL_FORM_VALUES: FormValuesParams = {\n  status: 'ENABLED',\n  name: '',\n  description: '',\n  roleType: 'all_users',\n  appliesTo: [],\n  condition: {\n    quantity: '',\n    amount: {\n      currency: 'USD',\n      value: '',\n    },\n    attribute: 'GRAND_TOTAL',\n    operator: 'MORE_THAN',\n  },\n  approvers: [],\n};\n\n/**\n * Initial state for the form reducer\n * Includes form values, loading states, and validation\n */\nexport const INITIAL_FORM_STATE: FormState = {\n  formValues: INITIAL_FORM_VALUES,\n  isLoading: false,\n  submitError: null,\n  availableAppliesTo: [],\n  availableRequiresApprovalFrom: [],\n  errors: {},\n  touched: {},\n  currencyCodesList: [{ text: 'USD', value: 'USD' }],\n};\n\n/**\n * Fields that must be touched (validated) on form submission\n */\nexport const REQUIRED_FIELDS_ON_SUBMIT = {\n  name: true,\n  appliesTo: true,\n  ruleValue: true,\n  approvers: true,\n} as const;\n\n/**\n * Translation keys for validation error messages\n */\nexport const VALIDATION_ERROR_KEYS = {\n  REQUIRED: 'PurchaseOrders.approvalRuleForm.errorsMessages.required',\n  APPROVERS: 'PurchaseOrders.approvalRuleForm.errorsMessages.approvers',\n  FAILED_TO_LOAD: 'Failed to load metadata. Please try again.',\n  FAILED_TO_CREATE: 'Failed to create approval rule. Please try again.',\n} as const;\n\n/**\n * Creates rule type options for the dropdown\n * @param t - Translation function\n */\n/**\n * Creates rule type options for the dropdown\n * @param t - Translation function\n */\nexport const createRuleTypeOptions = (t: Record<string, string>) => [\n  {\n    text: t[RULE_TYPE_OPTIONS_KEYS.GRAND_TOTAL],\n    value: 'GRAND_TOTAL',\n  },\n  {\n    text: t[RULE_TYPE_OPTIONS_KEYS.SHIPPING_INCL_TAX],\n    value: 'SHIPPING_INCL_TAX',\n  },\n  {\n    text: t[RULE_TYPE_OPTIONS_KEYS.NUMBER_OF_SKUS],\n    value: 'NUMBER_OF_SKUS',\n  },\n];\n\n/**\n * Creates condition operator options for the dropdown\n * @param t - Translation function\n */\nexport const createConditionOperators = (t: Record<string, string>) => [\n  { text: t[CONDITION_OPERATORS_KEYS.MORE_THAN], value: 'MORE_THAN' },\n  {\n    text: t[CONDITION_OPERATORS_KEYS.LESS_THAN],\n    value: 'LESS_THAN',\n  },\n  {\n    text: t[CONDITION_OPERATORS_KEYS.MORE_THAN_OR_EQUAL_TO],\n    value: 'MORE_THAN_OR_EQUAL_TO',\n  },\n  {\n    text: t[CONDITION_OPERATORS_KEYS.LESS_THAN_OR_EQUAL_TO],\n    value: 'LESS_THAN_OR_EQUAL_TO',\n  },\n];\n\n/**\n * Creates \"applies to\" options for the dropdown\n * @param t - Translation function\n */\nexport const createAppliesToOptions = (t: Record<string, string>) => [\n  { text: t[APPLIES_TO_OPTIONS_KEYS.ALL_USERS], value: 'all_users' },\n  {\n    text: t[APPLIES_TO_OPTIONS_KEYS.SPECIFIC_ROLES],\n    value: 'specific_roles',\n  },\n];\n","/********************************************************************\n * ADOBE CONFIDENTIAL\n * __________________\n *\n *  Copyright 2025 Adobe\n *  All Rights Reserved.\n *\n * NOTICE:  All information contained herein is, and remains\n * the property of Adobe and its suppliers, if any. The intellectual\n * and technical concepts contained herein are proprietary to Adobe\n * and its suppliers and are protected by all applicable intellectual\n * property laws, including trade secret and copyright laws.\n * Dissemination of this information or reproduction of this material\n * is strictly forbidden unless prior written permission is obtained\n * from Adobe.\n *******************************************************************/\n\nimport { PurchaseOrderApprovalRuleModel } from '@/b2b-purchase-order/data/models';\nimport {\n  ConditionAttributeType,\n  ConditionOperatorType,\n  FormValuesParams,\n} from '@/b2b-purchase-order/types/hooks';\nimport {\n  RULE_TYPE_OPTIONS_KEYS,\n  CONDITION_OPERATORS_KEYS,\n} from '@/b2b-purchase-order/configs/approvalRuleForm.config';\n\n// Default values for form fields\nconst DEFAULT_STATUS = 'ENABLED';\nconst DEFAULT_ATTRIBUTE: ConditionAttributeType = 'GRAND_TOTAL';\nconst DEFAULT_OPERATOR: ConditionOperatorType = 'MORE_THAN';\nconst DEFAULT_CURRENCY = 'USD';\nconst DEFAULT_QUANTITY = 0;\nconst DEFAULT_AMOUNT_VALUE = 0;\n\n/**\n * Checks if the given attribute is a valid condition attribute type\n */\nconst isValidAttribute = (\n  attribute: any\n): attribute is ConditionAttributeType => {\n  return Object.keys(RULE_TYPE_OPTIONS_KEYS).includes(attribute);\n};\n\n/**\n * Checks if the given operator is a valid condition operator type\n */\nconst isValidOperator = (operator: any): operator is ConditionOperatorType => {\n  return Object.keys(CONDITION_OPERATORS_KEYS).includes(operator);\n};\n\n/**\n * Transforms API response data to form values format\n * Handles all the necessary data conversions and provides safe defaults\n */\nexport const transformToFormValues = (\n  data: PurchaseOrderApprovalRuleModel\n): FormValuesParams => {\n  return {\n    status: (data.status as 'ENABLED' | 'DISABLED') || DEFAULT_STATUS,\n    name: data.name || '',\n    description: data.description || '',\n    roleType: data.appliesToRoles?.length > 0 ? 'specific_roles' : 'all_users',\n    appliesTo: data.appliesToRoles?.map((role) => role.id) || [],\n    condition: {\n      quantity: data.condition?.quantity ?? DEFAULT_QUANTITY,\n      amount: {\n        currency: data.condition?.amount?.currency || DEFAULT_CURRENCY,\n        value: data.condition?.amount?.value ?? DEFAULT_AMOUNT_VALUE,\n      },\n      attribute: isValidAttribute(data.condition?.attribute)\n        ? data.condition.attribute\n        : DEFAULT_ATTRIBUTE,\n      operator: isValidOperator(data.condition?.operator)\n        ? data.condition.operator\n        : DEFAULT_OPERATOR,\n    },\n    approvers: data.approverRoles?.map((role) => role.id) || [],\n  };\n};\n","/********************************************************************\n * ADOBE CONFIDENTIAL\n * __________________\n *\n *  Copyright 2025 Adobe\n *  All Rights Reserved.\n *\n * NOTICE:  All information contained herein is, and remains\n * the property of Adobe and its suppliers, if any. The intellectual\n * and technical concepts contained herein are proprietary to Adobe\n * and its suppliers and are protected by all applicable intellectual\n * property laws, including trade secret and copyright laws.\n * Dissemination of this information or reproduction of this material\n * is strictly forbidden unless prior written permission is obtained\n * from Adobe.\n *******************************************************************/\n\nimport { toSnakeCase } from './case-converter';\n\n/**\n * Checks if a value should be considered as \"has value\" for form submission\n * Empty strings and null/undefined are considered as no value\n * Zero (0) is considered as no value to match existing behavior\n */\nconst hasValue = (value: any): boolean => {\n  return value !== null && value !== undefined && value !== '' && value !== 0;\n};\n\n/**\n * Cleans form values and converts to snake_case for API submission\n * - Handles role type logic (all_users vs specific_roles)\n * - Removes empty condition values (amount or quantity)\n * - Converts camelCase keys to snake_case\n */\nexport function cleanAndDeep(formValues: Record<string, any>): any {\n  const { roleType, appliesTo, condition, ...restAll } = formValues;\n\n  // Handle role type logic: all_users means empty appliesTo array\n  const roleConfig =\n    roleType === 'all_users' ? { appliesTo: [] } : { appliesTo };\n\n  // Build condition config with only non-empty values\n  let conditionConfig = {};\n\n  if (condition) {\n    const { amount, quantity, ...restCondition } = condition;\n\n    const newCondition = { ...restCondition };\n\n    // Only include amount if it has a valid value\n    if (hasValue(amount?.value)) {\n      newCondition.amount = amount;\n    }\n\n    // Only include quantity if it has a valid value\n    if (hasValue(quantity)) {\n      newCondition.quantity = quantity;\n    }\n\n    conditionConfig = newCondition;\n  }\n\n  // Convert to snake_case for API\n  const result = toSnakeCase({\n    ...restAll,\n    ...roleConfig,\n    condition: conditionConfig,\n  });\n\n  return result;\n}\n","/*******************************************************************\n * ADOBE CONFIDENTIAL\n * __________________\n *\n *  Copyright 2025 Adobe\n *  All Rights Reserved.\n *\n * NOTICE:  All information contained herein is, and remains\n * the property of Adobe and its suppliers, if any. The intellectual\n * and technical concepts contained herein are proprietary to Adobe\n * and its suppliers and are protected by all applicable intellectual\n * property laws, including trade secret and copyright laws.\n * Dissemination of this information or reproduction of this material\n * is strictly forbidden unless prior written permission is obtained\n * from Adobe.\n *******************************************************************/\n\nimport { useCallback, useEffect, useMemo, useReducer } from 'preact/hooks';\nimport {\n  FormAction,\n  FormState,\n  UseApprovalRuleFormProps,\n  UseApprovalRuleFormReturn,\n} from '@/b2b-purchase-order/types/hooks';\n\nimport {\n  currencyInfo,\n  getPurchaseOrderApprovalRule,\n  createPurchaseOrderApprovalRule,\n  updatePurchaseOrderApprovalRule,\n  getPurchaseOrderApprovalRuleMetadata,\n} from '@/b2b-purchase-order/api';\nimport {\n  updateFormFieldValue,\n  validateFormFields,\n  updateValidationErrors,\n  transformToFormValues,\n  cleanAndDeep,\n} from '@/b2b-purchase-order/lib';\nimport {\n  INITIAL_FORM_STATE,\n  REQUIRED_FIELDS_ON_SUBMIT,\n  VALIDATION_ERROR_KEYS,\n  createRuleTypeOptions,\n  createConditionOperators,\n  createAppliesToOptions,\n} from '@/b2b-purchase-order/configs';\n\n// Reducer function - handles all state updates in one place\nfunction formReducer(state: FormState, action: FormAction): FormState {\n  switch (action.type) {\n    case 'SET_LOADING':\n      return { ...state, isLoading: action.payload };\n\n    case 'SET_SUBMIT_ERROR':\n      return { ...state, submitError: action.payload };\n\n    case 'SET_FORM_VALUES':\n      return { ...state, formValues: action.payload };\n\n    case 'SET_AVAILABLE_APPLIES_TO':\n      return { ...state, availableAppliesTo: action.payload };\n\n    case 'SET_AVAILABLE_APPROVERS':\n      return { ...state, availableRequiresApprovalFrom: action.payload };\n\n    case 'SET_ERRORS':\n      return { ...state, errors: action.payload };\n\n    case 'SET_TOUCHED':\n      return { ...state, touched: action.payload };\n\n    case 'SET_CURRENCIES':\n      return { ...state, currencyCodesList: action.payload };\n\n    case 'UPDATE_FIELD': {\n      const { key, value } = action.payload;\n      const newFormValues = updateFormFieldValue(state.formValues, key, value);\n\n      // Build new touched state\n      const newTouched = { ...state.touched, [key]: true };\n\n      // Special case: when roleType changes to specific_roles, mark appliesTo as touched\n      if (key === 'roleType' && value === 'specific_roles') {\n        newTouched.appliesTo = true;\n      }\n\n      // Validate and get updated errors\n      const allErrors = validateFormFields(newFormValues);\n      const newErrors = updateValidationErrors(\n        allErrors,\n        state.errors,\n        newTouched\n      );\n\n      return {\n        ...state,\n        formValues: newFormValues,\n        touched: newTouched,\n        errors: newErrors,\n      };\n    }\n\n    case 'TOUCH_FIELD': {\n      const fieldName = action.payload;\n      const newTouched = { ...state.touched, [fieldName]: true };\n\n      // Validate and update errors for touched field\n      const allErrors = validateFormFields(state.formValues);\n      const newErrors = updateValidationErrors(\n        allErrors,\n        state.errors,\n        newTouched\n      );\n\n      return {\n        ...state,\n        touched: newTouched,\n        errors: newErrors,\n      };\n    }\n\n    case 'MARK_FIELDS_TOUCHED': {\n      const newTouched = { ...state.touched, ...action.payload };\n      const allErrors = validateFormFields(state.formValues);\n      const newErrors = updateValidationErrors(\n        allErrors,\n        state.errors,\n        newTouched\n      );\n\n      return {\n        ...state,\n        touched: newTouched,\n        errors: newErrors,\n      };\n    }\n\n    default:\n      return state;\n  }\n}\n\nexport const useApprovalRuleForm = ({\n  t,\n  approvalRuleID,\n  routeApprovalRulesList,\n  onSubmit,\n  onChange,\n  permissions,\n  loadingPermissions,\n}: UseApprovalRuleFormProps): UseApprovalRuleFormReturn => {\n  const [state, dispatch] = useReducer(formReducer, INITIAL_FORM_STATE);\n\n  // Memoize options to prevent re-creation on each render\n  const ruleTypeOptions = useMemo(() => createRuleTypeOptions(t), [t]);\n  const conditionOperators = useMemo(() => createConditionOperators(t), [t]);\n  const appliesToOptions = useMemo(() => createAppliesToOptions(t), [t]);\n\n  // Load initial data (currencies and approval rule metadata)\n  useEffect(() => {\n    dispatch({ type: 'SET_LOADING', payload: true });\n\n    // Load currency codes\n    currencyInfo()\n      .then((data) => {\n        dispatch({\n          type: 'SET_CURRENCIES',\n          payload: data.availableCurrencyCodes,\n        });\n      })\n      .catch((error) => {\n        console.error('Failed to fetch currencies:', error);\n      });\n\n    // Load metadata (available roles) first - always needed\n    getPurchaseOrderApprovalRuleMetadata()\n      .then((data) => {\n        const { availableAppliesTo, availableRequiresApprovalFrom } = data;\n        dispatch({\n          type: 'SET_AVAILABLE_APPLIES_TO',\n          payload: availableAppliesTo,\n        });\n        dispatch({\n          type: 'SET_AVAILABLE_APPROVERS',\n          payload: availableRequiresApprovalFrom,\n        });\n\n        // Then load approval rule data if in edit mode\n        if (approvalRuleID) {\n          return getPurchaseOrderApprovalRule(approvalRuleID);\n        }\n        return null;\n      })\n      .then((ruleData) => {\n        if (ruleData) {\n          // Edit mode: set form values from existing rule\n          dispatch({\n            type: 'SET_FORM_VALUES',\n            payload: transformToFormValues(ruleData),\n          });\n        }\n        dispatch({ type: 'SET_SUBMIT_ERROR', payload: null });\n      })\n      .catch((error) => {\n        console.error('Failed to fetch data:', error);\n        dispatch({\n          type: 'SET_SUBMIT_ERROR',\n          payload: error?.message || VALIDATION_ERROR_KEYS.FAILED_TO_LOAD,\n        });\n      })\n      .finally(() => {\n        dispatch({ type: 'SET_LOADING', payload: false });\n      });\n  }, [approvalRuleID]);\n\n  // Handler for field value changes\n  const handleSetFormValues = useCallback(\n    (key: string, value: string | number | boolean | string[]) => {\n      dispatch({ type: 'UPDATE_FIELD', payload: { key, value } });\n      if (onChange) {\n        onChange({ ...state.formValues, [key]: value });\n      }\n    },\n    [onChange, state.formValues]\n  );\n\n  // Handler for field touch (blur)\n  const handleFieldTouch = useCallback(\n    (fieldName: string) => {\n      dispatch({ type: 'TOUCH_FIELD', payload: fieldName });\n      if (onChange) {\n        onChange(state.formValues);\n      }\n    },\n    [onChange, state.formValues]\n  );\n\n  // Handler for form submission\n  const handleSubmit = useCallback(async () => {\n    dispatch({ type: 'SET_LOADING', payload: true });\n    dispatch({ type: 'SET_SUBMIT_ERROR', payload: null });\n\n    // Mark all required fields as touched to show all errors\n    dispatch({\n      type: 'MARK_FIELDS_TOUCHED',\n      payload: REQUIRED_FIELDS_ON_SUBMIT,\n    });\n\n    // Validate form\n    const validationErrors = validateFormFields(state.formValues);\n\n    if (Object.keys(validationErrors).length > 0) {\n      dispatch({ type: 'SET_ERRORS', payload: validationErrors });\n      dispatch({ type: 'SET_LOADING', payload: false });\n      return;\n    }\n\n    // Clean and prepare data for API\n    const cleanedData = cleanAndDeep(state.formValues);\n\n    // Submit to API (create or update based on approvalRuleID)\n    try {\n      let data;\n\n      if (approvalRuleID) {\n        // Update existing approval rule\n        data = await updatePurchaseOrderApprovalRule({\n          uid: approvalRuleID,\n          ...cleanedData,\n        });\n      } else {\n        // Create new approval rule\n        data = await createPurchaseOrderApprovalRule(cleanedData);\n      }\n\n      if (!data.uid) {\n        dispatch({\n          type: 'SET_SUBMIT_ERROR',\n          payload: VALIDATION_ERROR_KEYS.FAILED_TO_CREATE,\n        });\n        dispatch({ type: 'SET_LOADING', payload: false });\n        return;\n      }\n\n      // Success - call onSubmit callback if provided\n      if (onSubmit) {\n        onSubmit(state.formValues as any);\n      }\n\n      if (routeApprovalRulesList) {\n        window.location.href = routeApprovalRulesList();\n      } else {\n        dispatch({ type: 'SET_LOADING', payload: false });\n      }\n    } catch (error: any) {\n      console.error('Failed to save approval rule:', error);\n      dispatch({\n        type: 'SET_SUBMIT_ERROR',\n        payload: error?.message || VALIDATION_ERROR_KEYS.FAILED_TO_CREATE,\n      });\n      dispatch({ type: 'SET_LOADING', payload: false });\n    }\n  }, [state.formValues, routeApprovalRulesList, approvalRuleID, onSubmit]);\n\n  // Memoized: true if form is loading or permissions not loaded or missing required permission\n  const formLoading = useMemo(() => {\n    if (state.isLoading || loadingPermissions) return true;\n\n    if (\n      !permissions?.permissions.viewApprovalRules &&\n      !permissions?.permissions.manageApprovalRules\n    ) {\n      return true;\n    }\n\n    return false;\n  }, [state.isLoading, loadingPermissions, permissions]);\n\n  return {\n    availableAppliesTo: state.availableAppliesTo,\n    availableRequiresApprovalFrom: state.availableRequiresApprovalFrom,\n    formValues: state.formValues,\n    ruleTypeOptions,\n    conditionOperators,\n    currencies: state.currencyCodesList,\n    appliesToOptions,\n    handleSetFormValues,\n    handleSubmit,\n    handleFieldTouch,\n    errors: state.errors,\n    touched: state.touched,\n    isLoading: state.isLoading,\n    formLoading,\n    submitError: state.submitError,\n  };\n};\n","/*******************************************************************\n * ADOBE CONFIDENTIAL\n * __________________\n *\n *  Copyright 2025 Adobe\n *  All Rights Reserved.\n *\n * NOTICE:  All information contained herein is, and remains\n * the property of Adobe and its suppliers, if any. The intellectual\n * and technical concepts contained herein are proprietary to Adobe\n * and its suppliers and are protected by all applicable intellectual\n * property laws, including trade secret and copyright laws.\n * Dissemination of this information or reproduction of this material\n * is strictly forbidden unless prior written permission is obtained\n * from Adobe.\n *******************************************************************/\n\nimport { Text } from '@adobe-commerce/elsie/i18n';\nimport { FunctionComponent } from 'preact';\n\nconst ErrorMessage: FunctionComponent<{\n  touched?: boolean;\n  error?: string;\n  className?: string;\n}> = ({ touched = false, error, className = 'error-message' }) => {\n  if (!touched || !error) {\n    return null;\n  }\n\n  return (\n    <span className={className}>\n      <Text id={error} />\n    </span>\n  );\n};\n\nexport default ErrorMessage;\n","/********************************************************************\n * ADOBE CONFIDENTIAL\n * __________________\n *\n *  Copyright 2025 Adobe\n *  All Rights Reserved.\n *\n * NOTICE:  All information contained herein is, and remains\n * the property of Adobe and its suppliers, if any. The intellectual\n * and technical concepts contained herein are proprietary to Adobe\n * and its suppliers and are protected by all applicable intellectual\n * property laws, including trade secret and copyright laws.\n * Dissemination of this information or reproduction of this material\n * is strictly forbidden unless prior written permission is obtained\n * from Adobe.\n *******************************************************************/\n\nimport {\n  Input,\n  Picker,\n  TextArea,\n  RadioButton,\n  Checkbox,\n  MultiSelect,\n  Button,\n} from '@adobe-commerce/elsie/components';\nimport { ErrorMessage } from '@/b2b-purchase-order/components/ApprovalRuleForm/blocks';\nimport { CustomerRolePermissionsModel } from '@/b2b-purchase-order/data/models';\nimport { classes } from '@adobe-commerce/elsie/lib';\n\nconst Form = ({\n  availableRequiresApprovalFrom,\n  conditionOperators,\n  availableAppliesTo,\n  appliesToOptions,\n  ruleTypeOptions,\n  currencies,\n  formValues,\n  errors,\n  touched,\n  isLoading,\n  permissions,\n  handleSubmit,\n  handleFieldTouch,\n  handleSetFormValues,\n  routeApprovalRulesList,\n  t,\n}: {\n  availableRequiresApprovalFrom: { id: string; name: string }[];\n  conditionOperators: { value: string; text: string }[];\n  availableAppliesTo: { id: string; name: string }[];\n  appliesToOptions: { value: string; text: string }[];\n  ruleTypeOptions: { value: string; text: string }[];\n  currencies: { value: string; text: string }[];\n  formValues: any;\n  errors: Record<string, string>;\n  touched: Record<string, boolean>;\n  isLoading: boolean;\n  permissions?: CustomerRolePermissionsModel;\n  handleSubmit: () => void;\n  handleFieldTouch: (field: string) => void;\n  handleSetFormValues: (field: string, value: any) => void;\n  routeApprovalRulesList?: () => string;\n  t: Record<string, string>;\n}) => {\n  const disabledInputField =\n    isLoading || !permissions?.permissions?.viewApprovalRules;\n\n  return (\n    <form data-testid=\"approval-rule-form\">\n      <Checkbox\n        data-testid=\"status-toggle\"\n        className=\"b2b-purchase-order-approval-rule-form__toggle\"\n        disabled={disabledInputField}\n        name=\"status\"\n        label={t.formEnabled}\n        checked={formValues.status === 'ENABLED'}\n        onChange={(event) => {\n          const value = (event.target as HTMLInputElement).checked;\n\n          handleSetFormValues('status', value);\n        }}\n      />\n      <div data-testid=\"name-input-container\">\n        <Input\n          data-testid=\"name-input\"\n          className=\"b2b-purchase-order-approval-rule-form__name-input\"\n          disabled={disabledInputField}\n          name={'name'}\n          floatingLabel={t.inputRuleNameFloatingLabel}\n          placeholder={t.inputRuleNamePlaceholder}\n          value={formValues.name}\n          error={!!(touched.name && errors.name)}\n          onChange={(event: Event) => {\n            const value = (event.target as HTMLInputElement).value;\n\n            handleSetFormValues('name', value);\n          }}\n          onBlur={() => handleFieldTouch('name')}\n        />\n        <ErrorMessage touched={touched.name} error={errors.name} />\n      </div>\n      <TextArea\n        data-testid=\"description-textarea\"\n        className=\"b2b-purchase-order-approval-rule-form__description\"\n        disabled={disabledInputField}\n        name=\"description\"\n        label={t.textAreaDescriptionLabel}\n        value={formValues.description}\n        onChange={(event) => {\n          const value = (event.target as HTMLTextAreaElement).value;\n          handleSetFormValues('description', value);\n        }}\n      />\n      <div\n        data-testid=\"applies-to-section\"\n        className=\"b2b-purchase-order-approval-rule-form__applies-to\"\n      >\n        <span className=\"b2b-purchase-order-approval-rule-form__applies-to-title\">\n          {t.titleAppliesTo}\n        </span>\n        {appliesToOptions.map((option, index) => {\n          return (\n            <RadioButton\n              key={option.value}\n              data-testid={`applies-to-radio-${index}`}\n              disabled={disabledInputField}\n              name=\"radio-group\"\n              value={option.value}\n              label={option.text}\n              checked={formValues.roleType === option.value}\n              onChange={(event) => {\n                const value = (event.target as HTMLInputElement).value;\n                handleSetFormValues('roleType', value);\n              }}\n            />\n          );\n        })}\n        {formValues.roleType === 'specific_roles' ? (\n          <div\n            data-testid=\"applies-to-multiselect-container\"\n            className=\"b2b-purchase-order-approval-rule-form__applies-to-multiselect\"\n          >\n            <MultiSelect\n              data-testid=\"applies-to-multiselect\"\n              disabled={disabledInputField}\n              name=\"appliesTo\"\n              value={[...formValues.appliesTo]}\n              options={availableAppliesTo.map((option) => ({\n                value: option.id,\n                label: option.name,\n              }))}\n              error={!!(touched.appliesTo && errors.appliesTo)}\n              onChange={(value) => {\n                handleSetFormValues('appliesTo', value as string[]);\n                if (!touched.appliesTo) handleFieldTouch('appliesTo');\n              }}\n            />\n            <ErrorMessage\n              touched={touched.appliesTo}\n              error={errors.appliesTo}\n            />\n          </div>\n        ) : null}\n      </div>\n      <div\n        data-testid=\"rule-type-section\"\n        className=\"b2b-purchase-order-approval-rule-form__rule-type\"\n      >\n        <span className=\"b2b-purchase-order-approval-rule-form__rule-type-title\">\n          {t.titleRuleType}\n        </span>\n        <Picker\n          data-testid=\"rule-type-picker\"\n          className=\"b2b-purchase-order-approval-rule-form__rule-type-picker\"\n          disabled={disabledInputField}\n          name=\"ruleType\"\n          value={formValues.condition.attribute}\n          options={ruleTypeOptions}\n          handleSelect={(event) => {\n            const value = (event.target as HTMLSelectElement).value;\n            handleSetFormValues('ruleType', value);\n          }}\n        />\n      </div>\n      <div\n        data-testid=\"rule-condition-section\"\n        className=\"b2b-purchase-order-approval-rule-form__rule-condition\"\n      >\n        <span className=\"b2b-purchase-order-approval-rule-form__rule-condition-title\">\n          {\n            ruleTypeOptions.find(\n              (item) => item.value === formValues.condition.attribute\n            )?.text\n          }\n        </span>\n        <div\n          className={classes([\n            'b2b-purchase-order-approval-rule-form__rule-condition-container',\n            [\n              'b2b-purchase-order-approval-rule-form__rule-condition-container--error',\n              !!errors.ruleValue && touched.ruleValue,\n            ],\n          ])}\n        >\n          <Picker\n            data-testid=\"rule-condition-picker\"\n            className=\"b2b-purchase-order-approval-rule-form__rule-condition-picker\"\n            disabled={disabledInputField}\n            name=\"ruleCondition\"\n            value={formValues.condition.operator}\n            options={conditionOperators}\n            handleSelect={(event) => {\n              const value = (event.target as HTMLSelectElement).value;\n              handleSetFormValues('ruleCondition', value);\n            }}\n          />\n          <div data-testid=\"rule-value-container\">\n            <Input\n              data-testid=\"rule-value-input\"\n              className=\"b2b-purchase-order-approval-rule-form__rule-value-input\"\n              disabled={disabledInputField}\n              name=\"ruleValue\"\n              floatingLabel={\n                formValues.condition.attribute === 'NUMBER_OF_SKUS'\n                  ? t.inputQuantityFloatingLabel\n                  : t.inputAmountFloatingLabel\n              }\n              placeholder={\n                formValues.condition.attribute === 'NUMBER_OF_SKUS'\n                  ? t.inputQuantityPlaceholder\n                  : t.inputAmountPlaceholder\n              }\n              value={\n                formValues.condition.attribute === 'NUMBER_OF_SKUS'\n                  ? formValues.condition.quantity\n                  : formValues.condition.amount.value\n              }\n              error={!!(touched.ruleValue && errors.ruleValue)}\n              onChange={(event) => {\n                const value = (event.target as HTMLInputElement).value;\n                handleSetFormValues('ruleValue', value);\n              }}\n              onBlur={() => handleFieldTouch('ruleValue')}\n            />\n            <ErrorMessage\n              touched={touched.ruleValue}\n              error={errors.ruleValue}\n            />\n          </div>\n          {formValues.condition.attribute !== 'NUMBER_OF_SKUS' ? (\n            <Picker\n              data-testid=\"rule-condition-currency-picker\"\n              className=\"b2b-purchase-order-approval-rule-form__rule-condition-currency-picker\"\n              disabled={disabledInputField}\n              name=\"ruleConditionCurrency\"\n              value={formValues.condition.amount.currency}\n              options={currencies}\n              handleSelect={(event) => {\n                const value = (event.target as HTMLSelectElement).value;\n                handleSetFormValues('ruleConditionCurrency', value);\n              }}\n            />\n          ) : null}\n        </div>\n      </div>\n      <div\n        data-testid=\"approval-role-section\"\n        className=\"b2b-purchase-order-approval-rule-form__approval-role\"\n      >\n        <span className=\"b2b-purchase-order-approval-rule-form__approval-role-title\">\n          {t.titleRequiresApprovalRole}\n        </span>\n        <div className=\"b2b-purchase-order-approval-rule-form__approval-role-multiselect\">\n          <MultiSelect\n            data-testid=\"approvers-multiselect\"\n            disabled={disabledInputField}\n            name=\"approvers\"\n            value={[...formValues.approvers]}\n            options={availableRequiresApprovalFrom.map((option) => ({\n              value: option.id,\n              label: option.name,\n            }))}\n            error={!!(touched.approvers && errors.approvers)}\n            onChange={(value) => {\n              handleSetFormValues('approvers', value as string[]);\n              if (!touched.approvers) handleFieldTouch('approvers');\n            }}\n          />\n          <ErrorMessage touched={touched.approvers} error={errors.approvers} />\n        </div>\n      </div>\n      <div\n        data-testid=\"form-buttons\"\n        className=\"b2b-purchase-order-approval-rule-form__buttons\"\n      >\n        <Button\n          data-testid=\"save-button\"\n          type=\"button\"\n          disabled={disabledInputField}\n          onClick={handleSubmit}\n        >\n          {t.buttonSave}\n        </Button>\n\n        <Button\n          data-testid=\"cancel-button\"\n          disabled={isLoading}\n          variant=\"secondary\"\n          type=\"button\"\n          onClick={() => {\n            window.location.href = routeApprovalRulesList?.() ?? '';\n          }}\n        >\n          {t.buttonCancel}\n        </Button>\n      </div>\n    </form>\n  );\n};\n\nexport default Form;\n","/*******************************************************************\n * ADOBE CONFIDENTIAL\n * __________________\n *\n *  Copyright 2025 Adobe\n *  All Rights Reserved.\n *\n * NOTICE:  All information contained herein is, and remains\n * the property of Adobe and its suppliers, if any. The intellectual\n * and technical concepts contained herein are proprietary to Adobe\n * and its suppliers and are protected by all applicable intellectual\n * property laws, including trade secret and copyright laws.\n * Dissemination of this information or reproduction of this material\n * is strictly forbidden unless prior written permission is obtained\n * from Adobe.\n *******************************************************************/\n\nimport { FunctionComponent } from 'preact';\nimport { classes } from '@adobe-commerce/elsie/lib';\nimport { Card, InLineAlert } from '@adobe-commerce/elsie/components';\nimport {\n  useApprovalRuleForm,\n  useCustomerRolePermissions,\n} from '@/b2b-purchase-order/hooks';\nimport { ApprovalRuleFormProps } from '@/b2b-purchase-order/types/components';\nimport { useText } from '@adobe-commerce/elsie/i18n';\nimport { Form } from '@/b2b-purchase-order/components/ApprovalRuleForm/blocks';\nimport '@/b2b-purchase-order/components/ApprovalRuleForm/ApprovalRuleForm.css';\nimport {\n  PurchaseOrdersHeader,\n  FormLoader,\n} from '@/b2b-purchase-order/components';\n\nexport const ApprovalRuleForm: FunctionComponent<ApprovalRuleFormProps> = ({\n  className,\n  approvalRuleID,\n  withHeader,\n  withWrapper,\n  routeApprovalRulesList,\n  onSubmit,\n  onChange,\n}) => {\n  const t = useText({\n    headerText: 'PurchaseOrders.approvalRuleForm.headerText',\n    titleAppliesTo: 'PurchaseOrders.approvalRuleForm.titleAppliesTo',\n    titleRuleType: 'PurchaseOrders.approvalRuleForm.titleRuleType',\n    titleRequiresApprovalRole:\n      'PurchaseOrders.approvalRuleForm.titleRequiresApprovalRole',\n    formEnabled: 'PurchaseOrders.approvalRuleForm.fields.enabled',\n    formDisabled: 'PurchaseOrders.approvalRuleForm.fields.disabled',\n    inputRuleNameFloatingLabel:\n      'PurchaseOrders.approvalRuleForm.fields.inputRuleName.floatingLabel',\n    inputRuleNamePlaceholder:\n      'PurchaseOrders.approvalRuleForm.fields.inputRuleName.placeholder',\n    textAreaDescriptionLabel:\n      'PurchaseOrders.approvalRuleForm.fields.textAreaDescription.label',\n    appliesToAllUsers:\n      'PurchaseOrders.approvalRuleForm.fields.appliesTo.allUsers',\n    appliesToSpecificRoles:\n      'PurchaseOrders.approvalRuleForm.fields.appliesTo.specificRoles',\n    ruleTypeGrandTotal:\n      'PurchaseOrders.approvalRuleForm.fields.ruleTypeOptions.grandTotal',\n    ruleTypeShippingInclTax:\n      'PurchaseOrders.approvalRuleForm.fields.ruleTypeOptions.shippingInclTax',\n    ruleTypeNumberOfSkus:\n      'PurchaseOrders.approvalRuleForm.fields.ruleTypeOptions.numberOfSkus',\n    conditionOperatorMoreThan:\n      'PurchaseOrders.approvalRuleForm.fields.conditionOperators.moreThan',\n    conditionOperatorLessThan:\n      'PurchaseOrders.approvalRuleForm.fields.conditionOperators.lessThan',\n    conditionOperatorMoreThanOrEqualTo:\n      'PurchaseOrders.approvalRuleForm.fields.conditionOperators.moreThanOrEqualTo',\n    conditionOperatorLessThanOrEqualTo:\n      'PurchaseOrders.approvalRuleForm.fields.conditionOperators.lessThanOrEqualTo',\n    inputQuantityFloatingLabel:\n      'PurchaseOrders.approvalRuleForm.fields.inputQuantity.floatingLabel',\n    inputQuantityPlaceholder:\n      'PurchaseOrders.approvalRuleForm.fields.inputQuantity.placeholder',\n    inputAmountFloatingLabel:\n      'PurchaseOrders.approvalRuleForm.fields.inputAmount.floatingLabel',\n    inputAmountPlaceholder:\n      'PurchaseOrders.approvalRuleForm.fields.inputAmount.placeholder',\n    buttonCancel: 'PurchaseOrders.approvalRuleForm.fields.buttons.cancel',\n    buttonSave: 'PurchaseOrders.approvalRuleForm.fields.buttons.save',\n  });\n  const { permissions, loadingPermissions } = useCustomerRolePermissions();\n  const {\n    availableRequiresApprovalFrom,\n    conditionOperators,\n    availableAppliesTo,\n    appliesToOptions,\n    ruleTypeOptions,\n    currencies,\n    formValues,\n    errors,\n    touched,\n    isLoading,\n    submitError,\n    formLoading,\n    handleSubmit,\n    handleFieldTouch,\n    handleSetFormValues,\n  } = useApprovalRuleForm({\n    t,\n    approvalRuleID,\n    loadingPermissions,\n    permissions,\n    routeApprovalRulesList,\n    onSubmit,\n    onChange,\n  });\n\n  if (formLoading) {\n    return (\n      <FormLoader\n        testId=\"b2b-purchase-order-approval-rule-form\"\n        className={classes([\n          'b2b-purchase-order-approval-rule-form',\n          className,\n        ])}\n      />\n    );\n  }\n\n  const renderContentForm = (\n    <>\n      {!!submitError && <InLineAlert heading=\"\" description={submitError} />}\n      <Form\n        availableRequiresApprovalFrom={availableRequiresApprovalFrom}\n        conditionOperators={conditionOperators}\n        availableAppliesTo={availableAppliesTo}\n        appliesToOptions={appliesToOptions}\n        ruleTypeOptions={ruleTypeOptions}\n        currencies={currencies}\n        formValues={formValues}\n        errors={errors}\n        touched={touched}\n        isLoading={isLoading}\n        handleSubmit={handleSubmit}\n        handleFieldTouch={handleFieldTouch}\n        handleSetFormValues={handleSetFormValues}\n        permissions={permissions}\n        routeApprovalRulesList={routeApprovalRulesList}\n        t={t}\n      />\n    </>\n  );\n\n  return (\n    <div\n      data-testid=\"b2b-purchase-order-approval-rule-form\"\n      className={classes(['b2b-purchase-order-approval-rule-form', className])}\n    >\n      {withHeader ? <PurchaseOrdersHeader headerText={t.headerText} /> : null}\n      {withWrapper ? (\n        <Card variant=\"secondary\">{renderContentForm}</Card>\n      ) : (\n        renderContentForm\n      )}\n    </div>\n  );\n};\n","/********************************************************************\n * ADOBE CONFIDENTIAL\n * __________________\n *\n *  Copyright 2025 Adobe\n *  All Rights Reserved.\n *\n * NOTICE:  All information contained herein is, and remains\n * the property of Adobe and its suppliers, if any. The intellectual\n * and technical concepts contained herein are proprietary to Adobe\n * and its suppliers and are protected by all applicable intellectual\n * property laws, including trade secret and copyright laws.\n * Dissemination of this information or reproduction of this material\n * is strictly forbidden unless prior written permission is obtained\n * from Adobe.\n *******************************************************************/\n\nimport { classes, Container } from '@adobe-commerce/elsie/lib';\nimport { ApprovalRuleFormProps } from '@/b2b-purchase-order/types/containers';\nimport { ApprovalRuleForm as ApprovalRuleFormComponent } from '@/b2b-purchase-order/components';\n\nexport const ApprovalRuleForm: Container<ApprovalRuleFormProps> = ({\n  withHeader = true,\n  withWrapper = true,\n  className,\n  approvalRuleID,\n  routeApprovalRulesList,\n  onSubmit,\n  onChange,\n}) => {\n  return (\n    <div\n      data-testid=\"b2b-purchase-order-approval-rule-form-container\"\n      className={classes([\n        'b2b-purchase-order-approval-rule-form-container',\n        className,\n      ])}\n    >\n      <ApprovalRuleFormComponent\n        withWrapper={withWrapper}\n        withHeader={withHeader}\n        approvalRuleID={approvalRuleID}\n        routeApprovalRulesList={routeApprovalRulesList}\n        onSubmit={onSubmit}\n        onChange={onChange}\n      />\n    </div>\n  );\n};\n"],"names":["updateFormFieldValue","formValues","key","value","newFormValues","numericValue","validateFormFields","values","errors","updateValidationErrors","newErrors","currentErrors","touchedFields","updatedErrors","errorKey","RULE_TYPE_OPTIONS_KEYS","CONDITION_OPERATORS_KEYS","APPLIES_TO_OPTIONS_KEYS","INITIAL_FORM_VALUES","INITIAL_FORM_STATE","REQUIRED_FIELDS_ON_SUBMIT","VALIDATION_ERROR_KEYS","createRuleTypeOptions","t","createConditionOperators","createAppliesToOptions","DEFAULT_STATUS","DEFAULT_ATTRIBUTE","DEFAULT_OPERATOR","DEFAULT_CURRENCY","DEFAULT_QUANTITY","DEFAULT_AMOUNT_VALUE","isValidAttribute","attribute","isValidOperator","operator","transformToFormValues","data","_a","_b","role","_c","_e","_d","_g","_f","_h","_i","_j","hasValue","cleanAndDeep","roleType","appliesTo","condition","restAll","roleConfig","conditionConfig","amount","quantity","restCondition","newCondition","toSnakeCase","formReducer","state","action","newTouched","allErrors","fieldName","useApprovalRuleForm","approvalRuleID","routeApprovalRulesList","onSubmit","onChange","permissions","loadingPermissions","dispatch","useReducer","ruleTypeOptions","useMemo","conditionOperators","appliesToOptions","useEffect","currencyInfo","error","getPurchaseOrderApprovalRuleMetadata","availableAppliesTo","availableRequiresApprovalFrom","getPurchaseOrderApprovalRule","ruleData","handleSetFormValues","useCallback","handleFieldTouch","handleSubmit","validationErrors","cleanedData","updatePurchaseOrderApprovalRule","createPurchaseOrderApprovalRule","formLoading","ErrorMessage","touched","className","Text","Form","currencies","isLoading","disabledInputField","jsxs","jsx","Checkbox","event","Input","TextArea","option","index","RadioButton","MultiSelect","Picker","item","classes","Button","ApprovalRuleForm","withHeader","withWrapper","useText","useCustomerRolePermissions","submitError","FormLoader","renderContentForm","Fragment","InLineAlert","PurchaseOrdersHeader","Card","ApprovalRuleFormComponent"],"mappings":"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"}