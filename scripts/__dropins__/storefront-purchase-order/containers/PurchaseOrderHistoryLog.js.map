{"version":3,"file":"PurchaseOrderHistoryLog.js","sources":["/@dropins/storefront-purchase-order/src/components/PurchaseOrderHistoryLogContent/PurchaseOrderHistoryLogContent.tsx","/@dropins/storefront-purchase-order/src/containers/PurchaseOrderHistoryLog/PurchaseOrderHistoryLog.tsx"],"sourcesContent":["/********************************************************************\n * ADOBE CONFIDENTIAL\n * __________________\n *\n *  Copyright 2025 Adobe\n *  All Rights Reserved.\n *\n * NOTICE:  All information contained herein is, and remains\n * the property of Adobe and its suppliers, if any. The intellectual\n * and technical concepts contained herein are proprietary to Adobe\n * and its suppliers and are protected by all applicable intellectual\n * property laws, including trade secret and copyright laws.\n * Dissemination of this information or reproduction of this material\n * is strictly forbidden unless prior written permission is obtained\n * from Adobe.\n *******************************************************************/\n\nimport { Fragment, FunctionComponent } from 'preact';\nimport '@/b2b-purchase-order/components/PurchaseOrderHistoryLogContent/PurchaseOrderHistoryLogContent.css';\nimport { PurchaseOrderHistoryLogContentProps } from '@/b2b-purchase-order/types/components';\nimport { Text, useText } from '@adobe-commerce/elsie/i18n';\nimport { formatDate } from '@/b2b-purchase-order/lib/formatDate';\nimport { Button } from '@adobe-commerce/elsie/components';\nimport { useState } from 'preact/hooks';\n\nexport const PurchaseOrderHistoryLogContent: FunctionComponent<\n  PurchaseOrderHistoryLogContentProps\n> = ({ historyLogRecords = [], visibleRecordsLimit }) => {\n  const [visibleRecordsCount, setVisibleRecordsCount] =\n    useState<number>(visibleRecordsLimit);\n  const showMore = historyLogRecords.length > visibleRecordsCount;\n  const buttonIsHidden = historyLogRecords.length <= visibleRecordsLimit;\n\n  const t = useText({\n    showMoreLabel: 'PurchaseOrders.historyLog.ariaLabel.showMore',\n    showLessLabel: 'PurchaseOrders.historyLog.ariaLabel.showLess',\n  });\n\n  if (!historyLogRecords.length) {\n    return (\n      <div className={'b2b-purchase-order-history-log-content'}>\n        <Text id=\"PurchaseOrders.historyLog.emptyText\" />\n      </div>\n    );\n  }\n\n  return (\n    <div className={'b2b-purchase-order-history-log-content'}>\n      <ul\n        className={'b2b-purchase-order-history-log-content__list'}\n        role=\"list\"\n      >\n        {historyLogRecords.slice(0, visibleRecordsCount).map((item, index) => {\n          const slicedLength = Math.min(\n            visibleRecordsCount,\n            historyLogRecords.length\n          );\n          return (\n            <Fragment key={item.uid}>\n              <li className={'b2b-purchase-order-history-log-content__item'}>\n                <div\n                  className={'b2b-purchase-order-history-log-content__title'}\n                >\n                  <Text\n                    id={`PurchaseOrders.historyLog.status.${item.activity}`}\n                    fields={{ date: formatDate(item.createdAt) }}\n                  />\n                </div>\n                <div\n                  className={\n                    'b2b-purchase-order-history-log-content__description'\n                  }\n                >\n                  {item.message}\n                </div>\n              </li>\n              {index < slicedLength - 1 && (\n                <hr\n                  className={'b2b-purchase-order-history-log-content__divider'}\n                />\n              )}\n            </Fragment>\n          );\n        })}\n      </ul>\n      {!buttonIsHidden && (\n        <div className={'b2b-purchase-order-history-log-content__actions'}>\n          <Button\n            variant=\"secondary\"\n            aria-expanded={!showMore}\n            aria-label={showMore ? t.showMoreLabel : t.showLessLabel}\n            onClick={() => {\n              setVisibleRecordsCount(\n                showMore ? historyLogRecords.length : visibleRecordsLimit\n              );\n            }}\n          >\n            <Text\n              id={`PurchaseOrders.historyLog.buttons.${\n                showMore ? 'viewMore' : 'viewLess'\n              }`}\n            />\n          </Button>\n        </div>\n      )}\n    </div>\n  );\n};\n","/********************************************************************\n * ADOBE CONFIDENTIAL\n * __________________\n *\n *  Copyright 2025 Adobe\n *  All Rights Reserved.\n *\n * NOTICE:  All information contained herein is, and remains\n * the property of Adobe and its suppliers, if any. The intellectual\n * and technical concepts contained herein are proprietary to Adobe\n * and its suppliers and are protected by all applicable intellectual\n * property laws, including trade secret and copyright laws.\n * Dissemination of this information or reproduction of this material\n * is strictly forbidden unless prior written permission is obtained\n * from Adobe.\n *******************************************************************/\n\nimport { classes, Container } from '@adobe-commerce/elsie/lib';\nimport {\n  PurchaseOrderHistoryLogContent,\n  PurchaseOrdersHeader,\n} from '@/b2b-purchase-order/components';\nimport { PurchaseOrderHistoryLogProps } from '@/b2b-purchase-order/types/containers';\nimport { Card, Skeleton, SkeletonRow } from '@adobe-commerce/elsie/components';\nimport { useText } from '@adobe-commerce/elsie/i18n';\nimport { usePurchaseOrderData } from '@/b2b-purchase-order/hooks';\n\nexport const PurchaseOrderHistoryLog: Container<\n  PurchaseOrderHistoryLogProps\n> = ({\n  withHeader = true,\n  withWrapper = true,\n  visibleRecordsLimit = 5,\n  className,\n}) => {\n  const { poDataLoading, purchaseOrderData } = usePurchaseOrderData();\n  const t = useText({\n    headerText: 'PurchaseOrders.historyLog.headerText',\n  });\n\n  const historyLogRecords = purchaseOrderData?.historyLog || [];\n\n  const renderHistoryLog = (\n    <>\n      {withHeader && withWrapper ? (\n        <PurchaseOrdersHeader headerText={t.headerText} divider={true} />\n      ) : null}\n      {!poDataLoading ? (\n        <PurchaseOrderHistoryLogContent\n          historyLogRecords={historyLogRecords}\n          visibleRecordsLimit={visibleRecordsLimit}\n        />\n      ) : (\n        <Skeleton rowGap=\"medium\" data-testid=\"comment-list-loader\">\n          <SkeletonRow\n            size=\"small\"\n            variant=\"row\"\n            fullWidth\n            lines={1}\n            style={{ maxWidth: 300 }}\n          />\n          <SkeletonRow size=\"medium\" variant=\"row\" fullWidth lines={1} />\n        </Skeleton>\n      )}\n    </>\n  );\n\n  return (\n    <div\n      className={classes(['b2b-purchase-order-history-log', className])}\n      data-testid=\"order-history-log-container\"\n    >\n      {withHeader && !withWrapper ? (\n        <PurchaseOrdersHeader headerText={t.headerText} />\n      ) : null}\n      {withWrapper ? (\n        <Card variant={'secondary'} data-testid=\"orderHistoryLogCard\">\n          {renderHistoryLog}\n        </Card>\n      ) : (\n        renderHistoryLog\n      )}\n    </div>\n  );\n};\n"],"names":["PurchaseOrderHistoryLogContent","historyLogRecords","visibleRecordsLimit","visibleRecordsCount","setVisibleRecordsCount","useState","showMore","buttonIsHidden","t","useText","jsxs","jsx","item","index","slicedLength","Fragment","Text","formatDate","Button","PurchaseOrderHistoryLog","withHeader","withWrapper","className","poDataLoading","purchaseOrderData","usePurchaseOrderData","renderHistoryLog","PurchaseOrdersHeader","Skeleton","SkeletonRow","classes","Card"],"mappings":"2nBAyBO,MAAMA,EAET,CAAC,CAAE,kBAAAC,EAAoB,CAAA,EAAI,oBAAAC,KAA0B,CACvD,KAAM,CAACC,EAAqBC,CAAsB,EAChDC,EAAiBH,CAAmB,EAChCI,EAAWL,EAAkB,OAASE,EACtCI,EAAiBN,EAAkB,QAAUC,EAE7CM,EAAIC,EAAQ,CAChB,cAAe,+CACf,cAAe,8CAAA,CAChB,EAED,OAAKR,EAAkB,OASrBS,EAAC,MAAA,CAAI,UAAW,yCACd,SAAA,CAAAC,EAAC,KAAA,CACC,UAAW,+CACX,KAAK,OAEJ,SAAAV,EAAkB,MAAM,EAAGE,CAAmB,EAAE,IAAI,CAACS,EAAMC,IAAU,CACpE,MAAMC,EAAe,KAAK,IACxBX,EACAF,EAAkB,MAAA,EAEpB,SACGc,EAAA,CACC,SAAA,CAAAL,EAAC,KAAA,CAAG,UAAW,+CACb,SAAA,CAAAC,EAAC,MAAA,CACC,UAAW,gDAEX,SAAAA,EAACK,EAAA,CACC,GAAI,oCAAoCJ,EAAK,QAAQ,GACrD,OAAQ,CAAE,KAAMK,EAAWL,EAAK,SAAS,CAAA,CAAE,CAAA,CAC7C,CAAA,EAEFD,EAAC,MAAA,CACC,UACE,sDAGD,SAAAC,EAAK,OAAA,CAAA,CACR,EACF,EACCC,EAAQC,EAAe,GACtBH,EAAC,KAAA,CACC,UAAW,iDAAA,CAAA,CACb,CAAA,EArBWC,EAAK,GAuBpB,CAEJ,CAAC,CAAA,CAAA,EAEF,CAACL,GACAI,EAAC,MAAA,CAAI,UAAW,kDACd,SAAAA,EAACO,EAAA,CACC,QAAQ,YACR,gBAAe,CAACZ,EAChB,aAAYA,EAAWE,EAAE,cAAgBA,EAAE,cAC3C,QAAS,IAAM,CACbJ,EACEE,EAAWL,EAAkB,OAASC,CAAA,CAE1C,EAEA,SAAAS,EAACK,EAAA,CACC,GAAI,qCACFV,EAAW,WAAa,UAC1B,EAAA,CAAA,CACF,CAAA,CACF,CACF,CAAA,EAEJ,EAjEEK,EAAC,OAAI,UAAW,yCACd,WAACK,EAAA,CAAK,GAAG,sCAAsC,CAAA,CACjD,CAiEN,EChFaG,EAET,CAAC,CACH,WAAAC,EAAa,GACb,YAAAC,EAAc,GACd,oBAAAnB,EAAsB,EACtB,UAAAoB,CACF,IAAM,CACJ,KAAM,CAAE,cAAAC,EAAe,kBAAAC,CAAA,EAAsBC,EAAA,EACvCjB,EAAIC,EAAQ,CAChB,WAAY,sCAAA,CACb,EAEKR,GAAoBuB,GAAA,YAAAA,EAAmB,aAAc,CAAA,EAErDE,EACJhB,EAAAK,EAAA,CACG,SAAA,CAAAK,GAAcC,IACZM,EAAA,CAAqB,WAAYnB,EAAE,WAAY,QAAS,GAAM,EAC7D,KACFe,EAMAb,EAACkB,EAAA,CAAS,OAAO,SAAS,cAAY,sBACpC,SAAA,CAAAjB,EAACkB,EAAA,CACC,KAAK,QACL,QAAQ,MACR,UAAS,GACT,MAAO,EACP,MAAO,CAAE,SAAU,GAAA,CAAI,CAAA,EAEzBlB,EAACkB,GAAY,KAAK,SAAS,QAAQ,MAAM,UAAS,GAAC,MAAO,CAAA,CAAG,CAAA,CAAA,CAC/D,EAdAlB,EAACX,EAAA,CACC,kBAAAC,EACA,oBAAAC,CAAA,CAAA,CAYF,EAEJ,EAGF,OACEQ,EAAC,MAAA,CACC,UAAWoB,EAAQ,CAAC,iCAAkCR,CAAS,CAAC,EAChE,cAAY,8BAEX,SAAA,CAAAF,GAAc,CAACC,EACdV,EAACgB,GAAqB,WAAYnB,EAAE,WAAY,EAC9C,KACHa,IACEU,EAAA,CAAK,QAAS,YAAa,cAAY,sBACrC,WACH,EAEAL,CAAA,CAAA,CAAA,CAIR"}