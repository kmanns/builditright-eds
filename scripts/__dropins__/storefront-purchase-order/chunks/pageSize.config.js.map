{"version":3,"file":"pageSize.config.js","sources":["/@dropins/storefront-purchase-order/src/lib/isValidUrl.ts","/@dropins/storefront-purchase-order/src/lib/getRange.ts","/@dropins/storefront-purchase-order/src/lib/getStatusVariant.ts","/@dropins/storefront-purchase-order/src/components/PurchaseOrdersTable/PurchaseOrdersTable.tsx","/@dropins/storefront-purchase-order/src/configs/pageSize.config.ts"],"sourcesContent":["/********************************************************************\n * ADOBE CONFIDENTIAL\n * __________________\n *\n *  Copyright 2025 Adobe\n *  All Rights Reserved.\n *\n * NOTICE:  All information contained herein is, and remains\n * the property of Adobe and its suppliers, if any. The intellectual\n * and technical concepts contained herein are proprietary to Adobe\n * and its suppliers and are protected by all applicable intellectual\n * property laws, including trade secret and copyright laws.\n * Dissemination of this information or reproduction of this material\n * is strictly forbidden unless prior written permission is obtained\n * from Adobe.\n *******************************************************************/\n\nexport const isValidUrl = (url: string): boolean => {\n  try {\n    const parsed = new URL(url, window.location.origin);\n    // Only allow relative paths or same-origin URLs\n    return parsed.origin === window.location.origin;\n  } catch {\n    // If it's not a valid URL, check if it's a relative path\n    return url.startsWith('/') || url.startsWith('./') || url.startsWith('../');\n  }\n};\n","/********************************************************************\n * ADOBE CONFIDENTIAL\n * __________________\n *\n *  Copyright 2025 Adobe\n *  All Rights Reserved.\n *\n * NOTICE:  All information contained herein is, and remains\n * the property of Adobe and its suppliers, if any. The intellectual\n * and technical concepts contained herein are proprietary to Adobe\n * and its suppliers and are protected by all applicable intellectual\n * property laws, including trade secret and copyright laws.\n * Dissemination of this information or reproduction of this material\n * is strictly forbidden unless prior written permission is obtained\n * from Adobe.\n *******************************************************************/\n\nexport const getRange = (\n  currentPage: number,\n  pageSize: number,\n  total: number\n) => {\n  if (total <= 0) return { from: 0, to: 0, total: 0 };\n  const maxPage = Math.max(1, Math.ceil(total / pageSize));\n  const p = Math.min(Math.max(currentPage, 1), maxPage);\n  const from = (p - 1) * pageSize + 1;\n  const to = Math.min(p * pageSize, total);\n\n  return { from, to, total };\n};\n","export const getStatusVariant = (status: string): string => {\n  const statusUpper = status.toUpperCase();\n\n  // Positive statuses\n  if (\n    [\n      'APPROVED',\n      'ORDER_PLACED',\n      'APPROVED_PENDING_PAYMENT',\n      'ENABLED',\n    ].includes(statusUpper)\n  ) {\n    return 'positive';\n  }\n\n  // Negative statuses\n  if (\n    ['REJECTED', 'CANCELED', 'ORDER_FAILED', 'DISABLED'].includes(statusUpper)\n  ) {\n    return 'negative';\n  }\n\n  // Waiting statuses (default)\n  return 'waiting';\n};\n","/********************************************************************\n * ADOBE CONFIDENTIAL\n * __________________\n *\n *  Copyright 2025 Adobe\n *  All Rights Reserved.\n *\n * NOTICE:  All information contained herein is, and remains\n * the property of Adobe and its suppliers, if any. The intellectual\n * and technical concepts contained herein are proprietary to Adobe\n * and its suppliers and are protected by all applicable intellectual\n * property laws, including trade secret and copyright laws.\n * Dissemination of this information or reproduction of this material\n * is strictly forbidden unless prior written permission is obtained\n * from Adobe.\n *******************************************************************/\n\nimport { FunctionComponent } from 'preact';\nimport {\n  Table,\n  Pagination,\n  Card,\n  Picker,\n  InLineAlert,\n} from '@adobe-commerce/elsie/components';\nimport { classes } from '@adobe-commerce/elsie/lib';\nimport {\n  PurchaseOrdersTableProps,\n  TableColumn,\n} from '@/b2b-purchase-order/types/components';\nimport { Text, useText } from '@adobe-commerce/elsie/i18n';\nimport { getRange } from '@/b2b-purchase-order/lib';\nimport '@/b2b-purchase-order/components/PurchaseOrdersTable/PurchaseOrdersTable.css';\n\nexport const PurchaseOrdersTable: FunctionComponent<\n  PurchaseOrdersTableProps\n> = ({\n  pageSizeConfig,\n  totalCount = 0,\n  columns = [],\n  rows = [],\n  paginationConfig,\n  alertMessageConfig = {\n    heading: '',\n    description: '',\n    type: 'success',\n  },\n  loading = false,\n  className = '',\n  variant = 'secondary',\n  skeletonRowCount = 10,\n  emptyTitle,\n  header,\n  footer,\n  withWrapper,\n  expandedRows,\n}) => {\n  const t = useText({\n    title: 'PurchaseOrders.purchaseOrdersTable.noPurchaseOrders.default',\n  });\n\n  const {\n    heading: alertMessageHeading,\n    description: alertMessageDescription,\n    type: alertMessageType,\n  } = alertMessageConfig;\n\n  const { currentPage, totalPages, handlePageChange } = paginationConfig;\n  const { pageSizeOptionsList, onChange } = pageSizeConfig;\n\n  // Extract pageSize value safely\n  const selectedPageSizeOption = pageSizeOptionsList?.find(\n    (option) => option.selected\n  );\n  const pageSize =\n    selectedPageSizeOption && selectedPageSizeOption.value !== undefined\n      ? Number(selectedPageSizeOption.value)\n      : 10;\n  const { from, to, total } = getRange(currentPage, pageSize, totalCount);\n  const isEmpty = !loading && rows.length === 0;\n\n  const content = (\n    <>\n      {alertMessageHeading || alertMessageDescription ? (\n        <InLineAlert\n          heading={alertMessageHeading}\n          description={alertMessageDescription}\n          type={alertMessageType}\n        />\n      ) : null}\n\n      {header ? (\n        <div className=\"purchase-orders-table__header\">{header}</div>\n      ) : null}\n\n      <Table\n        className=\"purchase-orders-table__table-wrapper\"\n        mobileLayout=\"stacked\"\n        columns={columns as TableColumn[]}\n        rowData={rows}\n        expandedRows={expandedRows}\n        loading={loading}\n        skeletonRowCount={+skeletonRowCount}\n      />\n      {isEmpty && (\n        <div\n          className=\"purchase-orders-table__empty-state\"\n          role=\"status\"\n          aria-live=\"polite\"\n        >\n          <p>{emptyTitle || t.title}</p>\n        </div>\n      )}\n\n      {totalCount > 0 ? (\n        <div className=\"purchase-orders-table__pagination-wrapper\">\n          <div className=\"purchase-orders-table__pagination-counter\">\n            <Text\n              id=\"PurchaseOrders.purchaseOrdersTable.pagination.status\"\n              fields={{\n                from,\n                to,\n                total,\n              }}\n            />\n          </div>\n          {totalPages > 1 && (\n            <Pagination\n              className={classes([\n                'purchase-orders-table__pagination',\n                ['purchase-orders-table__pagination--loading', loading],\n              ])}\n              currentPage={currentPage}\n              totalPages={totalPages}\n              onChange={handlePageChange}\n            />\n          )}\n          {totalCount > 0 && pageSizeOptionsList.length ? (\n            <div className=\"purchase-orders-table__pagination-page-size\">\n              <Text id=\"PurchaseOrders.purchaseOrdersTable.pagination.pageSizeLabel.start\" />\n              <Picker\n                disabled={loading}\n                handleSelect={onChange}\n                options={pageSizeOptionsList}\n                value={\n                  pageSizeOptionsList?.find((option) => option.selected)\n                    ?.value || ''\n                }\n              />\n            </div>\n          ) : null}\n        </div>\n      ) : null}\n\n      {footer ? (\n        <div className=\"purchase-orders-table__footer\">{footer}</div>\n      ) : null}\n    </>\n  );\n\n  if (!withWrapper) {\n    return (\n      <div\n        data-testid=\"purchaseOrdersTable\"\n        className={classes([\n          'b2b-purchase-order-purchase-orders-table',\n          ['b2b-purchase-order-purchase-orders-table--empty-state', isEmpty],\n          className,\n        ])}\n      >\n        {content}\n      </div>\n    );\n  }\n\n  return (\n    <Card\n      variant={variant}\n      data-testid=\"purchaseOrdersTable\"\n      className={classes([\n        'b2b-purchase-order-purchase-orders-table',\n        ['b2b-purchase-order-purchase-orders-table--empty-state', isEmpty],\n        className,\n      ])}\n    >\n      {content}\n    </Card>\n  );\n};\n","/********************************************************************\n * ADOBE CONFIDENTIAL\n * __________________\n *\n *  Copyright 2025 Adobe\n *  All Rights Reserved.\n *\n * NOTICE:  All information contained herein is, and remains\n * the property of Adobe and its suppliers, if any. The intellectual\n * and technical concepts contained herein are proprietary to Adobe\n * and its suppliers and are protected by all applicable intellectual\n * property laws, including trade secret and copyright laws.\n * Dissemination of this information or reproduction of this material\n * is strictly forbidden unless prior written permission is obtained\n * from Adobe.\n *******************************************************************/\n\nexport const defaultPageSizeConfig = [\n  {\n    text: '10',\n    value: '10',\n    selected: false,\n  },\n  {\n    text: '20',\n    value: '20',\n    selected: true,\n  },\n  {\n    text: '30',\n    value: '30',\n    selected: false,\n  },\n  {\n    text: '50',\n    value: '50',\n    selected: false,\n  },\n];\n"],"names":["isValidUrl","url","getRange","currentPage","pageSize","total","maxPage","p","from","to","getStatusVariant","status","statusUpper","PurchaseOrdersTable","pageSizeConfig","totalCount","columns","rows","paginationConfig","alertMessageConfig","loading","className","variant","skeletonRowCount","emptyTitle","header","footer","withWrapper","expandedRows","t","useText","alertMessageHeading","alertMessageDescription","alertMessageType","totalPages","handlePageChange","pageSizeOptionsList","onChange","selectedPageSizeOption","option","isEmpty","content","jsxs","Fragment","jsx","InLineAlert","Table","Text","Pagination","classes","Picker","_a","Card","defaultPageSizeConfig"],"mappings":"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"}