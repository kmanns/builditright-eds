{"version":3,"file":"getPurchaseOrders.js","sources":["/@dropins/storefront-purchase-order/src/api/getPurchaseOrders/graphql/getPurchaseOrders.graphql.ts","/@dropins/storefront-purchase-order/src/api/getPurchaseOrders/getPurchaseOrders.ts"],"sourcesContent":["/********************************************************************\n * ADOBE CONFIDENTIAL\n * __________________\n *\n *  Copyright 2025 Adobe\n *  All Rights Reserved.\n *\n * NOTICE:  All information contained herein is, and remains\n * the property of Adobe and its suppliers, if any. The intellectual\n * and technical concepts contained herein are proprietary to Adobe\n * and its suppliers and are protected by all applicable intellectual\n * property laws, including trade secret and copyright laws.\n * Dissemination of this information or reproduction of this material\n * is strictly forbidden unless prior written permission is obtained\n * from Adobe.\n *******************************************************************/\n\nimport { PURCHASE_ORDERS_FRAGMENT } from '@/b2b-purchase-order/api/fragments';\n\nexport const GET_PURCHASE_ORDERS = /* GraphQL */ `\n  query GET_PURCHASE_ORDERS(\n    $filter: PurchaseOrdersFilterInput\n    $pageSize: Int\n    $currentPage: Int\n  ) {\n    customer {\n      purchase_orders(\n        filter: $filter\n        pageSize: $pageSize\n        currentPage: $currentPage\n      ) {\n        total_count\n        page_info {\n          current_page\n          page_size\n          total_pages\n        }\n        items {\n          ...PURCHASE_ORDERS_FRAGMENT\n        }\n      }\n    }\n  }\n  ${PURCHASE_ORDERS_FRAGMENT}\n`;\n","/********************************************************************\n * ADOBE CONFIDENTIAL\n * __________________\n *\n *  Copyright 2025 Adobe\n *  All Rights Reserved.\n *\n * NOTICE:  All information contained herein is, and remains\n * the property of Adobe and its suppliers, if any. The intellectual\n * and technical concepts contained herein are proprietary to Adobe\n * and its suppliers and are protected by all applicable intellectual\n * property laws, including trade secret and copyright laws.\n * Dissemination of this information or reproduction of this material\n * is strictly forbidden unless prior written permission is obtained\n * from Adobe.\n *******************************************************************/\n\nimport { fetchGraphQl } from '@/b2b-purchase-order/api/fetch-graphql';\nimport { handleNetworkError } from '@/b2b-purchase-order/lib/network-error';\nimport { handleFetchError } from '@/b2b-purchase-order/lib/fetch-error';\nimport { GET_PURCHASE_ORDERS } from '@/b2b-purchase-order/api/getPurchaseOrders/graphql/getPurchaseOrders.graphql';\nimport { transformPurchaseOrder } from '@/b2b-purchase-order/data/transforms/transform-purchase-order';\nimport { PurchaseOrderModel } from '@/b2b-purchase-order/data/models';\nimport { toSnakeCase } from '@/b2b-purchase-order/lib';\n\nexport const getPurchaseOrders = async (\n  filter?: any,\n  pageSize: number = 20,\n  currentPage: number = 1\n): Promise<{\n  totalCount: number;\n  pageInfo: {\n    currentPage: number;\n    pageSize: number;\n    totalPages: number;\n  };\n  purchaseOrderItems: PurchaseOrderModel[];\n}> => {\n  return fetchGraphQl(GET_PURCHASE_ORDERS, {\n    variables: {\n      filter: toSnakeCase(filter),\n      pageSize,\n      currentPage,\n    },\n  })\n    .then((response: any) => {\n      if (response.errors?.length) {\n        handleFetchError(response.errors);\n      }\n\n      if (!response.data?.customer?.purchase_orders) {\n        throw new Error('Failed to get purchase orders');\n      }\n\n      const purchaseOrdersData = response?.data?.customer?.purchase_orders;\n      const totalCount = purchaseOrdersData?.total_count ?? 0;\n      const pageInfo = {\n        currentPage: purchaseOrdersData?.page_info?.current_page ?? 1,\n        pageSize: purchaseOrdersData?.page_info?.page_size ?? 20,\n        totalPages: purchaseOrdersData?.page_info?.total_pages ?? 1,\n      };\n\n      return {\n        totalCount,\n        pageInfo,\n        purchaseOrderItems: (purchaseOrdersData?.items || []).map(\n          transformPurchaseOrder\n        ),\n      };\n    })\n    .catch(handleNetworkError);\n};\n"],"names":["GET_PURCHASE_ORDERS","PURCHASE_ORDERS_FRAGMENT","getPurchaseOrders","filter","pageSize","currentPage","fetchGraphQl","toSnakeCase","response","_a","handleFetchError","_c","_b","purchaseOrdersData","_e","_d","totalCount","pageInfo","_f","_g","_h","transformPurchaseOrder","handleNetworkError"],"mappings":"gLAmBO,MAAMA,EAAoC;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA,IAwB7CC,CAAwB;AAAA,EClBfC,EAAoB,MAC/BC,EACAC,EAAmB,GACnBC,EAAsB,IAUfC,EAAaN,EAAqB,CACvC,UAAW,CACT,OAAQO,EAAYJ,CAAM,EAC1B,SAAAC,EACA,YAAAC,CAAA,CACF,CACD,EACE,KAAMG,GAAkB,qBAKvB,IAJIC,EAAAD,EAAS,SAAT,MAAAC,EAAiB,QACnBC,EAAiBF,EAAS,MAAM,EAG9B,GAACG,GAAAC,EAAAJ,EAAS,OAAT,YAAAI,EAAe,WAAf,MAAAD,EAAyB,iBAC5B,MAAM,IAAI,MAAM,+BAA+B,EAGjD,MAAME,GAAqBC,GAAAC,EAAAP,GAAA,YAAAA,EAAU,OAAV,YAAAO,EAAgB,WAAhB,YAAAD,EAA0B,gBAC/CE,GAAaH,GAAA,YAAAA,EAAoB,cAAe,EAChDI,EAAW,CACf,cAAaC,EAAAL,GAAA,YAAAA,EAAoB,YAApB,YAAAK,EAA+B,eAAgB,EAC5D,WAAUC,EAAAN,GAAA,YAAAA,EAAoB,YAApB,YAAAM,EAA+B,YAAa,GACtD,aAAYC,EAAAP,GAAA,YAAAA,EAAoB,YAApB,YAAAO,EAA+B,cAAe,CAAA,EAG5D,MAAO,CACL,WAAAJ,EACA,SAAAC,EACA,qBAAqBJ,GAAA,YAAAA,EAAoB,QAAS,CAAA,GAAI,IACpDQ,CAAA,CACF,CAEJ,CAAC,EACA,MAAMC,CAAkB"}