{"version":3,"file":"getPurchaseOrderApprovalRules.js","sources":["/@dropins/storefront-purchase-order/src/api/deletePurchaseOrderApprovalRule/graphql/deletePurchaseOrderApprovalRule.graphql.ts","/@dropins/storefront-purchase-order/src/api/deletePurchaseOrderApprovalRule/deletePurchaseOrderApprovalRule.ts","/@dropins/storefront-purchase-order/src/api/getPurchaseOrderApprovalRules/graphql/getPurchaseOrderApprovalRules.graphql.ts","/@dropins/storefront-purchase-order/src/api/getPurchaseOrderApprovalRules/getPurchaseOrderApprovalRules.ts"],"sourcesContent":["/********************************************************************\n * ADOBE CONFIDENTIAL\n * __________________\n *\n *  Copyright 2025 Adobe\n *  All Rights Reserved.\n *\n * NOTICE:  All information contained herein is, and remains\n * the property of Adobe and its suppliers, if any. The intellectual\n * and technical concepts contained herein are proprietary to Adobe\n * and its suppliers and are protected by all applicable intellectual\n * property laws, including trade secret and copyright laws.\n * Dissemination of this information or reproduction of this material\n * is strictly forbidden unless prior written permission is obtained\n * from Adobe.\n *******************************************************************/\n\nexport const DELETE_PURCHASE_ORDER_APPROVAL_RULE = /* GraphQL */ `\n  mutation DELETE_PURCHASE_ORDER_APPROVAL_RULE(\n    $input: DeletePurchaseOrderApprovalRuleInput!\n  ) {\n    deletePurchaseOrderApprovalRule(input: $input) {\n      errors {\n        message\n        type\n      }\n    }\n  }\n`;\n","/********************************************************************\n * ADOBE CONFIDENTIAL\n * __________________\n *\n *  Copyright 2025 Adobe\n *  All Rights Reserved.\n *\n * NOTICE:  All information contained herein is, and remains\n * the property of Adobe and its suppliers, if any. The intellectual\n * and technical concepts contained herein are proprietary to Adobe\n * and its suppliers and are protected by all applicable intellectual\n * property laws, including trade secret and copyright laws.\n * Dissemination of this information or reproduction of this material\n * is strictly forbidden unless prior written permission is obtained\n * from Adobe.\n *******************************************************************/\nimport { fetchGraphQl } from '@/b2b-purchase-order/api/fetch-graphql';\nimport { handleNetworkError } from '@/b2b-purchase-order/lib/network-error';\nimport { handleFetchError } from '@/b2b-purchase-order/lib/fetch-error';\nimport { DELETE_PURCHASE_ORDER_APPROVAL_RULE } from '@/b2b-purchase-order/api/deletePurchaseOrderApprovalRule/graphql/deletePurchaseOrderApprovalRule.graphql';\n\nexport const deletePurchaseOrderApprovalRule = async (\n  uids: string | string[]\n): Promise<{\n  deletePurchaseOrderApprovalRule: {\n    errors: { message?: string; type?: string }[];\n  };\n}> => {\n  const uidArray = Array.isArray(uids) ? uids : [uids];\n\n  if (!uidArray || uidArray.length === 0) {\n    throw new Error('Approval Rule UID(s) are required');\n  }\n\n  if (uidArray.some((uid) => !uid || uid.trim() === '')) {\n    throw new Error('All Approval Rule UIDs must be valid');\n  }\n\n  const input = {\n    approval_rule_uids: uidArray,\n  };\n\n  return fetchGraphQl(DELETE_PURCHASE_ORDER_APPROVAL_RULE, {\n    variables: { input },\n  })\n    .then((response: any) => {\n      if (response.errors?.length) {\n        handleFetchError(response.errors);\n      }\n\n      const result = response.data?.deletePurchaseOrderApprovalRule;\n      if (!result) {\n        throw new Error('Failed to delete purchase order approval rule');\n      }\n\n      const data = response?.data?.deletePurchaseOrderApprovalRule;\n\n      return {\n        deletePurchaseOrderApprovalRule: {\n          errors: (data?.errors ?? []).map((error: any) => ({\n            message: error?.message,\n            type: error?.type,\n          })),\n        },\n      };\n    })\n    .catch(handleNetworkError);\n};\n","/********************************************************************\n * ADOBE CONFIDENTIAL\n * __________________\n *\n *  Copyright 2025 Adobe\n *  All Rights Reserved.\n *\n * NOTICE:  All information contained herein is, and remains\n * the property of Adobe and its suppliers, if any. The intellectual\n * and technical concepts contained herein are proprietary to Adobe\n * and its suppliers and are protected by all applicable intellectual\n * property laws, including trade secret and copyright laws.\n * Dissemination of this information or reproduction of this material\n * is strictly forbidden unless prior written permission is obtained\n * from Adobe.\n *******************************************************************/\n\nexport const GET_PURCHASE_ORDER_APPROVAL_RULES = /* GraphQL */ `\n  query GET_PURCHASE_ORDER_APPROVAL_RULES($currentPage: Int!, $pageSize: Int!) {\n    customer {\n      email\n      purchase_order_approval_rules(\n        currentPage: $currentPage\n        pageSize: $pageSize\n      ) {\n        items {\n          applies_to_roles {\n            id\n            name\n            users_count\n            permissions {\n              id\n              sort_order\n              text\n              children {\n                id\n                sort_order\n                text\n              }\n            }\n          }\n          approver_roles {\n            id\n            name\n            users_count\n            permissions {\n              id\n              sort_order\n              text\n              children {\n                id\n                sort_order\n                text\n              }\n            }\n          }\n          condition {\n            attribute\n            operator\n          }\n          created_at\n          created_by\n          description\n          name\n          status\n          uid\n          updated_at\n        }\n        total_count\n        page_info {\n          page_size\n          current_page\n          total_pages\n        }\n      }\n    }\n  }\n`;\n","/********************************************************************\n * ADOBE CONFIDENTIAL\n * __________________\n *\n *  Copyright 2025 Adobe\n *  All Rights Reserved.\n *\n * NOTICE:  All information contained herein is, and remains\n * the property of Adobe and its suppliers, if any. The intellectual\n * and technical concepts contained herein are proprietary to Adobe\n * and its suppliers and are protected by all applicable intellectual\n * property laws, including trade secret and copyright laws.\n * Dissemination of this information or reproduction of this material\n * is strictly forbidden unless prior written permission is obtained\n * from Adobe.\n *******************************************************************/\n\nimport { fetchGraphQl } from '@/b2b-purchase-order/api/fetch-graphql';\nimport { handleNetworkError } from '@/b2b-purchase-order/lib/network-error';\nimport { handleFetchError } from '@/b2b-purchase-order/lib/fetch-error';\nimport { GET_PURCHASE_ORDER_APPROVAL_RULES } from '@/b2b-purchase-order/api/getPurchaseOrderApprovalRules/graphql/getPurchaseOrderApprovalRules.graphql';\nimport { transformPurchaseOrderApprovalRule } from '@/b2b-purchase-order/data/transforms';\nimport { PurchaseOrderApprovalRuleModel } from '@/b2b-purchase-order/data/models';\n\nconst DEFAULT_PAGE_INFO = {\n  currentPage: 1,\n  pageSize: 20,\n  totalPages: 1,\n};\n\nexport const getPurchaseOrderApprovalRules = async (\n  currentPage: number = DEFAULT_PAGE_INFO.currentPage,\n  pageSize: number = DEFAULT_PAGE_INFO.pageSize\n): Promise<{\n  totalCount: number;\n  pageInfo: {\n    currentPage: number;\n    pageSize: number;\n    totalPages: number;\n  };\n  items: PurchaseOrderApprovalRuleModel[];\n}> => {\n  return fetchGraphQl(GET_PURCHASE_ORDER_APPROVAL_RULES, {\n    variables: {\n      currentPage,\n      pageSize,\n    },\n  })\n    .then((response: any) => {\n      if (response.errors?.length) {\n        handleFetchError(response.errors);\n      }\n\n      const rulesData = response?.data?.customer?.purchase_order_approval_rules;\n      const totalCount = rulesData?.total_count ?? 0;\n      const pageInfo = {\n        currentPage:\n          rulesData?.page_info?.current_page ?? DEFAULT_PAGE_INFO.currentPage,\n        pageSize: rulesData?.page_info?.page_size ?? DEFAULT_PAGE_INFO.pageSize,\n        totalPages:\n          rulesData?.page_info?.total_pages ?? DEFAULT_PAGE_INFO.totalPages,\n      };\n\n      return {\n        totalCount,\n        pageInfo,\n        items: (rulesData?.items || []).map(transformPurchaseOrderApprovalRule),\n      };\n    })\n    .catch(handleNetworkError);\n};\n"],"names":["DELETE_PURCHASE_ORDER_APPROVAL_RULE","deletePurchaseOrderApprovalRule","uids","uidArray","uid","fetchGraphQl","response","_a","handleFetchError","_b","data","_c","error","handleNetworkError","GET_PURCHASE_ORDER_APPROVAL_RULES","DEFAULT_PAGE_INFO","getPurchaseOrderApprovalRules","currentPage","pageSize","rulesData","totalCount","pageInfo","_d","_e","_f","transformPurchaseOrderApprovalRule"],"mappings":"qHAiBO,MAAMA,EAAoD;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA,ECIpDC,EAAkC,MAC7CC,GAKI,CACJ,MAAMC,EAAW,MAAM,QAAQD,CAAI,EAAIA,EAAO,CAACA,CAAI,EAEnD,GAAI,CAACC,GAAYA,EAAS,SAAW,EACnC,MAAM,IAAI,MAAM,mCAAmC,EAGrD,GAAIA,EAAS,KAAMC,GAAQ,CAACA,GAAOA,EAAI,SAAW,EAAE,EAClD,MAAM,IAAI,MAAM,sCAAsC,EAOxD,OAAOC,EAAaL,EAAqC,CACvD,UAAW,CAAE,MALD,CACZ,mBAAoBG,CAAA,CAIP,CAAM,CACpB,EACE,KAAMG,GAAkB,WAMvB,IALIC,EAAAD,EAAS,SAAT,MAAAC,EAAiB,QACnBC,EAAiBF,EAAS,MAAM,EAI9B,GADWG,EAAAH,EAAS,OAAT,YAAAG,EAAe,iCAE5B,MAAM,IAAI,MAAM,+CAA+C,EAGjE,MAAMC,GAAOC,EAAAL,GAAA,YAAAA,EAAU,OAAV,YAAAK,EAAgB,gCAE7B,MAAO,CACL,gCAAiC,CAC/B,SAASD,GAAA,YAAAA,EAAM,SAAU,CAAA,GAAI,IAAKE,IAAgB,CAChD,QAASA,GAAA,YAAAA,EAAO,QAChB,KAAMA,GAAA,YAAAA,EAAO,IAAA,EACb,CAAA,CACJ,CAEJ,CAAC,EACA,MAAMC,CAAkB,CAC7B,EClDaC,EAAkD;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA,ECOzDC,EAAoB,CACxB,YAAa,EACb,SAAU,GACV,WAAY,CACd,EAEaC,EAAgC,MAC3CC,EAAsBF,EAAkB,YACxCG,EAAmBH,EAAkB,WAU9BV,EAAaS,EAAmC,CACrD,UAAW,CACT,YAAAG,EACA,SAAAC,CAAA,CACF,CACD,EACE,KAAMZ,GAAkB,kBACnBC,EAAAD,EAAS,SAAT,MAAAC,EAAiB,QACnBC,EAAiBF,EAAS,MAAM,EAGlC,MAAMa,GAAYR,GAAAF,EAAAH,GAAA,YAAAA,EAAU,OAAV,YAAAG,EAAgB,WAAhB,YAAAE,EAA0B,8BACtCS,GAAaD,GAAA,YAAAA,EAAW,cAAe,EACvCE,EAAW,CACf,cACEC,EAAAH,GAAA,YAAAA,EAAW,YAAX,YAAAG,EAAsB,eAAgBP,EAAkB,YAC1D,WAAUQ,EAAAJ,GAAA,YAAAA,EAAW,YAAX,YAAAI,EAAsB,YAAaR,EAAkB,SAC/D,aACES,EAAAL,GAAA,YAAAA,EAAW,YAAX,YAAAK,EAAsB,cAAeT,EAAkB,UAAA,EAG3D,MAAO,CACL,WAAAK,EACA,SAAAC,EACA,QAAQF,GAAA,YAAAA,EAAW,QAAS,CAAA,GAAI,IAAIM,CAAkC,CAAA,CAE1E,CAAC,EACA,MAAMZ,CAAkB"}