{"version":3,"file":"currencyInfo.js","sources":["/@dropins/storefront-purchase-order/src/data/transforms/transform-purchase-order-approval-rule-metadata.ts","/@dropins/storefront-purchase-order/src/api/createPurchaseOrderApprovalRule/graphql/createPurchaseOrderApprovalRule.graphql.ts","/@dropins/storefront-purchase-order/src/api/createPurchaseOrderApprovalRule/createPurchaseOrderApprovalRule.ts","/@dropins/storefront-purchase-order/src/api/updatePurchaseOrderApprovalRule/graphql/updatePurchaseOrderApprovalRule.graphql.ts","/@dropins/storefront-purchase-order/src/api/updatePurchaseOrderApprovalRule/updatePurchaseOrderApprovalRule.ts","/@dropins/storefront-purchase-order/src/api/getPurchaseOrderApprovalRuleMetadata/graphql/getPurchaseOrderApprovalRuleMetadata.graphql.ts","/@dropins/storefront-purchase-order/src/api/getPurchaseOrderApprovalRuleMetadata/getPurchaseOrderApprovalRuleMetadata.ts","/@dropins/storefront-purchase-order/src/api/currencyInfo/graphql/currencyInfo.graphql.ts","/@dropins/storefront-purchase-order/src/api/currencyInfo/currencyInfo.ts"],"sourcesContent":["/********************************************************************\n * ADOBE CONFIDENTIAL\n * __________________\n *\n *  Copyright 2025 Adobe\n *  All Rights Reserved.\n *\n * NOTICE:  All information contained herein is, and remains\n * the property of Adobe and its suppliers, if any. The intellectual\n * and technical concepts contained herein are proprietary to Adobe\n * and its suppliers and are protected by all applicable intellectual\n * property laws, including trade secret and copyright laws.\n * Dissemination of this information or reproduction of this material\n * is strictly forbidden unless prior written permission is obtained\n * from Adobe.\n *******************************************************************/\n\nimport {\n  PurchaseOrderApprovalRuleMetadataModel,\n  CompanyRolePermissionsTree,\n  CompanyRole,\n} from '@/b2b-purchase-order/data/models/purchase-order-approval-rule-metadata-model';\n\nexport const transformPurchaseOrderApprovalRuleMetadata = (\n  response: any\n): PurchaseOrderApprovalRuleMetadataModel => {\n  const metadata =\n    response?.data?.customer?.purchase_order_approval_rule_metadata;\n\n  const transformCompanyRolePermission = (\n    permission: any\n  ): CompanyRolePermissionsTree => ({\n    id: permission?.id || '',\n    sortOrder: permission?.sort_order || 0,\n    text: permission?.text || '',\n    children:\n      permission?.children?.map(transformCompanyRolePermission) || undefined,\n  });\n\n  const transformCompanyRole = (role: any): CompanyRole => ({\n    id: role?.id || '',\n    name: role?.name || '',\n    usersCount: role?.users_count || 0,\n    permissions: (role?.permissions || []).map(transformCompanyRolePermission),\n  });\n\n  const availableAppliesTo = (metadata?.available_applies_to || []).map(\n    transformCompanyRole\n  );\n\n  const availableRequiresApprovalFrom = (\n    metadata?.available_requires_approval_from || []\n  ).map(transformCompanyRole);\n\n  return {\n    availableAppliesTo,\n    availableRequiresApprovalFrom,\n  };\n};\n","/********************************************************************\n * ADOBE CONFIDENTIAL\n * __________________\n *\n *  Copyright 2025 Adobe\n *  All Rights Reserved.\n *\n * NOTICE:  All information contained herein is, and remains\n * the property of Adobe and its suppliers, if any. The intellectual\n * and technical concepts contained herein are proprietary to Adobe\n * and its suppliers and are protected by all applicable intellectual\n * property laws, including trade secret and copyright laws.\n * Dissemination of this information or reproduction of this material\n * is strictly forbidden unless prior written permission is obtained\n * from Adobe.\n *******************************************************************/\n\nexport const CREATE_PURCHASE_ORDER_APPROVAL_RULE = /* GraphQL */ `\n  mutation CREATE_PURCHASE_ORDER_APPROVAL_RULE(\n    $input: PurchaseOrderApprovalRuleInput!\n  ) {\n    createPurchaseOrderApprovalRule(input: $input) {\n      created_at\n      created_by\n      description\n      name\n      status\n      uid\n      updated_at\n      applies_to_roles {\n        id\n        name\n        users_count\n        permissions {\n          id\n          sort_order\n          text\n        }\n      }\n      condition {\n        attribute\n        operator\n      }\n      approver_roles {\n        id\n        name\n        users_count\n        permissions {\n          id\n          sort_order\n          text\n        }\n      }\n    }\n  }\n`;\n","/********************************************************************\n * ADOBE CONFIDENTIAL\n * __________________\n *\n *  Copyright 2025 Adobe\n *  All Rights Reserved.\n *\n * NOTICE:  All information contained herein is, and remains\n * the property of Adobe and its suppliers, if any. The intellectual\n * and technical concepts contained herein are proprietary to Adobe\n * and its suppliers and are protected by all applicable intellectual\n * property laws, including trade secret and copyright laws.\n * Dissemination of this information or reproduction of this material\n * is strictly forbidden unless prior written permission is obtained\n * from Adobe.\n *******************************************************************/\nimport { fetchGraphQl } from '@/b2b-purchase-order/api/fetch-graphql';\nimport { handleNetworkError } from '@/b2b-purchase-order/lib/network-error';\nimport { handleFetchError } from '@/b2b-purchase-order/lib/fetch-error';\nimport { CREATE_PURCHASE_ORDER_APPROVAL_RULE } from '@/b2b-purchase-order/api/createPurchaseOrderApprovalRule/graphql/createPurchaseOrderApprovalRule.graphql';\nimport { PurchaseOrderApprovalRuleModel } from '@/b2b-purchase-order/data/models/purchase-order-approval-rule-model';\nimport { transformPurchaseOrderApprovalRule } from '@/b2b-purchase-order/data/transforms';\n\nexport const createPurchaseOrderApprovalRule = async (\n  input: any\n): Promise<PurchaseOrderApprovalRuleModel> => {\n  if (!input.name || input.name.trim() === '') {\n    throw new Error('Rule name is required');\n  }\n\n  return fetchGraphQl(CREATE_PURCHASE_ORDER_APPROVAL_RULE, {\n    variables: { input },\n  })\n    .then((response: any) => {\n      if (response.errors?.length) {\n        handleFetchError(response.errors);\n      }\n\n      const result = response.data?.createPurchaseOrderApprovalRule;\n      if (!result) {\n        throw new Error('Failed to create purchase order approval rule');\n      }\n\n      return transformPurchaseOrderApprovalRule(\n        response.data.createPurchaseOrderApprovalRule\n      );\n    })\n    .catch(handleNetworkError);\n};\n","/********************************************************************\n * ADOBE CONFIDENTIAL\n * __________________\n *\n *  Copyright 2025 Adobe\n *  All Rights Reserved.\n *\n * NOTICE:  All information contained herein is, and remains\n * the property of Adobe and its suppliers, if any. The intellectual\n * and technical concepts contained herein are proprietary to Adobe\n * and its suppliers and are protected by all applicable intellectual\n * property laws, including trade secret and copyright laws.\n * Dissemination of this information or reproduction of this material\n * is strictly forbidden unless prior written permission is obtained\n * from Adobe.\n *******************************************************************/\n\nexport const UPDATE_PURCHASE_ORDER_APPROVAL_RULE = /* GraphQL */ `\n  mutation UPDATE_PURCHASE_ORDER_APPROVAL_RULE(\n    $input: UpdatePurchaseOrderApprovalRuleInput!\n  ) {\n    updatePurchaseOrderApprovalRule(input: $input) {\n      created_at\n      created_by\n      description\n      name\n      status\n      uid\n      updated_at\n      applies_to_roles {\n        id\n        name\n        users_count\n        permissions {\n          id\n          sort_order\n          text\n        }\n      }\n      condition {\n        attribute\n        operator\n      }\n      approver_roles {\n        id\n        name\n        users_count\n        permissions {\n          id\n          sort_order\n          text\n        }\n      }\n    }\n  }\n`;\n","/********************************************************************\n * ADOBE CONFIDENTIAL\n * __________________\n *\n *  Copyright 2025 Adobe\n *  All Rights Reserved.\n *\n * NOTICE:  All information contained herein is, and remains\n * the property of Adobe and its suppliers, if any. The intellectual\n * and technical concepts contained herein are proprietary to Adobe\n * and its suppliers and are protected by all applicable intellectual\n * property laws, including trade secret and copyright laws.\n * Dissemination of this information or reproduction of this material\n * is strictly forbidden unless prior written permission is obtained\n * from Adobe.\n *******************************************************************/\nimport { fetchGraphQl } from '@/b2b-purchase-order/api/fetch-graphql';\nimport { handleNetworkError } from '@/b2b-purchase-order/lib/network-error';\nimport { handleFetchError } from '@/b2b-purchase-order/lib/fetch-error';\nimport { UPDATE_PURCHASE_ORDER_APPROVAL_RULE } from '@/b2b-purchase-order/api/updatePurchaseOrderApprovalRule/graphql/updatePurchaseOrderApprovalRule.graphql';\nimport { transformPurchaseOrderApprovalRule } from '@/b2b-purchase-order/data/transforms';\nimport { PurchaseOrderApprovalRuleModel } from '@/b2b-purchase-order/data/models/purchase-order-approval-rule-model';\n\nexport const updatePurchaseOrderApprovalRule = async (\n  input: any\n): Promise<PurchaseOrderApprovalRuleModel> => {\n  if (!input.uid || input.uid.trim() === '') {\n    throw new Error('Approval Rule UID is required');\n  }\n\n  return fetchGraphQl(UPDATE_PURCHASE_ORDER_APPROVAL_RULE, {\n    variables: { input },\n  })\n    .then((response: any) => {\n      if (response.errors?.length) {\n        handleFetchError(response.errors);\n      }\n\n      return transformPurchaseOrderApprovalRule(\n        response.data?.updatePurchaseOrderApprovalRule || {}\n      );\n    })\n    .catch(handleNetworkError);\n};\n","/********************************************************************\n * ADOBE CONFIDENTIAL\n * __________________\n *\n *  Copyright 2025 Adobe\n *  All Rights Reserved.\n *\n * NOTICE:  All information contained herein is, and remains\n * the property of Adobe and its suppliers, if any. The intellectual\n * and technical concepts contained herein are proprietary to Adobe\n * and its suppliers and are protected by all applicable intellectual\n * property laws, including trade secret and copyright laws.\n * Dissemination of this information or reproduction of this material\n * is strictly forbidden unless prior written permission is obtained\n * from Adobe.\n *******************************************************************/\n\nexport const GET_PURCHASE_ORDER_APPROVAL_RULE_METADATA = /* GraphQL */ `\n  query GET_PURCHASE_ORDER_APPROVAL_RULE_METADATA {\n    customer {\n      purchase_order_approval_rule_metadata {\n        available_applies_to {\n          id\n          name\n          users_count\n          permissions {\n            id\n            sort_order\n            text\n            children {\n              id\n              sort_order\n              text\n            }\n          }\n        }\n        available_requires_approval_from {\n          id\n          name\n          users_count\n          permissions {\n            id\n            sort_order\n            text\n            children {\n              id\n              sort_order\n              text\n            }\n          }\n        }\n      }\n    }\n  }\n`;\n","/********************************************************************\n * ADOBE CONFIDENTIAL\n * __________________\n *\n *  Copyright 2025 Adobe\n *  All Rights Reserved.\n *\n * NOTICE:  All information contained herein is, and remains\n * the property of Adobe and its suppliers, if any. The intellectual\n * and technical concepts contained herein are proprietary to Adobe\n * and its suppliers and are protected by all applicable intellectual\n * property laws, including trade secret and copyright laws.\n * Dissemination of this information or reproduction of this material\n * is strictly forbidden unless prior written permission is obtained\n * from Adobe.\n *******************************************************************/\n\nimport { fetchGraphQl } from '@/b2b-purchase-order/api/fetch-graphql';\nimport { handleNetworkError } from '@/b2b-purchase-order/lib/network-error';\nimport { handleFetchError } from '@/b2b-purchase-order/lib/fetch-error';\nimport { GET_PURCHASE_ORDER_APPROVAL_RULE_METADATA } from '@/b2b-purchase-order/api/getPurchaseOrderApprovalRuleMetadata/graphql/getPurchaseOrderApprovalRuleMetadata.graphql';\nimport { transformPurchaseOrderApprovalRuleMetadata } from '@/b2b-purchase-order/data/transforms/transform-purchase-order-approval-rule-metadata';\nimport { PurchaseOrderApprovalRuleMetadataModel } from '@/b2b-purchase-order/data/models';\n\nexport const getPurchaseOrderApprovalRuleMetadata =\n  async (): Promise<PurchaseOrderApprovalRuleMetadataModel> => {\n    return fetchGraphQl(GET_PURCHASE_ORDER_APPROVAL_RULE_METADATA, {\n      variables: {},\n    })\n      .then((response: any) => {\n        if (response.errors?.length) {\n          handleFetchError(response.errors);\n        }\n\n        return transformPurchaseOrderApprovalRuleMetadata(response);\n      })\n      .catch(handleNetworkError);\n  };\n","/********************************************************************\n * ADOBE CONFIDENTIAL\n * __________________\n *\n *  Copyright 2025 Adobe\n *  All Rights Reserved.\n *\n * NOTICE:  All information contained herein is, and remains\n * the property of Adobe and its suppliers, if any. The intellectual\n * and technical concepts contained herein are proprietary to Adobe\n * and its suppliers and are protected by all applicable intellectual\n * property laws, including trade secret and copyright laws.\n * Dissemination of this information or reproduction of this material\n * is strictly forbidden unless prior written permission is obtained\n * from Adobe.\n *******************************************************************/\n\nexport const GET_CURRENCY_INFO = /* GraphQL */ `\n  query GET_CURRENCY_INFO {\n    currency {\n      base_currency_code\n      available_currency_codes\n    }\n  }\n`;\n","/********************************************************************\n * ADOBE CONFIDENTIAL\n * __________________\n *\n *  Copyright 2025 Adobe\n *  All Rights Reserved.\n *\n * NOTICE:  All information contained herein is, and remains\n * the property of Adobe and its suppliers, if any. The intellectual\n * and technical concepts contained herein are proprietary to Adobe\n * and its suppliers and are protected by all applicable intellectual\n * property laws, including trade secret and copyright laws.\n * Dissemination of this information or reproduction of this material\n * is strictly forbidden unless prior written permission is obtained\n * from Adobe.\n *******************************************************************/\n\nimport { fetchGraphQl } from '@/b2b-purchase-order/api/fetch-graphql';\nimport { handleNetworkError } from '@/b2b-purchase-order/lib/network-error';\nimport { handleFetchError } from '@/b2b-purchase-order/lib/fetch-error';\nimport { GET_CURRENCY_INFO } from './graphql/currencyInfo.graphql';\n\nexport const currencyInfo = async (): Promise<{\n  baseCurrencyCode: string;\n  availableCurrencyCodes: { text: string; value: string }[];\n}> => {\n  return fetchGraphQl(GET_CURRENCY_INFO, {})\n    .then((response) => {\n      // Handle null/undefined response\n      if (!response) {\n        return {\n          baseCurrencyCode: 'USD',\n          availableCurrencyCodes: [],\n        };\n      }\n\n      if (response.errors?.length) {\n        handleFetchError(response.errors);\n      }\n\n      const codeList = response?.data?.currency?.available_currency_codes ?? [];\n      const baseCurrency = response?.data?.currency?.base_currency_code;\n\n      return {\n        baseCurrencyCode: baseCurrency || 'USD',\n        availableCurrencyCodes: codeList.length\n          ? codeList.map((code: any) => ({\n              text: String(code),\n              value: String(code),\n            }))\n          : [],\n      };\n    })\n    .catch(handleNetworkError);\n};\n"],"names":["transformPurchaseOrderApprovalRuleMetadata","response","metadata","_b","_a","transformCompanyRolePermission","permission","transformCompanyRole","role","availableAppliesTo","availableRequiresApprovalFrom","CREATE_PURCHASE_ORDER_APPROVAL_RULE","createPurchaseOrderApprovalRule","input","fetchGraphQl","handleFetchError","transformPurchaseOrderApprovalRule","handleNetworkError","UPDATE_PURCHASE_ORDER_APPROVAL_RULE","updatePurchaseOrderApprovalRule","GET_PURCHASE_ORDER_APPROVAL_RULE_METADATA","getPurchaseOrderApprovalRuleMetadata","GET_CURRENCY_INFO","currencyInfo","codeList","_c","_e","_d","code"],"mappings":"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"}