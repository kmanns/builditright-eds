{"version":3,"file":"RequisitionListForm2.js","sources":["/@dropins/storefront-requisition-list/src/api/createRequisitionList/graphql/createRequisitionList.ts","/@dropins/storefront-requisition-list/src/api/createRequisitionList/createRequisitionList.ts","/@dropins/storefront-requisition-list/src/hooks/useRequisitionListForm.ts","/@dropins/storefront-requisition-list/src/containers/RequisitionListForm/RequisitionListForm.tsx"],"sourcesContent":["/********************************************************************\n * ADOBE CONFIDENTIAL\n * __________________\n *\n *  Copyright 2025 Adobe\n *  All Rights Reserved.\n *\n * NOTICE:  All information contained herein is, and remains\n * the property of Adobe and its suppliers, if any. The intellectual\n * and technical concepts contained herein are proprietary to Adobe\n * and its suppliers and are protected by all applicable intellectual\n * property laws, including trade secret and copyright laws.\n * Dissemination of this information or reproduction of this material\n * is strictly forbidden unless prior written permission is obtained\n * from Adobe.\n *******************************************************************/\n\nimport { REQUISITION_LIST_FRAGMENT } from '@/requisitionList/api/fragments/RequisitionListFragment.graphql';\n\nexport const CREATE_REQUISITION_LIST_MUTATION = `\n  mutation CREATE_REQUISITION_LIST_MUTATION(\n      $requisitionListName: String!,\n      $requisitionListDescription: String,\n    ) {\n    createRequisitionList(\n      input: {\n        name: $requisitionListName\n        description: $requisitionListDescription\n      }\n    ) {\n      requisition_list {\n        ...REQUISITION_LIST_FRAGMENT\n      }\n    }\n  }\n${REQUISITION_LIST_FRAGMENT}\n`;\n","/********************************************************************\n * ADOBE CONFIDENTIAL\n * __________________\n *\n *  Copyright 2025 Adobe\n *  All Rights Reserved.\n *\n * NOTICE:  All information contained herein is, and remains\n * the property of Adobe and its suppliers, if any. The intellectual\n * and technical concepts contained herein are proprietary to Adobe\n * and its suppliers and are protected by all applicable intellectual\n * property laws, including trade secret and copyright laws.\n * Dissemination of this information or reproduction of this material\n * is strictly forbidden unless prior written permission is obtained\n * from Adobe.\n *******************************************************************/\n\nimport { transformRequisitionList } from '@/requisitionList/data/transforms';\nimport { fetchGraphQl } from '@/requisitionList/api';\nimport { handleFetchError } from '@/requisitionList/lib/fetch-error';\nimport { RequisitionList } from '@/requisitionList/data/models/requisitionList';\nimport { CREATE_REQUISITION_LIST_MUTATION } from '@/requisitionList/api/createRequisitionList/graphql/createRequisitionList';\nimport { events } from '@adobe-commerce/event-bus';\n\nexport const createRequisitionList = async (\n  name: string,\n  description?: string\n): Promise<RequisitionList | null> => {\n  return fetchGraphQl(CREATE_REQUISITION_LIST_MUTATION, {\n    variables: {\n      requisitionListName: name,\n      requisitionListDescription: description,\n    },\n  }).then(({ errors, data }) => {\n    if (errors) return handleFetchError(errors);\n\n    if (!data?.createRequisitionList?.requisition_list) {\n      return null;\n    }\n\n    const payload = transformRequisitionList(\n      data.createRequisitionList.requisition_list\n    );\n    events.emit('requisitionList/data', payload);\n    return payload;\n  });\n};\n","/********************************************************************\n * ADOBE CONFIDENTIAL\n * __________________\n *\n *  Copyright 2025 Adobe\n *  All Rights Reserved.\n *\n * NOTICE:  All information contained herein is, and remains\n * the property of Adobe and its suppliers, if any. The intellectual\n * and technical concepts contained herein are proprietary to Adobe\n * and its suppliers and are protected by all applicable intellectual\n * property laws, including trade secret and copyright laws.\n * Dissemination of this information or reproduction of this material\n * is strictly forbidden unless prior written permission is obtained\n * from Adobe.\n *******************************************************************/\n\nimport { useState } from 'preact/hooks';\nimport { RequisitionList } from '@/requisitionList/data/models/requisitionList';\nimport { createRequisitionList } from '@/requisitionList/api/createRequisitionList/createRequisitionList';\nimport { updateRequisitionList } from '@/requisitionList/api/updateRequisitionList/updateRequisitionList';\n\nexport type RequisitionListFormMode = 'create' | 'update';\nexport type RequisitionListFormValues = { name: string; description?: string };\n\ntype UseRequisitionListFormReturn = {\n  error: string | null;\n  submit: (\n    values: RequisitionListFormValues\n  ) => Promise<RequisitionList | null>;\n};\n\nexport function useRequisitionListForm(\n  mode: RequisitionListFormMode,\n  requisitionListUid?: string,\n  onSuccess?: (rl: RequisitionList) => void,\n  onError?: (msg: string) => void\n): UseRequisitionListFormReturn {\n  const [error, setError] = useState<string | null>(null);\n\n  const submit = async (\n    values: RequisitionListFormValues\n  ): Promise<RequisitionList | null> => {\n    setError(null);\n    try {\n      const description = values.description ?? '';\n      const result =\n        mode === 'update' && requisitionListUid\n          ? await updateRequisitionList(\n              requisitionListUid,\n              values.name,\n              description\n            )\n          : await createRequisitionList(values.name, description);\n      if (result) onSuccess?.(result);\n      return result;\n    } catch (e: any) {\n      const msg = e?.message || 'Unexpected error';\n      setError(msg);\n      onError?.(msg);\n      return null;\n    }\n  };\n\n  return { error, submit };\n}\n","/********************************************************************\n * ADOBE CONFIDENTIAL\n * __________________\n *\n *  Copyright 2025 Adobe\n *  All Rights Reserved.\n *\n * NOTICE:  All information contained herein is, and remains\n * the property of Adobe and its suppliers, if any. The intellectual\n * and technical concepts contained herein are proprietary to Adobe\n * and its suppliers and are protected by all applicable intellectual\n * property laws, including trade secret and copyright laws.\n * Dissemination of this information or reproduction of this material\n * is strictly forbidden unless prior written permission is obtained\n * from Adobe.\n *******************************************************************/\n\nimport { Container } from '@adobe-commerce/elsie/lib';\nimport { RequisitionListForm as RequisitionListFormComponent } from '@/requisitionList/components/RequisitionListForm/RequisitionListForm';\nimport {\n  useRequisitionListForm,\n  RequisitionListFormMode,\n  RequisitionListFormValues,\n} from '@/requisitionList/hooks/useRequisitionListForm';\nimport { RequisitionList } from '@/requisitionList/data/models/requisitionList';\n\nexport interface RequisitionListFormProps {\n  mode: RequisitionListFormMode;\n  requisitionListUid?: string;\n  defaultValues?: RequisitionListFormValues;\n  onSuccess?: (newList: RequisitionList) => void;\n  onError?: (message: string) => void;\n  onCancel: () => void;\n}\n\nexport const RequisitionListForm: Container<RequisitionListFormProps> = ({\n  mode,\n  requisitionListUid,\n  defaultValues = { name: '', description: '' },\n  onSuccess,\n  onError,\n  onCancel,\n}) => {\n  const { error, submit } = useRequisitionListForm(\n    mode,\n    requisitionListUid,\n    onSuccess,\n    onError\n  );\n\n  const handleSubmit = async (values: RequisitionListFormValues) => {\n    await submit(values);\n  };\n\n  return (\n    <RequisitionListFormComponent\n      mode={mode}\n      defaultValues={defaultValues}\n      error={error}\n      onSubmit={handleSubmit}\n      onCancel={onCancel}\n    />\n  );\n};\n"],"names":["CREATE_REQUISITION_LIST_MUTATION","REQUISITION_LIST_FRAGMENT","createRequisitionList","name","description","fetchGraphQl","errors","data","handleFetchError","_a","payload","transformRequisitionList","events","useRequisitionListForm","mode","requisitionListUid","onSuccess","onError","error","setError","useState","values","result","updateRequisitionList","e","msg","RequisitionListForm","defaultValues","onCancel","submit","jsx","RequisitionListFormComponent"],"mappings":"6RAmBO,MAAMA,EAAmC;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA,EAgB9CC,CAAyB;AAAA,ECXdC,EAAwB,MACnCC,EACAC,IAEOC,EAAaL,EAAkC,CACpD,UAAW,CACT,oBAAqBG,EACrB,2BAA4BC,CAAA,CAC9B,CACD,EAAE,KAAK,CAAC,CAAE,OAAAE,EAAQ,KAAAC,KAAW,OAC5B,GAAID,EAAQ,OAAOE,EAAiBF,CAAM,EAE1C,GAAI,GAACG,EAAAF,GAAA,YAAAA,EAAM,wBAAN,MAAAE,EAA6B,kBAChC,OAAO,KAGT,MAAMC,EAAUC,EACdJ,EAAK,sBAAsB,gBAAA,EAE7B,OAAAK,EAAO,KAAK,uBAAwBF,CAAO,EACpCA,CACT,CAAC,ECbI,SAASG,EACdC,EACAC,EACAC,EACAC,EAC8B,CAC9B,KAAM,CAACC,EAAOC,CAAQ,EAAIC,EAAwB,IAAI,EA0BtD,MAAO,CAAE,MAAAF,EAAO,OAxBD,MACbG,GACoC,CACpCF,EAAS,IAAI,EACb,GAAI,CACF,MAAMf,EAAciB,EAAO,aAAe,GACpCC,EACJR,IAAS,UAAYC,EACjB,MAAMQ,EACJR,EACAM,EAAO,KACPjB,CAAA,EAEF,MAAMF,EAAsBmB,EAAO,KAAMjB,CAAW,EAC1D,OAAIkB,eAAoBA,IACjBA,CACT,OAASE,EAAQ,CACf,MAAMC,GAAMD,GAAA,YAAAA,EAAG,UAAW,mBAC1B,OAAAL,EAASM,CAAG,EACZR,GAAA,MAAAA,EAAUQ,GACH,IACT,CACF,CAEgB,CAClB,CC9BO,MAAMC,EAA2D,CAAC,CACvE,KAAAZ,EACA,mBAAAC,EACA,cAAAY,EAAgB,CAAE,KAAM,GAAI,YAAa,EAAA,EACzC,UAAAX,EACA,QAAAC,EACA,SAAAW,CACF,IAAM,CACJ,KAAM,CAAE,MAAAV,EAAO,OAAAW,CAAA,EAAWhB,EACxBC,EACAC,EACAC,EACAC,CAAA,EAOF,OACEa,EAACC,EAAA,CACC,KAAAjB,EACA,cAAAa,EACA,MAAAT,EACA,SATiB,MAAOG,GAAsC,CAChE,MAAMQ,EAAOR,CAAM,CACrB,EAQI,SAAAO,CAAA,CAAA,CAGN"}