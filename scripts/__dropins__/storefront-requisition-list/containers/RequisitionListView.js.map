{"version":3,"file":"RequisitionListView.js","sources":["../../node_modules/@adobe-commerce/elsie/src/icons/Cart.svg","../../node_modules/@adobe-commerce/elsie/src/icons/Minus.svg","../../node_modules/@adobe-commerce/elsie/src/icons/Trash.svg","/@dropins/storefront-requisition-list/src/hooks/useRequisitionListSelectedItems.ts","/@dropins/storefront-requisition-list/src/components/ProductListTable/ProductListTable.tsx","/@dropins/storefront-requisition-list/src/components/BatchActions/BatchActions.tsx","/@dropins/storefront-requisition-list/src/containers/RequisitionListView/RequisitionListView.tsx"],"sourcesContent":["import * as React from \"react\";\nconst SvgCart = (props) => /* @__PURE__ */ React.createElement(\"svg\", { width: 24, height: 24, viewBox: \"0 0 24 24\", fill: \"none\", xmlns: \"http://www.w3.org/2000/svg\", ...props }, /* @__PURE__ */ React.createElement(\"g\", { clipPath: \"url(#clip0_102_196)\" }, /* @__PURE__ */ React.createElement(\"path\", { vectorEffect: \"non-scaling-stroke\", d: \"M18.3601 18.16H6.5601L4.8801 3H2.3501M19.6701 19.59C19.6701 20.3687 19.0388 21 18.2601 21C17.4814 21 16.8501 20.3687 16.8501 19.59C16.8501 18.8113 17.4814 18.18 18.2601 18.18C19.0388 18.18 19.6701 18.8113 19.6701 19.59ZM7.42986 19.59C7.42986 20.3687 6.79858 21 6.01986 21C5.24114 21 4.60986 20.3687 4.60986 19.59C4.60986 18.8113 5.24114 18.18 6.01986 18.18C6.79858 18.18 7.42986 18.8113 7.42986 19.59Z\", stroke: \"currentColor\", strokeLinejoin: \"round\" }), /* @__PURE__ */ React.createElement(\"path\", { vectorEffect: \"non-scaling-stroke\", d: \"M5.25 6.37L20.89 8.06L20.14 14.8H6.19\", stroke: \"currentColor\", strokeLinejoin: \"round\" })), /* @__PURE__ */ React.createElement(\"defs\", null, /* @__PURE__ */ React.createElement(\"clipPath\", { id: \"clip0_102_196\" }, /* @__PURE__ */ React.createElement(\"rect\", { vectorEffect: \"non-scaling-stroke\", width: 19.29, height: 19.5, fill: \"white\", transform: \"translate(2.3501 2.25)\" }))));\nexport default SvgCart;\n","import * as React from \"react\";\nconst SvgMinus = (props) => /* @__PURE__ */ React.createElement(\"svg\", { width: 24, height: 24, viewBox: \"0 0 24 24\", fill: \"none\", xmlns: \"http://www.w3.org/2000/svg\", ...props }, /* @__PURE__ */ React.createElement(\"path\", { d: \"M17.3332 11.75H6.6665\", strokeWidth: 1, strokeLinecap: \"square\", strokeLinejoin: \"round\", vectorEffect: \"non-scaling-stroke\", fill: \"none\", stroke: \"currentColor\" }));\nexport default SvgMinus;\n","import * as React from \"react\";\nconst SvgTrash = (props) => /* @__PURE__ */ React.createElement(\"svg\", { xmlns: \"http://www.w3.org/2000/svg\", width: 24, height: 24, viewBox: \"0 0 24 24\", fill: \"none\", ...props }, /* @__PURE__ */ React.createElement(\"path\", { vectorEffect: \"non-scaling-stroke\", d: \"M1 5H23\", stroke: \"currentColor\", strokeWidth: 1, strokeMiterlimit: 10 }), /* @__PURE__ */ React.createElement(\"path\", { vectorEffect: \"non-scaling-stroke\", d: \"M17.3674 22H6.63446C5.67952 22 4.88992 21.2688 4.8379 20.3338L4 5H20L19.1621 20.3338C19.1119 21.2688 18.3223 22 17.3655 22H17.3674Z\", stroke: \"currentColor\", strokeWidth: 1, strokeMiterlimit: 10 }), /* @__PURE__ */ React.createElement(\"path\", { vectorEffect: \"non-scaling-stroke\", d: \"M9.87189 2H14.1281C14.6085 2 15 2.39766 15 2.88889V5H9V2.88889C9 2.39912 9.39006 2 9.87189 2Z\", stroke: \"currentColor\", strokeWidth: 1, strokeMiterlimit: 10 }), /* @__PURE__ */ React.createElement(\"path\", { vectorEffect: \"non-scaling-stroke\", d: \"M8.87402 8.58057L9.39348 17.682\", stroke: \"currentColor\", strokeWidth: 1, strokeMiterlimit: 10 }), /* @__PURE__ */ React.createElement(\"path\", { vectorEffect: \"non-scaling-stroke\", d: \"M14.6673 8.58057L14.146 17.682\", stroke: \"currentColor\", strokeWidth: 1, strokeMiterlimit: 10 }));\nexport default SvgTrash;\n","/********************************************************************\n * ADOBE CONFIDENTIAL\n * __________________\n *\n *  Copyright 2025 Adobe\n *  All Rights Reserved.\n *\n * NOTICE:  All information contained herein is, and remains\n * the property of Adobe and its suppliers, if any. The intellectual\n * and technical concepts contained herein are proprietary to Adobe\n * and its suppliers and are protected by all applicable intellectual\n * property laws, including trade secret and copyright laws.\n * Dissemination of this information or reproduction of this material\n * is strictly forbidden unless prior written permission is obtained\n * from Adobe.\n *******************************************************************/\n\nimport { useState, useCallback } from 'preact/hooks';\nimport { Item } from '@/requisitionList/data/models/item';\nimport { RequisitionList } from '@/requisitionList/data/models/requisitionList';\n\ntype UseRequisitionListSelectedItems = {\n  currentRequisitionList: RequisitionList | null;\n  setCurrentRequisitionList: (\n    value:\n      | RequisitionList\n      | null\n      | ((prev: RequisitionList | null) => RequisitionList | null)\n  ) => void;\n  selectedItems: Set<string>;\n  setSelectedItems: (\n    value: Set<string> | ((prev: Set<string>) => Set<string>)\n  ) => void;\n  handleItemSelection: (itemUid: string, isSelected: boolean) => void;\n  handleSelectAll: () => void;\n  handleSelectNone: () => void;\n};\n\nexport function useRequisitionListSelectedItems(): UseRequisitionListSelectedItems {\n  const [currentRequisitionList, setCurrentRequisitionList] =\n    useState<RequisitionList | null>(null);\n  const [selectedItems, setSelectedItems] = useState<Set<string>>(new Set());\n\n  const handleItemSelection = useCallback(\n    (itemUid: string, isSelected: boolean) => {\n      setSelectedItems((prev: Set<string>) => {\n        const newSet = new Set(prev);\n        if (isSelected) {\n          newSet.add(itemUid);\n        } else {\n          newSet.delete(itemUid);\n        }\n        return newSet;\n      });\n    },\n    []\n  );\n\n  const handleSelectAll = useCallback(() => {\n    const allItemUids = currentRequisitionList?.items?.map(\n      (item: Item) => item.uid\n    );\n    setSelectedItems(new Set(allItemUids));\n  }, [currentRequisitionList]);\n\n  const handleSelectNone = useCallback(() => {\n    setSelectedItems(new Set());\n  }, []);\n\n  return {\n    currentRequisitionList,\n    setCurrentRequisitionList,\n    selectedItems,\n    setSelectedItems,\n    handleItemSelection,\n    handleSelectAll,\n    handleSelectNone,\n  };\n}\n","/********************************************************************\n * ADOBE CONFIDENTIAL\n * __________________\n *\n *  Copyright 2025 Adobe\n *  All Rights Reserved.\n *\n * NOTICE:  All information contained herein is, and remains\n * the property of Adobe and its suppliers, if any. The intellectual\n * and technical concepts contained herein are proprietary to Adobe\n * and its suppliers and are protected by all applicable intellectual\n * property laws, including trade secret and copyright laws.\n * Dissemination of this information or reproduction of this material\n * is strictly forbidden unless prior written permission is obtained\n * from Adobe.\n *******************************************************************/\n\nimport { FunctionComponent, h } from 'preact';\nimport { useState } from 'preact/hooks';\nimport { HTMLAttributes, ChangeEvent } from 'preact/compat';\nimport { classes, VComponent } from '@adobe-commerce/elsie/lib';\nimport {\n  Icon,\n  Table,\n  Checkbox,\n  Price,\n  Button,\n  Field,\n  Input,\n  Image,\n} from '@adobe-commerce/elsie/components';\nimport { Trash, Cart } from '@adobe-commerce/elsie/icons';\nimport '@/requisitionList/components/ProductListTable/ProductListTable.css';\nimport { RequisitionListModel } from '@/requisitionList/data/models/requisitionList';\nimport { Item, BundleOption } from '@/requisitionList/data/models/item';\nimport { useText } from '@adobe-commerce/elsie/i18n';\n\nexport interface ProductListTableProps\n  extends HTMLAttributes<HTMLDivElement | HTMLFormElement> {\n  className?: string;\n  items: RequisitionListModel['items'];\n  selectedItems: Set<string>;\n  currentPage: number;\n  pageSize: number;\n  canEdit?: boolean;\n  handleItemSelection: (itemUid: string, isSelected: boolean) => void;\n  handleUpdateQuantity: (itemUid: string, newQuantity: number) => Promise<void>;\n  onAddToCart: (itemUids: string[] | undefined) => void;\n  onDeleteItem: (itemUids: string[] | undefined) => void;\n}\n\nexport const ProductListTable: FunctionComponent<ProductListTableProps> = ({\n  className,\n  items,\n  selectedItems,\n  currentPage,\n  pageSize,\n  canEdit = true,\n  handleItemSelection,\n  handleUpdateQuantity,\n  onAddToCart,\n  onDeleteItem,\n  ...props\n}) => {\n  const [disabledInputs, setDisabledInputs] = useState<Record<string, boolean>>(\n    {}\n  );\n  const [inputValues, setInputValues] = useState<Record<string, number>>({});\n\n  const translations = useText({\n    productNameHeader:\n      'RequisitionList.RequisitionListView.productListTable.headers.productName',\n    skuHeader:\n      'RequisitionList.RequisitionListView.productListTable.headers.sku',\n    priceHeader:\n      'RequisitionList.RequisitionListView.productListTable.headers.price',\n    quantityHeader:\n      'RequisitionList.RequisitionListView.productListTable.headers.quantity',\n    subtotalHeader:\n      'RequisitionList.RequisitionListView.productListTable.headers.subtotal',\n    actionsHeader:\n      'RequisitionList.RequisitionListView.productListTable.headers.actions',\n    actionAddToCart: 'RequisitionList.RequisitionListView.actionAddToCart',\n    actionDelete: 'RequisitionList.RequisitionListView.actionDelete',\n    actionSelect: 'RequisitionList.RequisitionListView.actionSelect',\n    itemQuantity:\n      'RequisitionList.RequisitionListView.productListTable.itemQuantity',\n    outOfStock:\n      'RequisitionList.RequisitionListView.productListTable.outOfStock',\n    onlyXLeftInStock:\n      'RequisitionList.RequisitionListView.productListTable.onlyXLeftInStock',\n  });\n  const columns = [\n    {\n      label: '#',\n      key: 'index',\n    },\n    {\n      label: 'item',\n      key: 'item',\n    },\n    {\n      label: translations.priceHeader,\n      key: 'price',\n    },\n    {\n      label: translations.quantityHeader,\n      key: 'quantity',\n    },\n    {\n      label: translations.subtotalHeader,\n      key: 'subtotal',\n    },\n  ];\n\n  if (canEdit) {\n    columns.unshift({\n      label: translations.actionSelect,\n      key: 'selector',\n    });\n    columns.push({\n      label: translations.actionsHeader,\n      key: 'actions',\n    });\n  }\n\n  const handleItemCheckboxChange = (\n    event: ChangeEvent<HTMLInputElement>,\n    item: Item\n  ) => {\n    const isSelected = (event.target as HTMLInputElement).checked;\n    handleItemSelection(item.uid, isSelected);\n  };\n\n  const getRowIndex = (index: number): number => {\n    return (currentPage - 1) * pageSize + index + 1;\n  };\n\n  const getImageAlt = (item: Item): string => {\n    return item.configured_product?.name || item.product?.name || item.sku;\n  };\n\n  const getImageSrc = (item: Item): string => {\n    return item.configured_product?.images?.length\n      ? item.configured_product.images[0]?.url || ''\n      : item.product?.images?.length\n      ? item.product.images[0]?.url || ''\n      : '';\n  };\n\n  const getProductName = (item: Item): string | undefined => {\n    return item.product?.name || item.sku;\n  };\n\n  const getConfiguredProductName = (item: Item): string | undefined => {\n    return item.configured_product?.name;\n  };\n\n  const getBundleProducts = (\n    item: Item\n  ): h.JSX<HTMLSpanElement>[] | undefined => {\n    if (!item.bundle_options) {\n      return;\n    }\n\n    const bundleProducts = item.bundle_options.map(\n      (option: BundleOption, index: number): h.JSX<HTMLSpanElement> => {\n        return (\n          <span\n            key={option.values[0].label || index}\n            className=\"requisition-list-view-product-list-table__product-configurable-name\"\n          >\n            {option.values[0]!.label} x {option.values[0]!.quantity}\n          </span>\n        );\n      }\n    );\n    return bundleProducts;\n  };\n\n  const getSku = (item: Item): string | undefined => {\n    return item.configured_product?.sku || item.sku;\n  };\n\n  const getPriceAmount = (item: Item): number => {\n    if (Array.isArray(item.bundle_options) && item.bundle_options.length > 0) {\n      return item.bundle_options.reduce(\n        (previousValue: number, option: BundleOption): number => {\n          return (\n            previousValue +\n            (option.values[0]?.priceV2?.value || 0) *\n              (option.values[0]?.quantity || 0)\n          );\n        },\n        0\n      );\n    }\n    return (\n      item.configured_product?.price?.final?.amount?.value ||\n      item.product?.price?.final?.amount?.value ||\n      0\n    );\n  };\n\n  const getPriceCurrency = (item: Item): string | undefined => {\n    return (\n      item.configured_product?.price?.final?.amount?.currency ||\n      item.product?.price?.final?.amount?.currency\n    );\n  };\n\n  const getSubtotal = (item: Item): number => {\n    return getPriceAmount(item) * item.quantity;\n  };\n\n  const handleInputChange = (e: ChangeEvent<HTMLInputElement>, item: Item) => {\n    const inputValue = +(e.target as HTMLInputElement).value;\n    if (inputValue > 0 && !Number.isNaN(e.target.value)) {\n      setInputValues((prev) => ({ ...prev, [item.uid]: inputValue }));\n    }\n  };\n\n  const handleInputBlur = async (e: FocusEvent, item: Item) => {\n    let newQty = +(e.target as HTMLInputElement).value;\n\n    if ((newQty > 0 && newQty !== item.quantity) === false) {\n      setInputValues((prev) => ({ ...prev, [item.uid]: item.quantity }));\n      return;\n    }\n    setDisabledInputs((prev) => ({ ...prev, [item.uid]: true }));\n    try {\n      await handleUpdateQuantity(item.uid, newQty);\n    } finally {\n      setDisabledInputs((prev) => ({ ...prev, [item.uid]: false }));\n    }\n  };\n\n  const rowData = items.map((item: Item, index: number) => {\n    return {\n      selector: (\n        <label id={`item-selector-${item.sku}-label`}>\n          <Checkbox\n            className=\"requisition-list-view-product-list-table__checkbox\"\n            name={`item-selector-${item.sku}`}\n            aria-label={`${translations.actionSelect} ${getProductName(item)}`}\n            data-testid={`item-checkbox-${item.sku}`}\n            onChange={(e: ChangeEvent<HTMLInputElement>) =>\n              handleItemCheckboxChange(e, item)\n            }\n            value={item.sku}\n            checked={selectedItems.has(item.uid)}\n          />\n        </label>\n      ),\n      index: (\n        <div className=\"requisition-list-view-product-list-table__index-container\">\n          {getRowIndex(index)}\n        </div>\n      ),\n      item: (\n        <div className=\"requisition-list-view-product-list-table__item-container\">\n          <Image\n            className=\"requisition-list-view-product-list-table__thumbnail\"\n            alt={getImageAlt(item)}\n            src={getImageSrc(item)}\n          />\n          <div className=\"requisition-list-view-product-list-table__item-details\">\n            <div className=\"requisition-list-view-product-list-table__product-name\">\n              {getProductName(item)}\n            </div>\n            {item.stock_status === 'OUT_OF_STOCK' && (\n              <div className=\"requisition-list-view-product-list-table__out-of-stock\">\n                {translations.outOfStock}\n              </div>\n            )}\n            {item.stock_status !== 'OUT_OF_STOCK' &&\n              item.only_x_left_in_stock !== null &&\n              item.only_x_left_in_stock < item.quantity && (\n                <div className=\"requisition-list-view-product-list-table__low-stock\">\n                  {translations.onlyXLeftInStock.replace(\n                    '{count}',\n                    String(item.only_x_left_in_stock)\n                  )}\n                </div>\n              )}\n            <span className=\"requisition-list-view-product-list-table__product-configurable-name\">\n              {getConfiguredProductName(item)}\n            </span>\n            <div className=\"requisition-list-view-product-list-table__sku\">\n              {getSku(item)}\n            </div>\n            {getBundleProducts(item)}\n          </div>\n        </div>\n      ),\n      price: (\n        <Price\n          className=\"requisition-list-view-product-list-table__price\"\n          amount={getPriceAmount(item)}\n          currency={getPriceCurrency(item)}\n        />\n      ),\n      quantity: (\n        <span className=\"requisition-list-view-product-list-table__quantity\">\n          <Field disabled={!!disabledInputs[item.uid]}>\n            <Input\n              id={`requisition-list-item-quantity-${item.sku}`}\n              data-testid={`requisition-list-item-quantity-${item.sku}`}\n              name=\"quantity\"\n              type=\"text\"\n              aria-label={`${translations.itemQuantity} - ${getProductName(\n                item\n              )}`}\n              value={inputValues[item.uid] ?? item.quantity}\n              onChange={(e: ChangeEvent<HTMLInputElement>) =>\n                handleInputChange(e, item)\n              }\n              onBlur={(e: FocusEvent) => handleInputBlur(e, item)}\n            />\n          </Field>\n        </span>\n      ),\n      subtotal: (\n        <Price\n          className=\"requisition-list-view-product-list-table__price\"\n          amount={getSubtotal(item)}\n          currency={getPriceCurrency(item)}\n        />\n      ),\n      actions: (\n        <div className=\"requisition-list-view__bulk-actions\">\n          <Button\n            type=\"button\"\n            onClick={() => onAddToCart([item.uid])}\n            icon={<Icon source={Cart} />}\n            aria-label={`${translations.actionAddToCart} - ${getProductName(\n              item\n            )}`}\n            data-testid=\"product-list-table-add-to-cart-button\"\n          />\n          <Button\n            type=\"button\"\n            variant=\"secondary\"\n            icon={<Icon source={Trash} />}\n            onClick={() => onDeleteItem([item.uid])}\n            aria-label={`${translations.actionDelete} - ${getProductName(\n              item\n            )}`}\n            data-testid=\"product-list-table-delete-button\"\n          />\n        </div>\n      ),\n    };\n  });\n\n  const table = (\n    <Table\n      columns={columns}\n      rowData={rowData}\n      data-testid=\"product-list-table\"\n      mobileLayout=\"stacked\"\n    />\n  );\n\n  return (\n    <VComponent\n      node={h('div', {})}\n      className={classes([\n        'requisition-list-view-product-list-table-container',\n        className,\n      ])}\n      data-testid=\"product-list-table-container\"\n      {...props}\n    >\n      {table}\n    </VComponent>\n  );\n};\n","/********************************************************************\n * ADOBE CONFIDENTIAL\n * __________________\n *\n *  Copyright 2025 Adobe\n *  All Rights Reserved.\n *\n * NOTICE:  All information contained herein is, and remains\n * the property of Adobe and its suppliers, if any. The intellectual\n * and technical concepts contained herein are proprietary to Adobe\n * and its suppliers and are protected by all applicable intellectual\n * property laws, including trade secret and copyright laws.\n * Dissemination of this information or reproduction of this material\n * is strictly forbidden unless prior written permission is obtained\n * from Adobe.\n *******************************************************************/\n\nimport { FunctionComponent } from 'preact';\nimport { HTMLAttributes } from 'preact/compat';\nimport { Button, Icon } from '@adobe-commerce/elsie/components';\nimport { Trash, Minus } from '@adobe-commerce/elsie/icons';\nimport '@/requisitionList/components/BatchActions/BatchActions.css';\nimport { useText } from '@adobe-commerce/elsie/i18n';\n\nexport interface BatchActionsProps\n  extends HTMLAttributes<HTMLDivElement | HTMLFormElement> {\n  selectedItems: Set<string>;\n  deletingItemId: string | null;\n  addingToCartItemId: string | null;\n  bulkAddingToCart: boolean;\n  updatingQuantityItemId: string | null;\n  onSelectAll: () => void;\n  onSelectNone: () => void;\n  onBulkAddToCart: () => void;\n  onBulkDelete: () => void;\n}\n\nexport const BatchActions: FunctionComponent<BatchActionsProps> = ({\n  selectedItems,\n  deletingItemId,\n  addingToCartItemId,\n  bulkAddingToCart,\n  updatingQuantityItemId,\n  onSelectAll,\n  onSelectNone,\n  onBulkAddToCart,\n  onBulkDelete,\n}) => {\n  const translations = useText({\n    statusDeleting: `RequisitionList.RequisitionListView.statusDeleting`,\n    actionSelectAll: `RequisitionList.RequisitionListView.actionSelectAll`,\n    actionSelectNone: `RequisitionList.RequisitionListView.actionSelectNone`,\n    actionAddToCart: `RequisitionList.RequisitionListView.actionAddToCart`,\n    actionDeleteSelectedItems: `RequisitionList.RequisitionListView.actionDeleteSelectedItems`,\n    statusBulkAddingToCart: `RequisitionList.RequisitionListView.statusBulkAddingToCart`,\n  });\n\n  const isDisabled =\n    deletingItemId !== null ||\n    addingToCartItemId !== null ||\n    bulkAddingToCart ||\n    updatingQuantityItemId !== null;\n\n  const hasSelectedItems = selectedItems.size > 0;\n\n  return (\n    <div className=\"requisition-list-view__batch-actions\">\n      <div className=\"requisition-list-view__batch-actions-left\">\n        <button\n          data-testid=\"bulk-actions-select-toggle-btn\"\n          type=\"button\"\n          className={`requisition-list-view__batch-actions-select-toggle ${\n            hasSelectedItems\n              ? 'requisition-list-view__batch-actions-select-toggle--active'\n              : ''\n          }`}\n          onClick={hasSelectedItems ? onSelectNone : onSelectAll}\n          disabled={isDisabled}\n          aria-label={\n            hasSelectedItems\n              ? translations.actionSelectNone\n              : translations.actionSelectAll\n          }\n        >\n          <Icon source={Minus} />\n        </button>\n        <button\n          type=\"button\"\n          className=\"requisition-list-view__batch-actions-select-label\"\n          onClick={hasSelectedItems ? onSelectNone : onSelectAll}\n          disabled={isDisabled}\n        >\n          {translations.actionSelectAll}\n        </button>\n      </div>\n\n      {hasSelectedItems && (\n        <div className=\"requisition-list-view__batch-actions-buttons\">\n          <span\n            className=\"requisition-list-view__batch-actions-count-badge\"\n            aria-label={`${selectedItems.size} items selected`}\n          >\n            {selectedItems.size}\n          </span>\n          <Button\n            data-testid=\"bulk-actions-add-to-cart-btn\"\n            type=\"button\"\n            variant=\"secondary\"\n            onClick={onBulkAddToCart}\n            disabled={isDisabled}\n          >\n            {bulkAddingToCart\n              ? translations.statusBulkAddingToCart\n              : translations.actionAddToCart}\n          </Button>\n          <button\n            data-testid=\"bulk-actions-delete-btn\"\n            type=\"button\"\n            className=\"requisition-list-view__batch-actions-delete-icon\"\n            onClick={onBulkDelete}\n            disabled={isDisabled}\n            aria-label={translations.actionDeleteSelectedItems}\n          >\n            <Icon source={Trash} />\n          </button>\n        </div>\n      )}\n    </div>\n  );\n};\n","/********************************************************************\n * ADOBE CONFIDENTIAL\n * __________________\n *\n *  Copyright 2025 Adobe\n *  All Rights Reserved.\n *\n * NOTICE:  All information contained herein is, and remains\n * the property of Adobe and its suppliers, if any. The intellectual\n * and technical concepts contained herein are proprietary to Adobe\n * and its suppliers and are protected by all applicable intellectual\n * property laws, including trade secret and copyright laws.\n * Dissemination of this information or reproduction of this material\n * is strictly forbidden unless prior written permission is obtained\n * from Adobe.\n *******************************************************************/\nimport {\n  HTMLAttributes,\n  useState,\n  useCallback,\n  useEffect,\n} from 'preact/compat';\nimport { Container } from '@adobe-commerce/elsie/lib';\nimport { useText } from '@adobe-commerce/elsie/i18n';\nimport {\n  addRequisitionListItemsToCart,\n  AddToCartError,\n} from '@/requisitionList/api/addRequisitionListItemsToCart';\nimport { deleteRequisitionListItems } from '@/requisitionList/api/deleteRequisitionListItems';\nimport { getProductData } from '@/requisitionList/api/getProductData';\nimport { updateRequisitionListItems } from '@/requisitionList/api/updateRequisitionListItems';\nimport { getRequisitionList } from '@/requisitionList/api/getRequisitionList';\nimport {\n  Pagination,\n  InLineAlert,\n  ProgressSpinner,\n} from '@adobe-commerce/elsie/components';\nimport { Item, Product } from '@/requisitionList/data/models/item';\nimport { RequisitionList } from '@/requisitionList/data/models/requisitionList';\nimport { events } from '@adobe-commerce/event-bus';\nimport {\n  PageSizePicker,\n  EmptyList,\n  NotFound,\n  RequisitionListModal,\n  PaginationItemsCounter,\n} from '@/requisitionList/components';\nimport { ProductListTable } from '@/requisitionList/components/ProductListTable/ProductListTable';\nimport { BatchActions } from '@/requisitionList/components/BatchActions/BatchActions';\nimport { RequisitionListHeader } from '@/requisitionList/containers/RequisitionListHeader';\nimport { useRequisitionListSelectedItems } from '@/requisitionList/hooks/useRequisitionListSelectedItems';\nimport { useRequisitionListAlert } from '@/requisitionList/hooks/useRequisitionListAlert';\nimport { useRequisitionListEnabled } from '@/requisitionList/hooks/useRequisitionListEnabled';\nimport { isValidBase64Uid } from '@/requisitionList/lib/validate-uid';\nimport { DEFAULT_PAGE_SIZE } from '@/requisitionList/lib/constants';\nimport '@/requisitionList/containers/RequisitionListView/RequisitionListView.css';\n\nexport interface RequisitionListViewProps\n  extends HTMLAttributes<HTMLDivElement> {\n  /**\n   * The UID of the requisition list to display.\n   * The UID must be a base64-encoded string.\n   * If an invalid UID is provided, the component will render the NotFound state.\n   * The component will fetch the requisition list data internally.\n   */\n  requisitionListUid: string;\n  /**\n   * When true, skips automatic product data fetching on component mount.\n   * Used in tests to prevent API calls.\n   */\n  skipProductLoading?: boolean;\n  /**\n   * Number of items per page for pagination.\n   * Defaults to DEFAULT_PAGE_SIZE.\n   */\n  pageSize?: number;\n  selectedItems: Set<string>;\n  /**\n   * Function that returns the URL to the requisition list grid view or performs navigation\n   */\n  routeRequisitionListGrid?: () => string | void;\n  /**\n   * Fallback URL to redirect when requisition lists are not enabled.\n   * Defaults to '/customer/account'\n   */\n  fallbackRoute?: string;\n}\n\nexport const RequisitionListView: Container<RequisitionListViewProps> = ({\n  requisitionListUid,\n  skipProductLoading = false,\n  pageSize = DEFAULT_PAGE_SIZE,\n  routeRequisitionListGrid,\n  fallbackRoute = '/customer/account',\n}: RequisitionListViewProps) => {\n  const [loadingProducts, setLoadingProducts] = useState<boolean>(false);\n  const [deletingItemId, setDeletingItemId] = useState<string | null>(null);\n  const [addingToCartItemId, setAddingToCartItemId] = useState<\n    string[] | undefined\n  >(null);\n  const [bulkAddingToCart, setBulkAddingToCart] = useState<boolean>(false);\n  const [updatingQuantityItemId, setUpdatingQuantityItemId] = useState<\n    string | null\n  >(null);\n  const [loadingPage, setLoadingPage] = useState<boolean>(false);\n  const [currentPageSize, setCurrentPageSize] = useState<number>(pageSize);\n  const [initializing, setInitializing] = useState<boolean>(true);\n  const [showDeleteModal, setShowDeleteModal] = useState<boolean>(false);\n  const [itemsToDelete, setItemsToDelete] = useState<string[]>([]);\n\n  const {\n    currentRequisitionList,\n    setCurrentRequisitionList,\n    selectedItems,\n    setSelectedItems,\n    handleItemSelection,\n    handleSelectAll,\n    handleSelectNone,\n  } = useRequisitionListSelectedItems();\n\n  const translations = useText({\n    emptyRequisitionList: `RequisitionList.RequisitionListView.emptyRequisitionList`,\n    errorLoadingProducts: `RequisitionList.RequisitionListView.errorLoadingProducts`,\n    errorLoadPage: `RequisitionList.RequisitionListView.errorLoadPage`,\n    notFoundTitle: `RequisitionList.RequisitionListView.notFoundTitle`,\n    notFoundMessage: `RequisitionList.RequisitionListView.notFoundMessage`,\n    notFoundActionLabel: `RequisitionList.RequisitionListView.notFoundActionLabel`,\n    notEnabledTitle: `RequisitionList.RequisitionListsNotEnabled.title`,\n    notEnabledMessage: `RequisitionList.RequisitionListsNotEnabled.message`,\n    partialMoveSuccess: `RequisitionList.RequisitionListAlert.partialMoveSuccess`,\n    notEnabledActionLabel: `RequisitionList.RequisitionListsNotEnabled.actionLabel`,\n    show: `RequisitionList.PageSizePicker.show`,\n    deleteItemsTitle: `RequisitionList.RequisitionListView.deleteItemsTitle`,\n    deleteItemsMessage: `RequisitionList.RequisitionListView.deleteItemsMessage`,\n    confirmAction: `RequisitionList.RequisitionListView.confirmAction`,\n    cancelAction: `RequisitionList.RequisitionListView.cancelAction`,\n  });\n\n  const { alert, setAlert, handleRequisitionListAlert } =\n    useRequisitionListAlert();\n\n  const { isEnabled } = useRequisitionListEnabled();\n\n  useEffect(() => {\n    const requisitionListEvent = events.on(\n      'requisitionList/data',\n      (payload: RequisitionList) => {\n        // Only update from events if it matches our current UID\n        if (payload?.uid === requisitionListUid) {\n          setCurrentRequisitionList(payload);\n          setSelectedItems(new Set());\n        }\n      }\n    );\n    // Keep event listener for cross-component alert communication\n    const alertEvent = events.on(\n      'requisitionList/alert',\n      handleRequisitionListAlert\n    );\n    return () => {\n      requisitionListEvent?.off();\n      alertEvent?.off();\n    };\n  }, [\n    handleRequisitionListAlert,\n    requisitionListUid,\n    setCurrentRequisitionList,\n    setSelectedItems,\n  ]);\n\n  // Sync pageSize prop changes to local state\n  useEffect(() => {\n    setCurrentPageSize(pageSize);\n  }, [pageSize]);\n\n  // Function to fetch and merge product data\n  const fetchAndMergeProducts = useCallback(\n    async (baseRequisitionList: RequisitionList) => {\n      // Extract SKUs from requisition list items\n      const productSkus =\n        baseRequisitionList.items?.map((item: Item) => item.sku) || [];\n\n      if (productSkus.length === 0) {\n        return baseRequisitionList;\n      }\n\n      setLoadingProducts(true);\n\n      try {\n        const fetchedProducts = await getProductData(productSkus);\n        if (fetchedProducts) {\n          // Create a map of SKU to Product for easy lookup\n          const productMap = new Map<string, Product>();\n          fetchedProducts.forEach((product: Product) => {\n            productMap.set(product.sku, product);\n          });\n\n          // Update requisition list items with fetched product data\n          return {\n            ...baseRequisitionList,\n            items: baseRequisitionList.items?.map((item: Item) => {\n              const fetchedProduct = productMap.get(item.sku);\n              return {\n                ...item,\n                product: fetchedProduct || item.product, // Use fetched product or keep existing\n                stock_status: (item.stock_status ||\n                  fetchedProduct?.stock_status ||\n                  'IN_STOCK') as 'IN_STOCK' | 'OUT_OF_STOCK',\n                only_x_left_in_stock:\n                  item.only_x_left_in_stock ??\n                  fetchedProduct?.only_x_left_in_stock ??\n                  null,\n              };\n            }),\n          };\n        }\n        console.warn('No products found');\n        return baseRequisitionList;\n      } catch (error) {\n        console.warn(\n          error instanceof Error\n            ? error.message\n            : translations.errorLoadingProducts\n        );\n        return baseRequisitionList;\n      } finally {\n        setLoadingProducts(false);\n      }\n    },\n    [translations.errorLoadingProducts]\n  );\n\n  // Initialize requisition list from UID\n  // Only triggers initial load when UID changes. Page size changes trigger pagination, not re-initialization.\n  useEffect(() => {\n    if (!requisitionListUid) {\n      setInitializing(false);\n      return;\n    }\n\n    // Only initialize if we don't have a list or if the UID changed\n    if (\n      currentRequisitionList &&\n      currentRequisitionList.uid === requisitionListUid\n    ) {\n      // Same list already loaded, don't re-initialize\n      return;\n    }\n\n    setInitializing(true);\n\n    const initializeFromUid = async () => {\n      try {\n        const fetchedList = await getRequisitionList(\n          requisitionListUid,\n          1,\n          pageSize\n        );\n\n        if (fetchedList) {\n          // Fetch and merge product data\n          if (!skipProductLoading) {\n            const enrichedList = await fetchAndMergeProducts(fetchedList);\n            setCurrentRequisitionList(enrichedList);\n          } else {\n            setCurrentRequisitionList(fetchedList);\n          }\n        }\n      } catch (error) {\n        console.error('Failed to initialize requisition list from UID:', error);\n      } finally {\n        setInitializing(false);\n      }\n    };\n\n    initializeFromUid();\n  }, [\n    requisitionListUid,\n    pageSize,\n    skipProductLoading,\n    fetchAndMergeProducts,\n    setCurrentRequisitionList,\n    currentRequisitionList,\n  ]);\n\n  const handleAddItemsToCart = useCallback(\n    async (itemUids: string[] | undefined) => {\n      if (itemUids && itemUids.length === 1) {\n        setBulkAddingToCart(false);\n        setAddingToCartItemId(itemUids);\n      } else {\n        setBulkAddingToCart(true);\n        setAddingToCartItemId(null);\n      }\n\n      try {\n        const errors = await addRequisitionListItemsToCart(\n          currentRequisitionList.uid,\n          itemUids\n        );\n\n        const totalItems = itemUids?.length || 0;\n        const errorCount = errors?.length || 0;\n        const successCount = totalItems - errorCount;\n\n        // Check for partial success: some items succeeded and some failed\n        if (errors && errors.length > 0 && successCount > 0) {\n          const alertPayload = {\n            action: 'move',\n            type: 'error',\n            context: 'product',\n            message: [\n              translations.partialMoveSuccess\n                .replace('{successCount}', String(successCount))\n                .replace('{failedCount}', String(errorCount)),\n            ],\n          };\n          handleRequisitionListAlert(alertPayload);\n          events.emit('requisitionList/alert', alertPayload);\n        } else if (errors && errors.length > 0) {\n          // All items failed\n          const alertPayload = {\n            action: 'move',\n            type: 'error',\n            context: 'product',\n            message: errors.map((e: AddToCartError) => e.message),\n          };\n          handleRequisitionListAlert(alertPayload);\n          events.emit('requisitionList/alert', alertPayload);\n        } else {\n          // All items succeeded\n          const alertPayload = {\n            action: 'move',\n            type: 'success',\n            context: 'product',\n          };\n          handleRequisitionListAlert(alertPayload);\n          events.emit('requisitionList/alert', alertPayload);\n        }\n      } catch (error) {\n        const alertPayload = {\n          action: 'move',\n          type: 'error',\n          context: 'product',\n        };\n        handleRequisitionListAlert(alertPayload);\n        events.emit('requisitionList/alert', alertPayload);\n      } finally {\n        setAddingToCartItemId(null);\n        setBulkAddingToCart(false);\n      }\n    },\n    [currentRequisitionList, handleRequisitionListAlert, translations]\n  );\n\n  const handleDeleteItems = useCallback((itemUids: string[] | undefined) => {\n    if (itemUids && itemUids.length > 0) {\n      setItemsToDelete(itemUids);\n      setShowDeleteModal(true);\n    }\n  }, []);\n\n  const handleConfirmDelete = useCallback(async () => {\n    if (itemsToDelete.length === 1) {\n      setDeletingItemId(itemsToDelete[0]);\n    } else {\n      setDeletingItemId('bulk');\n    }\n\n    try {\n      const updatedRequisitionList = await deleteRequisitionListItems(\n        currentRequisitionList.uid,\n        itemsToDelete,\n        currentPageSize,\n        currentRequisitionList.page_info.current_page\n      );\n\n      if (updatedRequisitionList) {\n        // Fetch and merge product data to ensure prices are loaded\n        const enrichedRequisitionList = await fetchAndMergeProducts(\n          updatedRequisitionList\n        );\n        setCurrentRequisitionList(enrichedRequisitionList);\n        handleRequisitionListAlert({\n          action: 'delete',\n          type: 'success',\n          context: 'product',\n        });\n      } else {\n        handleRequisitionListAlert({\n          action: 'delete',\n          type: 'error',\n          context: 'product',\n        });\n      }\n    } catch (error) {\n      handleRequisitionListAlert({\n        action: 'delete',\n        type: 'error',\n        context: 'product',\n      });\n    } finally {\n      setDeletingItemId(null);\n      setShowDeleteModal(false);\n      setItemsToDelete([]);\n    }\n  }, [\n    itemsToDelete,\n    currentRequisitionList,\n    currentPageSize,\n    fetchAndMergeProducts,\n    setCurrentRequisitionList,\n    handleRequisitionListAlert,\n  ]);\n\n  const handleUpdateQuantity = useCallback(\n    async (itemUid: string, newQuantity: number) => {\n      setUpdatingQuantityItemId(itemUid);\n\n      try {\n        // Find the current item to update\n        const currentItem = currentRequisitionList.items?.find(\n          (item: Item) => item.uid === itemUid\n        );\n        if (!currentItem) {\n          handleRequisitionListAlert({\n            action: 'update',\n            type: 'error',\n            context: 'product',\n          });\n          return;\n        }\n\n        // Create updated item with new quantity\n        const updatedItem = {\n          item_id: currentItem.uid,\n          entered_options: currentItem.entered_options,\n          selected_options: currentItem.selected_options,\n          quantity: newQuantity,\n        };\n\n        const updatedRequisitionList = await updateRequisitionListItems(\n          currentRequisitionList.uid,\n          [updatedItem],\n          currentPageSize,\n          currentRequisitionList.page_info.current_page\n        );\n\n        if (updatedRequisitionList) {\n          // Reload product data with updated quantities\n          const enrichedRequisitionList = await fetchAndMergeProducts(\n            updatedRequisitionList\n          );\n          setCurrentRequisitionList(enrichedRequisitionList);\n          handleRequisitionListAlert({\n            action: 'update',\n            type: 'success',\n            context: 'product',\n          });\n        } else {\n          handleRequisitionListAlert({\n            action: 'update',\n            type: 'error',\n            context: 'product',\n          });\n        }\n      } catch (error) {\n        handleRequisitionListAlert({\n          action: 'update',\n          type: 'error',\n          context: 'product',\n        });\n      } finally {\n        setUpdatingQuantityItemId(null);\n      }\n    },\n    [\n      currentRequisitionList,\n      fetchAndMergeProducts,\n      setCurrentRequisitionList,\n      currentPageSize,\n      handleRequisitionListAlert,\n    ]\n  );\n\n  const handlePageChange = useCallback(\n    async (page: number) => {\n      setLoadingPage(true);\n\n      try {\n        const updatedRequisitionList = await getRequisitionList(\n          currentRequisitionList.uid,\n          page,\n          currentPageSize\n        );\n\n        if (updatedRequisitionList) {\n          // Fetch product data for the new page\n          const updatedListWithProducts = await fetchAndMergeProducts(\n            updatedRequisitionList\n          );\n          setCurrentRequisitionList(updatedListWithProducts);\n        } else {\n          console.warn(translations.errorLoadPage);\n        }\n      } catch (error) {\n        console.warn(\n          error instanceof Error ? error.message : translations.errorLoadPage\n        );\n      } finally {\n        setLoadingPage(false);\n      }\n    },\n    [\n      currentRequisitionList?.uid,\n      fetchAndMergeProducts,\n      currentPageSize,\n      translations,\n      setCurrentRequisitionList,\n    ]\n  );\n\n  const handlePageSizeChange = useCallback(\n    async (newPageSize: number) => {\n      setCurrentPageSize(newPageSize);\n      setLoadingPage(true);\n\n      try {\n        // Reset to page 1 when changing page size\n        const updatedRequisitionList = await getRequisitionList(\n          currentRequisitionList.uid,\n          1,\n          newPageSize\n        );\n\n        if (updatedRequisitionList) {\n          // Fetch product data for the new page\n          const updatedListWithProducts = await fetchAndMergeProducts(\n            updatedRequisitionList\n          );\n          setCurrentRequisitionList(updatedListWithProducts);\n        } else {\n          console.warn(translations.errorLoadPage);\n        }\n      } catch (error) {\n        console.warn(translations.errorLoadPage);\n      } finally {\n        setLoadingPage(false);\n      }\n    },\n    [\n      currentRequisitionList?.uid,\n      fetchAndMergeProducts,\n      translations,\n      setCurrentRequisitionList,\n    ]\n  );\n\n  const handleUpdate = useCallback(\n    async (updatedList: RequisitionList) => {\n      // With the updated API, the response includes items and page_info\n      // but we need to fetch and merge full product data (prices, images, etc.)\n      const enrichedList = await fetchAndMergeProducts(updatedList);\n      setCurrentRequisitionList(enrichedList);\n    },\n    [setCurrentRequisitionList, fetchAndMergeProducts]\n  );\n\n  return (\n    <div className=\"requisition-list-view__container\">\n      {initializing ? (\n        <div className=\"requisition-list-view__loading\">\n          <ProgressSpinner stroke={'4'} size={'large'} />\n        </div>\n      ) : isEnabled === false ? (\n        <NotFound\n          title={translations.notEnabledTitle}\n          message={translations.notEnabledMessage}\n          actionLabel={translations.notEnabledActionLabel}\n          onAction={() => {\n            window.location.href = fallbackRoute;\n          }}\n        />\n      ) : !currentRequisitionList ||\n        !isValidBase64Uid(currentRequisitionList?.uid) ? (\n        <NotFound\n          title={translations.notFoundTitle}\n          message={translations.notFoundMessage}\n          actionLabel={\n            routeRequisitionListGrid\n              ? translations.notFoundActionLabel\n              : undefined\n          }\n          onAction={\n            routeRequisitionListGrid\n              ? () => {\n                  const url = routeRequisitionListGrid();\n                  if (url && typeof url === 'string') {\n                    window.location.href = url;\n                  }\n                }\n              : undefined\n          }\n        />\n      ) : (\n        <>\n          <RequisitionListHeader\n            requisitionList={currentRequisitionList}\n            routeRequisitionListGrid={routeRequisitionListGrid}\n            onUpdate={handleUpdate}\n            onAlert={handleRequisitionListAlert}\n          />\n\n          {alert && (\n            <div className=\"requisition-list__alert-wrapper\">\n              <InLineAlert\n                heading={alert.description}\n                type={alert.type}\n                variant=\"primary\"\n                onDismiss={() => setAlert(null)}\n              />\n            </div>\n          )}\n\n          {currentRequisitionList.items_count === 0 ? (\n            <EmptyList\n              textContent={`${currentRequisitionList.name} ${translations.emptyRequisitionList}`}\n            />\n          ) : (\n            <>\n              <BatchActions\n                selectedItems={selectedItems}\n                deletingItemId={deletingItemId}\n                addingToCartItemId={addingToCartItemId}\n                bulkAddingToCart={bulkAddingToCart}\n                updatingQuantityItemId={updatingQuantityItemId}\n                onSelectAll={handleSelectAll}\n                onSelectNone={handleSelectNone}\n                onBulkAddToCart={() =>\n                  handleAddItemsToCart(Array.from(selectedItems))\n                }\n                onBulkDelete={() =>\n                  handleDeleteItems(Array.from(selectedItems))\n                }\n              />\n\n              <ProductListTable\n                items={currentRequisitionList.items}\n                selectedItems={selectedItems}\n                currentPage={\n                  currentRequisitionList.page_info?.current_page || 1\n                }\n                pageSize={\n                  currentRequisitionList.page_info?.page_size ||\n                  DEFAULT_PAGE_SIZE\n                }\n                handleItemSelection={handleItemSelection}\n                handleUpdateQuantity={handleUpdateQuantity}\n                onAddToCart={handleAddItemsToCart}\n                onDeleteItem={handleDeleteItems}\n              />\n\n              {/* Pagination */}\n              {currentRequisitionList.page_info && (\n                <div className=\"requisition-list-view__pagination\">\n                  <PaginationItemsCounter\n                    pageInfo={currentRequisitionList.page_info}\n                    totalCount={currentRequisitionList.items_count}\n                  />\n                  {(currentRequisitionList.page_info?.total_pages || 0) > 1 && (\n                    <Pagination\n                      totalPages={currentRequisitionList.page_info.total_pages}\n                      currentPage={\n                        currentRequisitionList.page_info?.current_page || 1\n                      }\n                      onChange={handlePageChange}\n                      disabled={loadingPage || loadingProducts}\n                    />\n                  )}\n                  <div className=\"requisition-list-view__pagination-picker\">\n                    <span>{translations.show}</span>\n                    <PageSizePicker\n                      currentPageSize={\n                        currentRequisitionList.page_info?.page_size ||\n                        DEFAULT_PAGE_SIZE\n                      }\n                      onPageSizeChange={handlePageSizeChange}\n                      disabled={loadingPage || loadingProducts}\n                    />\n                  </div>\n                </div>\n              )}\n            </>\n          )}\n        </>\n      )}\n\n      {/* Delete Confirmation Modal */}\n      {showDeleteModal && (\n        <RequisitionListModal\n          isOpen={showDeleteModal}\n          isLoading={deletingItemId !== null}\n          title={translations.deleteItemsTitle}\n          modalContent={translations.deleteItemsMessage}\n          confirmBtnCaption={translations.confirmAction}\n          closeBtnCaption={translations.cancelAction}\n          handleModalOnClose={() => {\n            setShowDeleteModal(false);\n            setItemsToDelete([]);\n          }}\n          handleModalOnConfirm={handleConfirmDelete}\n        />\n      )}\n    </div>\n  );\n};\n"],"names":["SvgCart","props","React","SvgMinus","SvgTrash","useRequisitionListSelectedItems","currentRequisitionList","setCurrentRequisitionList","useState","selectedItems","setSelectedItems","handleItemSelection","useCallback","itemUid","isSelected","prev","newSet","handleSelectAll","allItemUids","_a","item","handleSelectNone","ProductListTable","className","items","currentPage","pageSize","canEdit","handleUpdateQuantity","onAddToCart","onDeleteItem","disabledInputs","setDisabledInputs","inputValues","setInputValues","translations","useText","columns","handleItemCheckboxChange","event","getRowIndex","index","getImageAlt","_b","getImageSrc","_c","_e","_d","_f","getProductName","getConfiguredProductName","getBundleProducts","option","jsxs","getSku","getPriceAmount","previousValue","_h","_g","getPriceCurrency","getSubtotal","handleInputChange","e","inputValue","handleInputBlur","newQty","rowData","jsx","Checkbox","Image","Price","Field","Input","Button","Icon","Cart","Trash","table","Table","VComponent","h","classes","BatchActions","deletingItemId","addingToCartItemId","bulkAddingToCart","updatingQuantityItemId","onSelectAll","onSelectNone","onBulkAddToCart","onBulkDelete","isDisabled","hasSelectedItems","Minus","RequisitionListView","requisitionListUid","skipProductLoading","DEFAULT_PAGE_SIZE","routeRequisitionListGrid","fallbackRoute","loadingProducts","setLoadingProducts","setDeletingItemId","setAddingToCartItemId","setBulkAddingToCart","setUpdatingQuantityItemId","loadingPage","setLoadingPage","currentPageSize","setCurrentPageSize","initializing","setInitializing","showDeleteModal","setShowDeleteModal","itemsToDelete","setItemsToDelete","alert","setAlert","handleRequisitionListAlert","useRequisitionListAlert","isEnabled","useRequisitionListEnabled","useEffect","requisitionListEvent","events","payload","alertEvent","fetchAndMergeProducts","baseRequisitionList","productSkus","fetchedProducts","getProductData","productMap","product","fetchedProduct","error","fetchedList","getRequisitionList","enrichedList","handleAddItemsToCart","itemUids","errors","addRequisitionListItemsToCart","totalItems","errorCount","successCount","alertPayload","handleDeleteItems","handleConfirmDelete","updatedRequisitionList","deleteRequisitionListItems","enrichedRequisitionList","newQuantity","currentItem","updatedItem","updateRequisitionListItems","handlePageChange","page","updatedListWithProducts","handlePageSizeChange","newPageSize","handleUpdate","updatedList","ProgressSpinner","NotFound","isValidBase64Uid","url","Fragment","RequisitionListHeader","InLineAlert","EmptyList","PaginationItemsCounter","Pagination","PageSizePicker","RequisitionListModal"],"mappings":"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","x_google_ignoreList":[0,1,2]}