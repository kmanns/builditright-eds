{"version":3,"file":"RequisitionListSelector.js","sources":["/@dropins/storefront-requisition-list/src/api/addProductsToRequisitionList/graphql/addProductsToRequisitionList.ts","/@dropins/storefront-requisition-list/src/api/addProductsToRequisitionList/addProductsToRequisitionList.ts","../../node_modules/@adobe-commerce/elsie/src/icons/ChevronDown.svg","/@dropins/storefront-requisition-list/src/hooks/useRequisitionLists.ts","/@dropins/storefront-requisition-list/src/containers/RequisitionListSelector/RequisitionListSelector.tsx"],"sourcesContent":["/********************************************************************\n * ADOBE CONFIDENTIAL\n * __________________\n *\n *  Copyright 2025 Adobe\n *  All Rights Reserved.\n *\n * NOTICE:  All information contained herein is, and remains\n * the property of Adobe and its suppliers, if any. The intellectual\n * and technical concepts contained herein are proprietary to Adobe\n * and its suppliers and are protected by all applicable intellectual\n * property laws, including trade secret and copyright laws.\n * Dissemination of this information or reproduction of this material\n * is strictly forbidden unless prior written permission is obtained\n * from Adobe.\n *******************************************************************/\n\nimport { REQUISITION_LIST_FRAGMENT } from '@/requisitionList/api/fragments/RequisitionListFragment.graphql';\nimport { REQUISITION_LIST_ITEMS_FRAGMENT } from '@/requisitionList/api/fragments/RequisitionListItemsFragment.graphql';\n\nexport const ADD_PRODUCTS_TO_REQUISITION_LIST_MUTATION = `\n  mutation ADD_PRODUCTS_TO_REQUISITION_LIST_MUTATION(\n      $requisitionListUid: ID!, \n      $requisitionListItems: [RequisitionListItemsInput!]!\n    ) {\n    addProductsToRequisitionList(\n      requisitionListUid: $requisitionListUid\n      requisitionListItems: $requisitionListItems\n    ) {\n      requisition_list {\n        ...REQUISITION_LIST_FRAGMENT\n        items {\n          ...REQUISITION_LIST_ITEMS_FRAGMENT\n        }\n      }\n    }\n  }\n${REQUISITION_LIST_ITEMS_FRAGMENT}\n${REQUISITION_LIST_FRAGMENT}\n`;\n","/********************************************************************\n * ADOBE CONFIDENTIAL\n * __________________\n *\n *  Copyright 2025 Adobe\n *  All Rights Reserved.\n *\n * NOTICE:  All information contained herein is, and remains\n * the property of Adobe and its suppliers, if any. The intellectual\n * and technical concepts contained herein are proprietary to Adobe\n * and its suppliers and are protected by all applicable intellectual\n * property laws, including trade secret and copyright laws.\n * Dissemination of this information or reproduction of this material\n * is strictly forbidden unless prior written permission is obtained\n * from Adobe.\n *******************************************************************/\n\nimport { RequisitionList } from '@/requisitionList/data/models/requisitionList';\nimport { fetchGraphQl } from '@/requisitionList/api';\nimport { ADD_PRODUCTS_TO_REQUISITION_LIST_MUTATION } from '@/requisitionList/api/addProductsToRequisitionList/graphql/addProductsToRequisitionList';\nimport { handleFetchError } from '@/requisitionList/lib/fetch-error';\nimport { transformRequisitionList } from '@/requisitionList/data/transforms';\nimport { events } from '@adobe-commerce/event-bus';\n\n// Correct type for GraphQL RequisitionListItemsInput\nexport type RequisitionListItemsInput = {\n  sku: string;\n  quantity: number;\n  parent_sku?: string;\n  selected_options?: string[];\n  entered_options?: Array<{ uid: string; value: string }>;\n};\n\nexport const addProductsToRequisitionList = async (\n  requisitionListUid: string,\n  requisitionListItems: Array<RequisitionListItemsInput>\n): Promise<RequisitionList | null> => {\n  // Clean items before performing the mutation - remove empty fields\n  const cleanedItems = requisitionListItems.map((item) => {\n    const cleaned: any = {\n      sku: item.sku,\n      quantity: item.quantity,\n    };\n\n    if (item.parent_sku) cleaned.parent_sku = item.parent_sku;\n    if (item.selected_options && item.selected_options.length > 0) {\n      cleaned.selected_options = item.selected_options;\n    }\n    if (item.entered_options && item.entered_options.length > 0) {\n      cleaned.entered_options = item.entered_options;\n    }\n\n    return cleaned;\n  });\n\n  const { errors, data } = await fetchGraphQl(\n    ADD_PRODUCTS_TO_REQUISITION_LIST_MUTATION,\n    {\n      variables: {\n        requisitionListUid,\n        requisitionListItems: cleanedItems,\n      },\n    }\n  );\n\n  if (errors) return handleFetchError(errors);\n\n  if (!data?.addProductsToRequisitionList?.requisition_list) {\n    return null;\n  }\n\n  const payload = transformRequisitionList(\n    data.addProductsToRequisitionList.requisition_list\n  );\n  events.emit('requisitionList/data', payload);\n  return payload;\n};\n","import * as React from \"react\";\nconst SvgChevronDown = (props) => /* @__PURE__ */ React.createElement(\"svg\", { width: 24, height: 24, viewBox: \"0 0 24 24\", fill: \"none\", xmlns: \"http://www.w3.org/2000/svg\", ...props }, /* @__PURE__ */ React.createElement(\"path\", { vectorEffect: \"non-scaling-stroke\", d: \"M7.74512 9.87701L12.0001 14.132L16.2551 9.87701\", stroke: \"currentColor\", strokeWidth: 1, strokeLinecap: \"square\", strokeLinejoin: \"round\" }));\nexport default SvgChevronDown;\n","/********************************************************************\n * ADOBE CONFIDENTIAL\n * __________________\n *\n *  Copyright 2025 Adobe\n *  All Rights Reserved.\n *\n * NOTICE:  All information contained herein is, and remains\n * the property of Adobe and its suppliers, if any. The intellectual\n * and technical concepts contained herein are proprietary to Adobe\n * and its suppliers and are protected by all applicable intellectual\n * property laws, including trade secret and copyright laws.\n * Dissemination of this information or reproduction of this material\n * is strictly forbidden unless prior written permission is obtained\n * from Adobe.\n *******************************************************************/\n\nimport { useEffect, useState } from 'preact/compat';\nimport {\n  state,\n  setRequisitionLists,\n  setRequisitionListsLoading,\n  updateRequisitionList,\n} from '@/requisitionList/lib/state';\nimport { getRequisitionLists } from '@/requisitionList/api';\nimport { RequisitionList } from '@/requisitionList/data/models/requisitionList';\nimport { events } from '@adobe-commerce/event-bus';\n\nlet updateCounter = 0; // Counter to track updates across all hooks\n\nexport const useRequisitionLists = () => {\n  const [lists, setLists] = useState<RequisitionList[]>(state.requisitionLists);\n  const [loading, setLoading] = useState(state.requisitionListsLoading);\n  const [lastUpdate, setLastUpdate] = useState(updateCounter);\n\n  // Fetch lists if empty on mount\n  useEffect(() => {\n    if (state.requisitionLists.length === 0 && !state.requisitionListsLoading) {\n      setRequisitionListsLoading(true);\n      getRequisitionLists(1, 100)\n        .then((res: { items: RequisitionList[] }) => {\n          const newLists = res?.items || [];\n          setRequisitionLists(newLists);\n          updateCounter++;\n        })\n        .catch((error: any) => {\n          console.error('Error fetching requisition lists:', error);\n          setRequisitionLists([]);\n          updateCounter++;\n        })\n        .finally(() => {\n          setRequisitionListsLoading(false);\n        });\n    }\n  }, []);\n\n  // Listen to event bus updates\n  useEffect(() => {\n    const multiListListener = events.on(\n      'requisitionLists/data',\n      (payload: RequisitionList[] | null) => {\n        if (payload) {\n          setRequisitionLists(payload);\n          updateCounter++;\n          setLastUpdate(updateCounter);\n          setLists(state.requisitionLists);\n          setLoading(state.requisitionListsLoading);\n        }\n      }\n    );\n\n    const singleListListener = events.on(\n      'requisitionList/data',\n      (payload: RequisitionList | null) => {\n        if (!payload) return;\n\n        // Only the FIRST hook instance to receive this should update\n        // Use the updateRequisitionList helper which handles both add and update\n        updateRequisitionList(payload);\n        updateCounter++;\n        setLastUpdate(updateCounter);\n        setLists([...state.requisitionLists]);\n        setLoading(state.requisitionListsLoading);\n      }\n    );\n\n    return () => {\n      multiListListener?.off();\n      singleListListener?.off();\n    };\n  }, []);\n\n  // Sync with global state when it changes\n  useEffect(() => {\n    if (lastUpdate !== updateCounter) {\n      setLists(state.requisitionLists);\n      setLoading(state.requisitionListsLoading);\n      setLastUpdate(updateCounter);\n    }\n  }, [lastUpdate]);\n\n  return { lists, loading };\n};\n","/********************************************************************\n * ADOBE CONFIDENTIAL\n * __________________\n *\n *  Copyright 2025 Adobe\n *  All Rights Reserved.\n *\n * NOTICE:  All information contained herein is, and remains\n * the property of Adobe and its suppliers, if any. The intellectual\n * and technical concepts contained herein are proprietary to Adobe\n * and its suppliers and are protected by all applicable intellectual\n * property laws, including trade secret and copyright laws.\n * Dissemination of this information or reproduction of this material\n * is strictly forbidden unless prior written permission is obtained\n * from Adobe.\n *******************************************************************/\n\nimport { HTMLAttributes, useCallback, useMemo, useState } from 'preact/compat';\nimport { Container } from '@adobe-commerce/elsie/lib';\nimport { RequisitionList } from '../../data/models/requisitionList.js';\nimport {\n  Button,\n  Card,\n  Icon,\n  InLineAlert,\n} from '@adobe-commerce/elsie/components';\nimport { addProductsToRequisitionList } from '@/requisitionList/api/addProductsToRequisitionList/addProductsToRequisitionList';\nimport {\n  EmptyList,\n  RequisitionListModal,\n  RequisitionListActions,\n} from '@/requisitionList/components';\nimport { RequisitionListForm } from '@/requisitionList/containers';\nimport { useText } from '@adobe-commerce/elsie/i18n';\nimport { ChevronDown, List } from '@adobe-commerce/elsie/icons';\nimport { JSX } from 'preact';\nimport '@/requisitionList/containers/RequisitionListSelector/RequisitionListSelector.css';\nimport {\n  useRequisitionLists,\n  useRequisitionListAlert,\n  useRequisitionListEnabled,\n} from '@/requisitionList/hooks';\n\nexport interface RequisitionListSelectorProps\n  extends HTMLAttributes<HTMLDivElement> {\n  canCreate?: boolean;\n  sku: string;\n  selectedOptions?: string[];\n  quantity?: number;\n  beforeAddProdToReqList?: () => Promise<void> | void;\n}\n\nexport const RequisitionListSelector: Container<\n  RequisitionListSelectorProps\n> = ({\n  canCreate = true,\n  sku,\n  selectedOptions,\n  quantity = 1,\n  beforeAddProdToReqList,\n}: RequisitionListSelectorProps) => {\n  const translations = useText({\n    createTitle: `RequisitionList.RequisitionListForm.createTitle`,\n    addToRequisitionList: `RequisitionList.RequisitionListForm.addToRequisitionList`,\n    emptyList: `RequisitionList.RequisitionListWrapper.emptyList`,\n    addToNewRequisitionList: `RequisitionList.RequisitionListSelector.addToNewRequisitionList`,\n    addToSelected: `RequisitionList.RequisitionListSelector.addToSelected`,\n  });\n  const [isAdding, setIsAdding] = useState(false);\n  const [selectedReqListUid, setSelectedReqListUid] = useState<string | null>(\n    null\n  );\n  const { lists } = useRequisitionLists();\n  const { isEnabled } = useRequisitionListEnabled();\n\n  const { alert, setAlert, handleRequisitionListAlert } =\n    useRequisitionListAlert();\n\n  const [modal, setModal] = useState<{\n    isOpen: boolean;\n    isLoading: boolean;\n  }>({\n    isOpen: false,\n    isLoading: false,\n  });\n\n  const handleOpenModal = useCallback(() => {\n    setModal({ isOpen: true, isLoading: false });\n  }, []);\n\n  const handleCloseModal = useCallback(() => {\n    setModal({ isOpen: false, isLoading: false });\n    setSelectedReqListUid(null);\n    setIsAdding(false);\n    setAlert(null);\n  }, [setAlert]);\n\n  const handleAddProdToReqList = useCallback(\n    async (requisitionListUid: string) => {\n      try {\n        // Build the object dynamically, omitting selected_options if not present\n        const itemToAdd = {\n          sku,\n          quantity,\n          ...(selectedOptions && selectedOptions.length > 0\n            ? { selected_options: selectedOptions }\n            : {}),\n        };\n\n        await addProductsToRequisitionList(requisitionListUid, [itemToAdd]);\n      } catch (error) {\n        console.error('Error adding product to list:', error);\n        throw error;\n      }\n    },\n    [sku, quantity, selectedOptions]\n  );\n\n  const handleAddProductAndEmitAlert = useCallback(\n    async (requisitionListUid: string) => {\n      try {\n        await handleAddProdToReqList(requisitionListUid);\n\n        handleRequisitionListAlert({\n          action: 'add',\n          type: 'success',\n          context: 'product',\n          skus: [sku],\n        });\n      } catch {\n        handleRequisitionListAlert({\n          action: 'add',\n          type: 'error',\n          context: 'product',\n          skus: [sku],\n        });\n      } finally {\n        setTimeout(() => {\n          handleCloseModal();\n        }, 2000);\n      }\n    },\n    [sku, handleAddProdToReqList, handleCloseModal, handleRequisitionListAlert]\n  );\n\n  const handleSubmit = useCallback(\n    (event: JSX.TargetedEvent<HTMLFormElement, SubmitEvent>) => {\n      event.preventDefault();\n      if (!selectedReqListUid) return;\n      handleAddProductAndEmitAlert(selectedReqListUid);\n    },\n    [selectedReqListUid, handleAddProductAndEmitAlert]\n  );\n\n  const handleOpenModalWithValidation = useCallback(() => {\n    if (!beforeAddProdToReqList) {\n      handleOpenModal();\n      return;\n    }\n\n    Promise.resolve(beforeAddProdToReqList())\n      .then(() => {\n        handleOpenModal();\n      })\n      .catch(() => {\n        // Validation failed - don't open modal\n      });\n  }, [beforeAddProdToReqList, handleOpenModal]);\n\n  const reqListOptions = useMemo(\n    () => [\n      ...(lists?.map((reqList: RequisitionList) => ({\n        value: reqList.uid,\n        text: reqList.name,\n      })) ?? []),\n    ],\n    [lists]\n  );\n\n  const availableReqLists = useMemo(\n    () => (\n      <div className=\"requisition-list-selector__available-lists\">\n        {reqListOptions.map((option: { value: string; text: string }) => (\n          <Card\n            variant={\n              selectedReqListUid === option.value ? 'primary' : 'secondary'\n            }\n            key={option.value}\n            onClick={() => {\n              setSelectedReqListUid(option.value);\n            }}\n          >\n            <Icon source={List} />\n            <span>{option.text}</span>\n          </Card>\n        ))}\n      </div>\n    ),\n    [reqListOptions, selectedReqListUid]\n  );\n\n  const selectReqListSection =\n    reqListOptions.length > 0 ? (\n      isAdding ? (\n        <button\n          type=\"button\"\n          aria-label=\"Select a requisition list\"\n          role=\"button\"\n          className=\"requisition-list-actions\"\n          data-testid=\"requisition-list-actions-button\"\n          onClick={() => setIsAdding(false)}\n        >\n          <span\n            className=\"requisition-list-actions__title\"\n            data-testid=\"requisition-list-actions-button-text\"\n          >\n            {translations.addToRequisitionList}\n          </span>\n          <Icon source={ChevronDown} size=\"32\" />\n        </button>\n      ) : (\n        <Card variant=\"secondary\">\n          <form\n            onSubmit={handleSubmit}\n            className=\"requisition-list-selector__form\"\n          >\n            {availableReqLists}\n            <div className=\"requisition-list-form__actions\">\n              <Button type=\"submit\" disabled={!selectedReqListUid}>\n                {translations.addToSelected}\n              </Button>\n            </div>\n          </form>\n        </Card>\n      )\n    ) : (\n      <EmptyList textContent={translations.emptyList} />\n    );\n\n  const createReqListSection = !isAdding ? (\n    <RequisitionListActions\n      onAddNew={() => {\n        setIsAdding(true);\n      }}\n    />\n  ) : (\n    <Card variant=\"secondary\">\n      <RequisitionListForm\n        mode=\"create\"\n        onSuccess={async (newList: RequisitionList) => {\n          await handleAddProductAndEmitAlert(newList.uid);\n        }}\n        onError={() => {\n          handleRequisitionListAlert({\n            action: 'add',\n            type: 'error',\n            context: 'product',\n            skus: [sku],\n          });\n        }}\n        onCancel={() => {\n          setIsAdding(false);\n        }}\n      />\n    </Card>\n  );\n\n  const modalContent = (\n    <>\n      {alert && (\n        <div className=\"requisition-list__alert-wrapper\">\n          <InLineAlert\n            key={`requisition-list-selector__alert__${sku}`}\n            id={`requisition-list-selector__alert__${sku}`}\n            heading={alert.description}\n            type={alert.type}\n            variant=\"primary\"\n            className=\"requisition-list-selector__alert\"\n          />\n        </div>\n      )}\n      {!alert && (\n        <>\n          {selectReqListSection}\n          {canCreate && createReqListSection}\n        </>\n      )}\n    </>\n  );\n\n  // Early return after all hooks have been called\n  if (isEnabled === null || !isEnabled) {\n    return null;\n  }\n\n  return (\n    <div className=\"requisition-list-selector\">\n      <Button\n        aria-label={translations.addToRequisitionList}\n        data-testid=\"requisition-list-selector\"\n        size=\"medium\"\n        variant=\"tertiary\"\n        icon={<Icon source={List} />}\n        onClick={handleOpenModalWithValidation}\n      />\n      {modal.isOpen && (\n        <RequisitionListModal\n          isOpen\n          isLoading={modal.isLoading}\n          title={translations.addToRequisitionList}\n          modalContent={modalContent}\n          handleModalOnClose={handleCloseModal}\n        />\n      )}\n    </div>\n  );\n};\n"],"names":["ADD_PRODUCTS_TO_REQUISITION_LIST_MUTATION","REQUISITION_LIST_ITEMS_FRAGMENT","REQUISITION_LIST_FRAGMENT","addProductsToRequisitionList","requisitionListUid","requisitionListItems","cleanedItems","item","cleaned","errors","data","fetchGraphQl","handleFetchError","_a","payload","transformRequisitionList","events","SvgChevronDown","props","React","updateCounter","useRequisitionLists","lists","setLists","useState","state","loading","setLoading","lastUpdate","setLastUpdate","useEffect","setRequisitionListsLoading","getRequisitionLists","res","newLists","setRequisitionLists","error","multiListListener","singleListListener","updateRequisitionList","RequisitionListSelector","canCreate","sku","selectedOptions","quantity","beforeAddProdToReqList","translations","useText","isAdding","setIsAdding","selectedReqListUid","setSelectedReqListUid","isEnabled","useRequisitionListEnabled","alert","setAlert","handleRequisitionListAlert","useRequisitionListAlert","modal","setModal","handleOpenModal","useCallback","handleCloseModal","handleAddProdToReqList","itemToAdd","handleAddProductAndEmitAlert","handleSubmit","event","handleOpenModalWithValidation","reqListOptions","useMemo","reqList","availableReqLists","option","jsxs","Card","jsx","Icon","List","selectReqListSection","ChevronDown","Button","EmptyList","createReqListSection","RequisitionListForm","newList","RequisitionListActions","modalContent","Fragment","InLineAlert","RequisitionListModal"],"mappings":"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","x_google_ignoreList":[2]}