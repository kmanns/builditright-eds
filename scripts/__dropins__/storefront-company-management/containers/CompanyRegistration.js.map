{"version":3,"file":"CompanyRegistration.js","sources":["/@dropins/storefront-company-management/src/types/form.types.ts","/@dropins/storefront-company-management/src/components/CompanyRegistrationForm/Form/FormInputs/FormInputs.tsx","/@dropins/storefront-company-management/src/components/CompanyRegistrationForm/Form/Form.tsx","/@dropins/storefront-company-management/src/hooks/useCountryAndRegionFields.tsx","/@dropins/storefront-company-management/src/components/CompanyRegistrationForm/Form/getCompanyFieldsConfig.ts","/@dropins/storefront-company-management/src/components/CompanyRegistrationForm/Form/fieldValidationRules.ts","/@dropins/storefront-company-management/src/components/CompanyRegistrationForm/Form/formValidation.ts","/@dropins/storefront-company-management/src/components/CompanyRegistrationForm/Form/fieldHandlers.ts","/@dropins/storefront-company-management/src/hooks/useCompanyRegistrationForm.ts","/@dropins/storefront-company-management/src/components/CompanyRegistrationForm/CompanyRegistrationForm.tsx","/@dropins/storefront-company-management/src/components/CompanyRegistrationSuccess/CompanyRegistrationSuccess.tsx","/@dropins/storefront-company-management/src/containers/CompanyRegistration/CompanyRegistration.tsx"],"sourcesContent":["/********************************************************************\n * ADOBE CONFIDENTIAL\n * __________________\n *\n *  Copyright 2025 Adobe\n *  All Rights Reserved.\n *\n * NOTICE:  All information contained herein is, and remains\n * the property of Adobe and its suppliers, if any. The intellectual\n * and technical concepts contained herein are proprietary to Adobe\n * and its suppliers and are protected by all applicable intellectual\n * property laws, including trade secret and copyright laws.\n * Dissemination of this information or reproduction of this material\n * is strictly forbidden unless prior written permission is obtained\n * from Adobe.\n *******************************************************************/\n\nimport { CompanyFormData } from '@/company-management/data/models/company';\n\nexport enum FieldTypeEnum {\n  TEXT = 'TEXT',\n  EMAIL = 'EMAIL',\n  TEL = 'TEL',\n  SELECT = 'SELECT',\n  HIDDEN = 'HIDDEN',\n}\n\nexport interface FieldsProps {\n  code: string;\n  name: string;\n  id: string;\n  required: boolean;\n  label: string;\n  options: { isDefault: boolean; text: string; value: string }[];\n  className?: string;\n  defaultValue: string | boolean | number;\n  fieldType: FieldTypeEnum;\n  isHidden: boolean;\n  customUpperCode: string;\n  validateRules?: Record<string, string | number | boolean>[];\n  placeholder?: string;\n  disabled?: boolean;\n  isRequiredRegion?: boolean;\n  isRequiredPostCode?: boolean;\n  maxlength?: number;\n}\n\nexport interface CompanyFormInputsContext {\n  formData: CompanyFormData;\n  formActions: {\n    handleChange: (field: keyof CompanyFormData, value: string | string[]) => void;\n  };\n}\n\nexport interface CompanyFormSectionContext {\n  formData: CompanyFormData;\n  handleInputChange: (values: Record<string, string | string[] | number | boolean>) => void;\n  isSubmitting: boolean;\n  errors: string[];\n}\n\nexport interface CompanyFormSlots {\n  // Individual field slots - pattern: CompanyFormInput_{fieldCode}\n  // Examples: CompanyFormInput_companyName, CompanyFormInput_companyEmail, etc.\n  // Each slot is a function that receives context and returns JSX\n  [key: string]: (context?: any) => any;\n}\n\nexport interface FormProps {\n  regionOptions?: { text: string; value: string }[];\n  countryOptions?: { text: string; value: string }[];\n  fieldIdPrefix?: string;\n  slots?: CompanyFormSlots;\n  fieldsConfig?: FieldsProps[];\n  values?: Record<string, string | number | boolean | string[]>;\n  errors?: Record<string, string>;\n  name?: string;\n  className?: string;\n  children?: any;\n  /** Show loading spinner (for initial data loading like countries/store config) */\n  loading?: boolean;\n  /** Show loading spinner centered (legacy, use loading instead) */\n  showFormLoader?: boolean;\n  /** Show submitting overlay (form stays visible but disabled with spinner on top) */\n  submitting?: boolean;\n  onSubmit?: (event: SubmitEvent, isValid: boolean) => Promise<void | null | undefined>;\n  onChange?: (values: Record<string, string | string[] | number | boolean>) => void;\n  onBlur?: (event: Event) => void;\n}\n\nexport interface FormInputsProps {\n  className?: string;\n  errors?: Record<string, string>;\n  values?: Record<string, string | number | boolean | string[]>;\n  formData?: Record<string, string | number | boolean>;\n  fields?: FieldsProps[];\n  loading?: boolean;\n  regionOptions?: { text: string; value: string }[];\n  countryOptions?: { text: string; value: string }[];\n  onChange?: (event: Event) => void;\n  handleInputChange?: (event: Event) => void;\n  onBlur?: (event: Event) => void;\n  onFocus?: (event: Event) => void;\n  fieldIdPrefix?: string;\n  slots?: CompanyFormSlots;\n}","/********************************************************************\n * ADOBE CONFIDENTIAL\n * __________________\n *\n *  Copyright 2025 Adobe\n *  All Rights Reserved.\n *\n * NOTICE:  All information contained herein is, and remains\n * the property of Adobe and its suppliers, if any. The intellectual\n * and technical concepts contained herein are proprietary to Adobe\n * and its suppliers and are protected by all applicable intellectual\n * property laws, including trade secret and copyright laws.\n * Dissemination of this information or reproduction of this material\n * is strictly forbidden unless prior written permission is obtained\n * from Adobe.\n *******************************************************************/\n\nimport { FunctionComponent, memo } from 'preact/compat';\nimport { Field, Input, Picker } from '@adobe-commerce/elsie/components';\nimport { classes, Slot } from '@adobe-commerce/elsie/lib';\nimport { useText } from '@adobe-commerce/elsie/i18n';\nimport { FormInputsProps, FieldsProps, FieldTypeEnum } from '../../../../types/form.types';\n\nexport const FormInputs: FunctionComponent<FormInputsProps> = memo(({\n  loading,\n  values = {},\n  fields,\n  errors = {},\n  className = '',\n  regionOptions,\n  countryOptions,\n  onChange,\n  onBlur,\n  onFocus,\n  slots,\n  fieldIdPrefix,\n}) => {\n  const itemClassName = `${className}__field`;\n\n  const translations = useText({\n    selectCountry: 'Company.FormText.selectCountry',\n    selectRegion: 'Company.FormText.selectRegion',\n    selectCountryFirst: 'Company.FormText.selectCountryFirst',\n    country: 'Company.shared.fields.country',\n    stateProvince: 'Company.shared.fields.stateProvince',\n    'Company.Registration.companyInformation': 'Company.shared.fields.companyInformation',\n    'Company.Registration.legalAddress': 'Company.shared.fields.legalAddress', \n    'Company.Registration.companyAdmin': 'Company.shared.fields.companyAdmin',\n  });\n\n  // Define field sections for organizing form\n  const fieldSections = {\n    CompanyInformationSection: ['companyName', 'legalName', 'companyEmail', 'vatTaxId', 'resellerId'],\n    LegalAddressSection: ['street', 'streetLine2', 'city', 'countryCode', 'region', 'postcode', 'addressTelephone'],\n    CompanyAdministratorSection: ['adminEmail', 'adminFirstname', 'adminLastname', 'adminJobTitle', 'adminWorkTelephone', 'adminGender']\n  };\n\n  const getSectionTitle = (sectionKey: string) => {\n    const titles = {\n      CompanyInformationSection: 'Company.Registration.companyInformation',\n      LegalAddressSection: 'Company.Registration.legalAddress', \n      CompanyAdministratorSection: 'Company.Registration.companyAdmin'\n    };\n    return titles[sectionKey as keyof typeof titles];\n  };\n\n  // Format region value for SELECT fields using \"regionCode,regionId\" format\n  const formatRegionValue = (item: FieldsProps) => {\n    if ((item.code === 'region' || item.code === 'regionCode') && item.fieldType === FieldTypeEnum.SELECT) {\n      const regionCode = values['regionCode']?.toString() || '';\n      const regionId = values['regionId']?.toString() || '';\n      if (regionCode && regionId) {\n        return `${regionCode},${regionId}`;\n      }\n      if (values[item.code]?.toString().includes(',')) {\n        // If region value is already in \"code,id\" format, use it\n        return values[item.code]?.toString();\n      }\n      return '';\n    }\n    return null;\n  };\n\n  // Format street value handling array mapping for street and streetLine2 fields\n  const formatStreetValue = (item: FieldsProps) => {\n    if (item.code === 'street') {\n      return Array.isArray(values.street) ? (values.street[0] || '') : (values.street?.toString() || '');\n    } else if (item.code === 'streetLine2') {\n      return Array.isArray(values.street) ? (values.street[1] || '') : '';\n    }\n    return null;\n  };\n\n\n  // Render slot function for individual fields\n  const renderSlot = (item: FieldsProps, errorMessage?: string) => {\n    const slotName = `CompanyFormInput_${item.code}`;\n    const slot = slots?.[slotName];\n    if (!slot) return null;\n\n    const contextValue = {\n      inputName: item.code,\n      handleOnChange: onChange || (() => {}),\n      errorMessage,\n      errors: Object.values(errors),\n      formData: values,\n      fieldConfig: {\n        required: item.required,\n        disabled: item.disabled || loading,\n        placeholder: item.placeholder || item.label,\n        label: item.label,\n      },\n    };\n    return (\n      <Slot\n        data-testid={`companyFormInput_${item.code}`}\n        name={slotName}\n        slot={slot}\n        context={contextValue}\n      />\n    );\n  };\n\n  // Select/Picker element renderer\n  const selectElement = (item: FieldsProps, valueMessage: string, errorMessage: string) => {\n    let options = item.options;\n    \n    // Special handling for country and region fields\n    if (item.code === 'countryCode' || item.code === 'country_code') {\n      options = countryOptions?.map(country => ({\n        value: country.value,\n        text: country.text,\n        isDefault: false,\n      })) || [];\n    } else if (item.code === 'region' || item.code === 'regionCode') {\n      options = regionOptions?.map(option => ({ \n        text: option.text, \n        value: option.value, \n        isDefault: false \n      })) || [];\n    }\n\n    return (\n      <>\n        {renderSlot(item, errorMessage) ?? (\n          <Field\n            key={item.id}\n            error={errorMessage}\n            className={classes([\n              itemClassName,\n              `${itemClassName}--${item.id}`,\n              [`${itemClassName}--${item.id}-hidden`, item.isHidden],\n              item.className,\n            ])}\n            data-testid={`${className}--${item.id}`}\n            disabled={loading}\n          >\n            <Picker\n              aria-label={item.label}\n              aria-required={item.required ? 'true' : 'false'}\n              id={fieldIdPrefix ? `${fieldIdPrefix}_${item.code}` : item.code}\n              required={item?.required}\n              name={item.customUpperCode || item.code}\n              floatingLabel={`${item.label} ${item.required ? '*' : ''}`}\n              placeholder={item.label}\n              options={options}\n              onBlur={onBlur}\n              onFocus={onFocus}\n              handleSelect={onChange}\n              defaultValue={valueMessage}\n              value={valueMessage}\n            />\n          </Field>\n        )}\n      </>\n    );\n  };\n\n  // Input element renderer\n  const inputElement = (item: FieldsProps, valueMessage: string, errorMessage: string) => {\n    let inputType = 'text';\n    \n    if (item.fieldType === FieldTypeEnum.EMAIL) {\n      inputType = 'email';\n    } else if (item.fieldType === FieldTypeEnum.TEL) {\n      inputType = 'tel';\n    }\n\n    return (\n      <>\n        {renderSlot(item, errorMessage) ?? (\n          <Field\n          key={item.id}\n          error={errorMessage}\n          className={classes([\n            itemClassName,\n            `${itemClassName}--${item.id}`,\n            [`${itemClassName}--${item.id}-hidden`, item.isHidden],\n            item.className,\n          ])}\n          data-testid={`${className}--${item.id}`}\n          disabled={loading}\n        >\n          <Input\n            aria-label={item.label}\n            aria-required={item.required ? 'true' : 'false'}\n            id={fieldIdPrefix ? `${fieldIdPrefix}_${item.code}` : item.code}\n            type={inputType}\n            name={item.customUpperCode}\n            value={valueMessage ?? item.defaultValue}\n            placeholder={item.label}\n            floatingLabel={`${item.label} ${item.required ? '*' : ''}`}\n            maxLength={item.maxlength}\n            onBlur={onBlur}\n            onFocus={onFocus}\n            onChange={onChange}\n          />\n        </Field>\n          \n        )}\n      </>\n    );\n  };\n\n\n\n  // Render fields for a specific section\n  const renderSectionFields = (sectionFields: string[]) => {\n    return fields\n      ?.filter(field => sectionFields.includes(field.code) && !field.isHidden)\n      .map(item => {\n        // Render the field\n        let valueMessage = values[item.code]?.toString() || '';\n        \n        // Special handling for street fields - street array mapping\n        const streetValue = formatStreetValue(item);\n        if (streetValue !== null) {\n          valueMessage = streetValue;\n        }\n          \n        // Special handling for region field - use \"regionCode,regionId\" format for Picker\n        const regionValue = formatRegionValue(item);\n        if (regionValue !== null) {\n          valueMessage = regionValue;\n        }\n        \n        const errorMessage = errors[item.customUpperCode || item.code] || '';\n\n        // For region field, respect the fieldType (which changes based on hasRegions)\n        if (item.code === 'region' || item.code === 'regionCode') {\n          if (item.fieldType === FieldTypeEnum.SELECT) {\n            return selectElement(item, valueMessage, errorMessage);\n          }\n          return inputElement(item, valueMessage, errorMessage);\n        }\n        if (item.fieldType === FieldTypeEnum.SELECT || item.options?.length > 0) {\n          return selectElement(item, valueMessage, errorMessage);\n        }\n        return inputElement(item, valueMessage, errorMessage);\n      });\n  };\n\n  // Render individual section \n  const renderSection = (sectionKey: keyof typeof fieldSections) => {\n    const sectionFields = fieldSections[sectionKey];\n    const sectionTitle = getSectionTitle(sectionKey);\n    \n    // Check if section has any visible fields\n    const hasVisibleFields = fields?.some(field => \n      sectionFields.includes(field.code) && !field.isHidden\n    );\n    \n    if (!hasVisibleFields) return null;\n    \n    // Render section with title and fields\n    return (\n      <div key={`section-${sectionKey}`} className={`${className}__section`}>\n        <h3 className={`${className}__section-title`}>{translations[sectionTitle]}</h3>\n        {renderSectionFields(sectionFields)}\n      </div>\n    );\n  };\n\n  return (\n    <div className={`${className}__inputs`}>\n      {renderSection('CompanyInformationSection')}\n      {renderSection('LegalAddressSection')}\n      {renderSection('CompanyAdministratorSection')}\n    </div>\n  );\n});","/********************************************************************\n * ADOBE CONFIDENTIAL\n * __________________\n *\n *  Copyright 2025 Adobe\n *  All Rights Reserved.\n *\n * NOTICE:  All information contained herein is, and remains\n * the property of Adobe and its suppliers, if any. The intellectual\n * and technical concepts contained herein are proprietary to Adobe\n * and its suppliers and are protected by all applicable intellectual\n * property laws, including trade secret and copyright laws.\n * Dissemination of this information or reproduction of this material\n * is strictly forbidden unless prior written permission is obtained\n * from Adobe.\n *******************************************************************/\n\nimport { FunctionComponent } from 'preact';\nimport { useRef, useEffect } from 'preact/hooks';\nimport { classes } from '@adobe-commerce/elsie/lib';\nimport { ProgressSpinner } from '@adobe-commerce/elsie/components';\nimport { useText } from '@adobe-commerce/elsie/i18n';\nimport { FormProps } from '../../../types/form.types';\nimport { FormInputs } from './FormInputs/FormInputs';\nimport './Form.css';\n\nexport const Form: FunctionComponent<FormProps> = ({\n  showFormLoader,\n  slots,\n  name = 'companyForm',\n  loading,\n  submitting,\n  children,\n  className = 'company-form',\n  fieldsConfig = [],\n  values = {},\n  errors = {},\n  onSubmit,\n  onChange,\n  onBlur,\n  regionOptions,\n  countryOptions,\n  fieldIdPrefix,\n}) => {\n  const formRef = useRef<HTMLFormElement>(null);\n\n  const translations = useText({\n    loading: 'Company.FormText.loading',\n    submitting: 'Company.FormText.submitting',\n  });\n\n  // Scroll to top of page when submitting starts\n  useEffect(() => {\n    if (submitting) {\n      window.scrollTo({ top: 0, behavior: 'smooth' });\n    }\n  }, [submitting]);\n\n  const handleSubmit = async (event: SubmitEvent) => {\n    event.preventDefault();\n    \n    if (onSubmit) {\n      await onSubmit(event, true);\n    }\n  };\n\n  // Show centered spinner only during initial data loading (countries, store config)\n  if (showFormLoader || loading) {\n    return (\n      <div className={classes(['company-form-loader'])} data-testid=\"company-form-loader\">\n        <ProgressSpinner size=\"large\" />\n        <div className=\"company-form-loader__text\">\n          {translations.loading}\n        </div>\n      </div>\n    );\n  }\n\n  const handleChange = (event: Event) => {\n    const target = event.target as HTMLInputElement;\n    const { name, value } = target;\n    \n    if (onChange) {\n      onChange({ [name]: value });\n    }\n  };\n\n  return (\n    <div className=\"company-form-container\">\n      <form\n        id={name}\n        ref={formRef}\n        className={classes(['company-form', className, submitting && 'company-form--submitting'])}\n        onSubmit={handleSubmit}\n        noValidate\n      >\n        <FormInputs\n          className={className}\n          fields={fieldsConfig}\n          values={values}\n          errors={errors}\n          loading={submitting}\n          onChange={handleChange}\n          onBlur={onBlur}\n          slots={slots}\n          regionOptions={regionOptions}\n          countryOptions={countryOptions}\n          fieldIdPrefix={fieldIdPrefix}\n        />\n        {children}\n      </form>\n      \n      {/* Submitting overlay - covers form with spinner, scrolls to top so it's visible */}\n      {submitting && (\n        <div \n          className=\"company-form__submitting-overlay\"\n          data-testid=\"company-form-submitting-overlay\"\n        >\n          <ProgressSpinner size=\"large\" />\n          <div className=\"company-form__submitting-text\">\n            {translations.submitting}\n          </div>\n        </div>\n      )}\n    </div>\n  );\n};","/********************************************************************\n * ADOBE CONFIDENTIAL\n * __________________\n *\n *  Copyright 2025 Adobe\n *  All Rights Reserved.\n *\n * NOTICE:  All information contained herein is, and remains\n * the property of Adobe and its suppliers, if any. The intellectual\n * and technical concepts contained herein are proprietary to Adobe\n * and its suppliers and are protected by all applicable intellectual\n * property laws, including trade secret and copyright laws.\n * Dissemination of this information or reproduction of this material\n * is strictly forbidden unless prior written permission is obtained\n * from Adobe.\n *******************************************************************/\n\nimport { useCallback, useEffect, useMemo, useState } from 'preact/hooks';\nimport { getCountries } from '@/company-management/api/getCountries';\nimport { Country } from '@/company-management/data/models/country';\nimport { CompanyFormData } from '@/company-management/data/models/company';\n\ninterface CountriesData {\n  availableCountries: Country[];\n  countriesWithRequiredRegion: string[];\n  optionalZipCountries: string[];\n}\n\ninterface UseCountryAndRegionFieldsOptions {\n  defaultCountry?: string;\n  formName?: string;\n}\n\nexport const useCountryAndRegionFields = (options: UseCountryAndRegionFieldsOptions = {}) => {\n  const { defaultCountry = 'US', formName = 'company_registration' } = options;\n  const [countriesData, setCountriesData] = useState<CountriesData | null>(null);\n  const [inputChange, setInputChange] = useState<Partial<CompanyFormData>>(() => {\n    // Check session storage first, like storefront-account does\n    try {\n      const savedData = sessionStorage.getItem(`${formName}_formData`);\n      return savedData\n        ? { countryCode: JSON.parse(savedData)?.countryCode }\n        : { countryCode: defaultCountry };\n    } catch (error) {\n      // If parsing fails, fall back to default country\n      return { countryCode: defaultCountry };\n    }\n  });\n  const [disableField, setDisableField] = useState(true);\n  const [loadingCountries, setLoadingCountries] = useState(true);\n  const [regionsData, setRegionsData] = useState<any[]>([]);\n\n  useEffect(() => {\n    setDisableField(true);\n    setLoadingCountries(true);\n    getCountries().then(({\n      availableCountries,\n      countriesWithRequiredRegion,\n      optionalZipCountries,\n    }) => {\n      setCountriesData({\n        availableCountries,\n        countriesWithRequiredRegion,\n        optionalZipCountries,\n      });\n      setDisableField(false);\n      setLoadingCountries(false);\n    }).catch((error) => {\n      console.error('Failed to load countries:', error);\n      setDisableField(false);\n      setLoadingCountries(false);\n    });\n  }, []);\n\n  // Load regions when country changes (matching EditCompanyProfile pattern)\n  useEffect(() => {\n    if (inputChange?.countryCode && countriesData) {\n      const selectedCountry = countriesData.availableCountries.find(\n        country => country.value === inputChange.countryCode\n      );\n      \n      if (selectedCountry?.availableRegions && selectedCountry.availableRegions.length > 0) {\n        const regions = selectedCountry.availableRegions.map((region: { id: number; code: string; name: string }) => ({\n          text: region.name,\n          value: `${region.code},${region.id}`,\n          id: region.id,\n          code: region.code,\n        }));\n        setRegionsData(regions);\n      } else {\n        setRegionsData([]);\n      }\n    } else {\n      setRegionsData([]);\n    }\n  }, [inputChange?.countryCode, countriesData]);\n\n  const countryOptions = useMemo(() => {\n    return countriesData?.availableCountries || [];\n  }, [countriesData]);\n\n  const isRequiredRegion = useMemo(() => {\n    if (!inputChange?.countryCode || !countriesData) return false;\n    return countriesData.countriesWithRequiredRegion.includes(inputChange.countryCode as string);\n  }, [inputChange?.countryCode, countriesData]);\n\n  const isRequiredPostCode = useMemo(() => {\n    if (!inputChange?.countryCode || !countriesData) return true;\n    return !countriesData.optionalZipCountries.includes(inputChange.countryCode as string);\n  }, [inputChange?.countryCode, countriesData]);\n\n  // Memoized options for region dropdown (matching EditCompanyProfile pattern)\n  const regionOptions = useMemo(() => {\n    return regionsData;\n  }, [regionsData]);\n\n  // Check if region should be a dropdown (has options) or text input (no options)\n  const hasRegions = useMemo(() => {\n    return regionOptions.length > 0;\n  }, [regionOptions.length]);\n\n  const handleInputChange = useCallback((field: keyof CompanyFormData, value: string | string[]) => {\n    setInputChange(prev => {\n      const updatedData = {\n        ...prev,\n        [field]: value,\n      };\n\n      // When country changes, clear region data (matching EditCompanyProfile pattern)\n      if (field === 'countryCode') {\n        updatedData.regionCode = '';\n        updatedData.regionId = undefined;\n      }\n\n      return updatedData;\n    });\n  }, []);\n\n  return {\n    countryOptions,\n    regionOptions,\n    isRequiredRegion,\n    isRequiredPostCode,\n    disableField,\n    loadingCountries,\n    hasRegions,\n    handleInputChange,\n    inputChange,\n  };\n};","/********************************************************************\n * ADOBE CONFIDENTIAL\n * __________________\n *\n *  Copyright 2025 Adobe\n *  All Rights Reserved.\n *\n * NOTICE:  All information contained herein is, and remains\n * the property of Adobe and its suppliers, if any. The intellectual\n * and technical concepts contained herein are proprietary to Adobe\n * and its suppliers and are protected by all applicable intellectual\n * property laws, including trade secret and copyright laws.\n * Dissemination of this information or reproduction of this material\n * is strictly forbidden unless prior written permission is obtained\n * from Adobe.\n *******************************************************************/\n\nimport { FieldsProps, FieldTypeEnum } from '../../../types/form.types';\nimport { CompanyFormData } from '../../../data/models/company';\n\nexport interface CompanyFieldsConfigOptions {\n  formData?: Partial<CompanyFormData>;\n  isRequiredRegion?: boolean;\n  isRequiredPostCode?: boolean;\n  hasRegions?: boolean;\n  disableField?: boolean;\n  translations: Record<string, string>;\n}\n\nexport const getCompanyFieldsConfig = (\n  options: CompanyFieldsConfigOptions\n): FieldsProps[] => {\n  const { \n    formData, \n    isRequiredRegion = false, \n    isRequiredPostCode = false, \n    hasRegions = false, \n    disableField = false,\n    translations = {}\n  } = options;\n  \n  // Helper function to get translated label\n  const getLabel = (key: string) => {\n    return translations?.[key] || key;\n  };\n\n  // Helper function to get translated placeholder using existing field labels\n  const getPlaceholder = (key: string) => {\n    const label = getLabel(key);\n    \n    // Create placeholder text from label\n    if (key === 'countryCode' || key === 'region' || key === 'adminGender') {\n      return `Select ${label.toLowerCase()}`;\n    }\n    return `Enter ${label.toLowerCase()}`;\n  };\n\n  // Common configuration for all fields\n  const commonConfig = {\n    isRequiredRegion,\n    isRequiredPostCode,\n  };\n  \n  return [\n    // Company Information Section\n    {\n      code: 'companyName',\n      name: 'companyName',\n      id: 'companyName',\n      label: getLabel('companyName'),\n      placeholder: getPlaceholder('companyName'),\n      required: true,\n      fieldType: FieldTypeEnum.TEXT,\n      isHidden: false,\n      customUpperCode: 'companyName',\n      defaultValue: formData?.companyName || '',\n      options: [],\n      maxlength: 40,\n      ...commonConfig,\n      validateRules: [],\n    },\n    {\n      code: 'legalName',\n      name: 'legalName',\n      id: 'legalName',\n      label: getLabel('legalName'),\n      placeholder: getPlaceholder('legalName'),\n      required: false,\n      fieldType: FieldTypeEnum.TEXT,\n      isHidden: false,\n      customUpperCode: 'legalName',\n      defaultValue: formData?.legalName || '',\n      options: [],\n      maxlength: 80,\n      validateRules: [],\n      ...commonConfig\n    },\n    {\n      code: 'companyEmail',\n      name: 'companyEmail',\n      id: 'companyEmail',\n      label: getLabel('companyEmail'),\n      placeholder: getPlaceholder('companyEmail'),\n      required: true,\n      fieldType: FieldTypeEnum.EMAIL,\n      isHidden: false,\n      customUpperCode: 'companyEmail',\n      defaultValue: formData?.companyEmail || '',\n      options: [],\n      maxlength: 254,\n      validateRules: [\n        { INPUT_VALIDATION: 'email' },\n        { MIN_TEXT_LENGTH: 5 },\n        { MAX_TEXT_LENGTH: 254 }\n      ],\n      ...commonConfig,\n    },\n    {\n      code: 'vatTaxId',\n      name: 'vatTaxId',\n      id: 'vatTaxId',\n      label: getLabel('vatTaxId'),\n      placeholder: getPlaceholder('vatTaxId'),\n      required: false,\n      fieldType: FieldTypeEnum.TEXT,\n      isHidden: false,\n      customUpperCode: 'vatTaxId',\n      defaultValue: formData?.vatTaxId || '',\n      options: [],\n      maxlength: 40,\n      validateRules: [],\n      ...commonConfig,\n    },\n    {\n      code: 'resellerId',\n      name: 'resellerId',\n      id: 'resellerId',\n      label: getLabel('resellerId'),\n      placeholder: getPlaceholder('resellerId'),\n      required: false,\n      fieldType: FieldTypeEnum.TEXT,\n      isHidden: false,\n      customUpperCode: 'resellerId',\n      defaultValue: formData?.resellerId || '',\n      options: [],\n      maxlength: 40,\n      validateRules: [],\n      ...commonConfig,\n    },\n\n    // Legal Address Section\n    {\n      code: 'street',\n      name: 'street',\n      id: 'street',\n      label: getLabel('street'),\n      placeholder: getPlaceholder('street'),\n      required: true,\n      fieldType: FieldTypeEnum.TEXT,\n      isHidden: false,\n      customUpperCode: 'street',\n      defaultValue: Array.isArray(formData?.street) ? formData.street[0] : formData?.street || '',\n      options: [],\n      validateRules: [],\n      ...commonConfig,\n    },\n    {\n      code: 'streetLine2',\n      name: 'streetLine2',\n      id: 'streetLine2',\n      label: getLabel('streetLine2'),\n      placeholder: getPlaceholder('streetLine2'),\n      required: false,\n      fieldType: FieldTypeEnum.TEXT,\n      isHidden: false,\n      customUpperCode: 'streetLine2',\n      defaultValue: Array.isArray(formData?.street) ? formData.street[1] : '',\n      options: [],\n      validateRules: [],\n      ...commonConfig,\n    },\n    {\n      code: 'city',\n      name: 'city',\n      id: 'city',\n      label: getLabel('city'),\n      placeholder: getPlaceholder('city'),\n      required: true,\n      fieldType: FieldTypeEnum.TEXT,\n      isHidden: false,\n      customUpperCode: 'city',\n      defaultValue: formData?.city || '',\n      options: [],\n      validateRules: [],\n      ...commonConfig,\n    },\n    {\n      code: 'countryCode',\n      name: 'countryCode',\n      id: 'countryCode',\n      label: getLabel('country'),\n      placeholder: getPlaceholder('country'),\n      required: true,\n      disabled: disableField,\n      fieldType: FieldTypeEnum.SELECT,\n      isHidden: false,\n      customUpperCode: 'countryCode',\n      defaultValue: formData?.countryCode || '',\n      options: [], \n      validateRules: [],\n    },\n    {\n      code: 'region',\n      name: 'region',\n      id: 'region',\n      label: getLabel('stateProvince'),\n      placeholder: getPlaceholder('stateProvince'),\n      required: isRequiredRegion,\n      disabled: false, \n      fieldType: hasRegions ? FieldTypeEnum.SELECT : FieldTypeEnum.TEXT,\n      isHidden: false,\n      customUpperCode: 'region',\n      defaultValue: formData?.regionCode || '',\n      options: [], \n    },\n    {\n      code: 'postcode',\n      name: 'postcode',\n      id: 'postcode',\n      label: getLabel('postalCode'),\n      placeholder: getPlaceholder('postalCode'),\n      required: isRequiredPostCode,\n      fieldType: FieldTypeEnum.TEXT,\n      isHidden: false,\n      customUpperCode: 'postcode',\n      defaultValue: formData?.postcode || '',\n      options: [],\n      validateRules: [\n        { INPUT_VALIDATION: 'postal-code' },\n        { MIN_TEXT_LENGTH: 3 },\n        { MAX_TEXT_LENGTH: 20 }\n      ],\n      ...commonConfig,\n    },\n    {\n      code: 'addressTelephone',\n      name: 'addressTelephone',\n      id: 'addressTelephone',\n      label: getLabel('telephone'),\n      placeholder: getPlaceholder('telephone'),\n      required: true,\n      fieldType: FieldTypeEnum.TEL,\n      isHidden: false,\n      customUpperCode: 'addressTelephone',\n      defaultValue: formData?.addressTelephone || '',\n      options: [],\n      validateRules: [\n        { INPUT_VALIDATION: 'phone' },\n        { MIN_TEXT_LENGTH: 1 },\n        { MAX_TEXT_LENGTH: 20 }\n      ],\n      ...commonConfig,\n    },\n\n    // Administrator Section\n    {\n      code: 'adminJobTitle',\n      name: 'adminJobTitle',\n      id: 'adminJobTitle',\n      label: getLabel('adminJobTitle'),\n      placeholder: getPlaceholder('adminJobTitle'),\n      required: false,\n      fieldType: FieldTypeEnum.TEXT,\n      isHidden: false,\n      customUpperCode: 'adminJobTitle',\n      defaultValue: formData?.adminJobTitle || '',\n      options: [],\n      validateRules: [],\n      ...commonConfig,\n    },\n    {\n      code: 'adminWorkTelephone',\n      name: 'adminWorkTelephone',\n      id: 'adminWorkTelephone',\n      label: getLabel('adminWorkTelephone'),\n      placeholder: getPlaceholder('adminWorkTelephone'),\n      required: false,\n      fieldType: FieldTypeEnum.TEL,\n      isHidden: false,\n      customUpperCode: 'adminWorkTelephone',\n      defaultValue: formData?.adminWorkTelephone || '',\n      options: [],\n      validateRules: [\n        { INPUT_VALIDATION: 'phone' },\n        { MIN_TEXT_LENGTH: 1 },\n        { MAX_TEXT_LENGTH: 20 }\n      ],\n      ...commonConfig,\n    },\n    {\n      code: 'adminEmail',\n      name: 'adminEmail',\n      id: 'adminEmail',\n      label: getLabel('adminEmail'),\n      placeholder: getPlaceholder('adminEmail'),\n      required: true,\n      fieldType: FieldTypeEnum.EMAIL,\n      isHidden: false,\n      customUpperCode: 'adminEmail',\n      defaultValue: formData?.adminEmail || '',\n      options: [],\n      validateRules: [\n        { INPUT_VALIDATION: 'email' },\n        { MIN_TEXT_LENGTH: 5 },\n        { MAX_TEXT_LENGTH: 254 }\n      ],\n      ...commonConfig,\n    },\n    {\n      code: 'adminFirstname',\n      name: 'adminFirstname',\n      id: 'adminFirstname',\n      label: getLabel('adminFirstname'),\n      placeholder: getPlaceholder('adminFirstname'),\n      required: true,\n      fieldType: FieldTypeEnum.TEXT,\n      isHidden: false,\n      customUpperCode: 'adminFirstname',\n      defaultValue: formData?.adminFirstname || '',\n      options: [],\n      validateRules: [\n        { INPUT_VALIDATION: 'name' },\n        { MIN_TEXT_LENGTH: 1 },\n        { MAX_TEXT_LENGTH: 255 }\n      ],\n      ...commonConfig,\n    },\n    {\n      code: 'adminLastname',\n      name: 'adminLastname',\n      id: 'adminLastname',\n      label: getLabel('adminLastname'),\n      placeholder: getPlaceholder('adminLastname'),\n      required: true,\n      fieldType: FieldTypeEnum.TEXT,\n      isHidden: false,\n      customUpperCode: 'adminLastname',\n      defaultValue: formData?.adminLastname || '',\n      options: [],\n      validateRules: [\n        { INPUT_VALIDATION: 'name' },\n        { MIN_TEXT_LENGTH: 1 },\n        { MAX_TEXT_LENGTH: 255 }\n      ],\n      ...commonConfig,\n    },\n    {\n      code: 'adminGender',\n      name: 'adminGender',\n      id: 'adminGender',\n      label: getLabel('adminGender'),\n      placeholder: getPlaceholder('adminGender'),\n      required: false,\n      fieldType: FieldTypeEnum.SELECT,\n      isHidden: false,\n      customUpperCode: 'adminGender',\n      defaultValue: formData?.adminGender?.toString() || '',\n      options: [\n        { value: '1', text: 'Male', isDefault: true },\n        { value: '2', text: 'Female', isDefault: false },\n        { value: '0', text: 'Not Specified', isDefault: false },\n      ],\n      validateRules: [],\n      ...commonConfig,\n    },\n  ];\n};","/********************************************************************\n * ADOBE CONFIDENTIAL\n * __________________\n *\n *  Copyright 2025 Adobe\n *  All Rights Reserved.\n *\n * NOTICE:  All information contained herein is, and remains\n * the property of Adobe and its suppliers, if any. The intellectual\n * and technical concepts contained herein are proprietary to Adobe\n * and its suppliers and are protected by all applicable intellectual\n * property laws, including trade secret and copyright laws.\n * Dissemination of this information or reproduction of this material\n * is strictly forbidden unless prior written permission is obtained\n * from Adobe.\n *******************************************************************/\n\ntype ErrorsList = Record<string, string>;\n\nexport type ValidationFieldsConfig = {\n  validateRules?: Record<string, string | number | boolean>[];\n  code?: string;\n  customUpperCode: string;\n  required: boolean;\n};\n\nexport type TranslationList = {\n  requiredFieldError: string;\n  lengthTextError: string;\n  numericError: string;\n  alphaNumWithSpacesError: string;\n  alphaNumericError: string;\n  alphaError: string;\n  emailError: string;\n  phoneError: string;\n  postalCodeError: string;\n  urlError: string;\n  nameError: string;\n};\n\nenum ConfigEnumLength {\n  MIN_TEXT_LENGTH = 'MIN_TEXT_LENGTH',\n  MAX_TEXT_LENGTH = 'MAX_TEXT_LENGTH',\n}\n\nexport enum InputValidation {\n  Numeric = 'numeric',\n  AlphanumWithSpaces = 'alphanum-with-spaces',\n  Alphanumeric = 'alphanumeric',\n  Alpha = 'alpha',\n  Email = 'email',\n  Phone = 'phone',\n  PostalCode = 'postal-code',\n  Length = 'length',\n  Url = 'url',\n  Name = 'name',\n}\n\nconst flattenObjectsArray = (arr: Record<string, string | number | boolean>[]): Record<string, string | number | boolean> =>\n  arr.reduce((acc, obj) => ({ ...acc, ...obj }), {});\n\nexport const validateNumeric = (value: string): boolean =>\n  /^[0-9]+$/.test(value);\n\nexport const validateAlphanumeric = (value: string): boolean =>\n  /^[a-zA-Z0-9]+$/.test(value);\n\nexport const validateAlphanumWithSpaces = (value: string): boolean =>\n  /^[a-zA-Z0-9\\s]+$/.test(value);\n\nexport const validateAlpha = (value: string): boolean =>\n  /^[a-zA-Z]+$/.test(value);\n\nexport const validateEmail = (value: string): boolean =>\n  /^[a-z0-9,!#$%&'*+/=?^_`{|}~-]+(\\.[a-z0-9,!#$%&'*+/=?^_`{|}~-]+)*@([a-z0-9-]+\\.)+[a-z]{2,}$/i.test(\n    value\n  );\n\nexport const validatePhone = (value: string): boolean =>\n  /(?:[\\d\\s+\\-()]{1,20})/u.test(value);\n\nexport const validateUrl = (value: string): boolean =>\n  /^(https?|ftp):\\/\\/[^\\s/$.?#].[^\\s]*$/i.test(value);\n\nexport const validatePostalCode = (value: string): boolean => {\n  return /^[A-Z0-9\\s-]{3,10}$/i.test(value);\n};\n\nexport const validateName = (value: string): boolean => {\n  return /^(?:[\\p{L}\\p{M},\\-_.'`&\\s\\d]){1,255}$/u.test(value);\n};\n\nexport const validateLength = (\n  value: string,\n  minLength: number,\n  maxLength: number\n): boolean => {\n  const length = value.length;\n  return length >= minLength && length <= maxLength;\n};\n\nexport const validationFields = (\n  value: string,\n  configs: ValidationFieldsConfig,\n  translations: TranslationList,\n  errorsList: ErrorsList\n) => {\n  const {\n    requiredFieldError,\n    lengthTextError,\n    numericError,\n    alphaNumWithSpacesError,\n    alphaNumericError,\n    alphaError,\n    emailError,\n    phoneError,\n    postalCodeError,\n    urlError,\n    nameError,\n  } = translations;\n\n  const fieldName = configs?.customUpperCode as string;\n  const defaultFields = { [fieldName]: '' };\n\n  if (errorsList[fieldName]) {\n    delete errorsList[fieldName];\n  }\n\n  const trimmedValue = value?.trim() || '';\n  \n  if (configs?.required && (!trimmedValue || trimmedValue === 'false')) {\n    return { [fieldName]: requiredFieldError };\n  }\n\n  if (!configs?.required && !trimmedValue) {\n    return defaultFields;\n  }\n\n  if (!configs?.validateRules?.length) return defaultFields;\n\n  const validateRulesConfig = flattenObjectsArray(configs?.validateRules);\n\n  const min = Number(validateRulesConfig[ConfigEnumLength.MIN_TEXT_LENGTH]) ?? 1;\n  const max = Number(validateRulesConfig[ConfigEnumLength.MAX_TEXT_LENGTH]) ?? 255;\n\n  // Use trimmed value for length validation\n  if (!validateLength(trimmedValue, min, max)) {\n    return {\n      [fieldName]: lengthTextError.replace('{min}', min.toString()).replace('{max}', max.toString()),\n    };\n  }\n\n  const validationMap = {\n    [InputValidation.Numeric]: {\n      validate: validateNumeric,\n      error: numericError,\n    },\n    [InputValidation.AlphanumWithSpaces]: {\n      validate: validateAlphanumWithSpaces,\n      error: alphaNumWithSpacesError,\n    },\n    [InputValidation.Alphanumeric]: {\n      validate: validateAlphanumeric,\n      error: alphaNumericError,\n    },\n    [InputValidation.Alpha]: {\n      validate: validateAlpha,\n      error: alphaError,\n    },\n    [InputValidation.Email]: {\n      validate: validateEmail,\n      error: emailError,\n    },\n    [InputValidation.Phone]: {\n      validate: validatePhone,\n      error: phoneError,\n    },\n    [InputValidation.PostalCode]: {\n      validate: (value: string) => validatePostalCode(value), \n      error: postalCodeError,\n    },\n    [InputValidation.Url]: {\n      validate: validateUrl,\n      error: urlError,\n    },\n    [InputValidation.Name]: {\n      validate: validateName,\n      error: nameError,\n    },\n  };\n\n  const validation =\n    validationMap[\n      validateRulesConfig['INPUT_VALIDATION'] as keyof typeof validationMap\n    ];\n\n  if (\n    validation &&\n    !validation.validate(trimmedValue) &&\n    !errorsList[fieldName]?.length\n  ) {\n    return { [fieldName]: validation.error };\n  }\n\n  return defaultFields;\n};","/********************************************************************\n * ADOBE CONFIDENTIAL\n * __________________\n *\n *  Copyright 2025 Adobe\n *  All Rights Reserved.\n *\n * NOTICE:  All information contained herein is, and remains\n * the property of Adobe and its suppliers, if any. The intellectual\n * and technical concepts contained herein are proprietary to Adobe\n * and its suppliers and are protected by all applicable intellectual\n * property laws, including trade secret and copyright laws.\n * Dissemination of this information or reproduction of this material\n * is strictly forbidden unless prior written permission is obtained\n * from Adobe.\n *******************************************************************/\n\nimport { validationFields, ValidationFieldsConfig, TranslationList } from './fieldValidationRules';\nimport { FieldsProps } from '../../../types/form.types';\n\n// Extract validation-related translations from the complete translations object\nconst getValidationTranslations = (translations: any): TranslationList => ({\n  requiredFieldError: translations.requiredFieldError,\n  lengthTextError: translations.lengthTextError,\n  numericError: translations.numericError,\n  alphaNumWithSpacesError: translations.alphaNumWithSpacesError,\n  alphaNumericError: translations.alphaNumericError,\n  alphaError: translations.alphaError,\n  emailError: translations.emailError,\n  phoneError: translations.phoneError,\n  postalCodeError: translations.postalCodeError,\n  urlError: translations.urlError,\n  nameError: translations.nameError,\n});\n\nexport type ValidationResult = {\n  isValid: boolean;\n  fieldErrors: Record<string, string>;\n};\n\nexport type FormValidationConfig = {\n  fieldsConfig: FieldsProps[];\n  translations: TranslationList;\n};\n\nconst createValidationConfig = (\n  fieldsConfig: FieldsProps[],\n  translations: any\n): FormValidationConfig => ({\n  fieldsConfig,\n  translations: getValidationTranslations(translations),\n});\n\nexport const validateField = (\n  fieldCode: string,\n  value: string | string[] | number | boolean,\n  config: FormValidationConfig\n): string => {\n  const { fieldsConfig, translations } = config;\n  const fieldConfig = fieldsConfig.find(field => field.code === fieldCode);\n  \n  if (!fieldConfig) return '';\n\n  const stringValue = Array.isArray(value) ? value.join('') : value.toString();\n  \n  const validationConfig: ValidationFieldsConfig = {\n    validateRules: fieldConfig.validateRules || [],\n    customUpperCode: fieldConfig.customUpperCode,\n    required: fieldConfig.required,\n  };\n\n  const result = validationFields(\n    stringValue,\n    validationConfig,\n    translations,\n    {}\n  );\n\n  return result[fieldConfig.customUpperCode] || '';\n};\n\nexport const validateAllFields = (\n  formData: Record<string, string | string[] | number | boolean>,\n  config: FormValidationConfig\n): ValidationResult => {\n  const { fieldsConfig, translations } = config;\n  \n  // Read the required flags from fieldsConfig (they are the same for all fields)\n  const firstField = fieldsConfig[0];\n  const isRequiredRegion = firstField?.isRequiredRegion || false;\n  const isRequiredPostCode = firstField?.isRequiredPostCode || false;\n  let hasErrors = false;\n  const fieldErrors: Record<string, string> = {};\n\n  // Validate all configured fields\n  Object.entries(formData).forEach(([key, value]) => {\n    const fieldConfig = fieldsConfig.find(field => field.code === key);\n    if (!fieldConfig) return;\n\n    const stringValue = Array.isArray(value) ? value.join('') : value.toString();\n    \n    const validationConfig: ValidationFieldsConfig = {\n      validateRules: fieldConfig.validateRules,\n      customUpperCode: fieldConfig.customUpperCode,\n      required: fieldConfig.required,\n    };\n\n    const result = validationFields(\n      stringValue,\n      validationConfig,\n      translations,\n      {}\n    );\n\n    if (result[fieldConfig.customUpperCode]) {\n      fieldErrors[fieldConfig.customUpperCode] = result[fieldConfig.customUpperCode];\n      hasErrors = true;\n    }\n  });\n\n  // Additional specific validation for dynamic requirements\n  const hasRegionId = typeof formData.regionId === 'number' && formData.regionId > 0;\n  const hasRegionCode = formData.regionCode && formData.regionCode.toString().trim();\n  const hasRegion = formData.region && formData.region.toString().trim();\n  \n  if (isRequiredRegion && !hasRegionId && !hasRegionCode && !hasRegion) {\n    fieldErrors.region = translations.requiredFieldError;\n    hasErrors = true;\n  }\n  \n  if (isRequiredPostCode && !formData.postcode.toString().trim()) {\n    fieldErrors.postcode = translations.requiredFieldError;\n    hasErrors = true;\n  }\n\n  return {\n    isValid: !hasErrors,\n    fieldErrors\n  };\n};\n\nexport const updateFieldError = (\n  currentErrors: Record<string, string>,\n  fieldCode: string,\n  errorMessage: string\n): Record<string, string> => {\n  return {\n    ...currentErrors,\n    [fieldCode]: errorMessage\n  };\n};\n\n// Convenience functions that handle config creation internally\nexport const validateSingleField = (\n  fieldCode: string,\n  value: string | string[] | number | boolean,\n  fieldsConfig: FieldsProps[],\n  translations: any\n): string => {\n  const config = createValidationConfig(fieldsConfig, translations);\n  return validateField(fieldCode, value, config);\n};\n\nexport const validateFormData = (\n  formData: Record<string, string | string[] | number | boolean>,\n  fieldsConfig: FieldsProps[],\n  translations: any\n): ValidationResult => {\n  const config = createValidationConfig(fieldsConfig, translations);\n  return validateAllFields(formData, config);\n};","/********************************************************************\n * ADOBE CONFIDENTIAL\n * __________________\n *\n *  Copyright 2025 Adobe\n *  All Rights Reserved.\n *\n * NOTICE:  All information contained herein is, and remains\n * the property of Adobe and its suppliers, if any. The intellectual\n * and technical concepts contained herein are proprietary to Adobe\n * and its suppliers and are protected by all applicable intellectual\n * property laws, including trade secret and copyright laws.\n * Dissemination of this information or reproduction of this material\n * is strictly forbidden unless prior written permission is obtained\n * from Adobe.\n *******************************************************************/\n\nimport React from 'react';\nimport { CompanyFormData } from '../../../data/models/company';\nimport { validateSingleField } from './formValidation';\nimport { FieldsProps } from '../../../types/form.types';\n\nexport type FieldChangeHandler = (key: string, value: string | string[] | number | boolean) => void;\nexport type ValidationHandler = (fieldCode: string, value: string | string[] | number | boolean) => void;\n\nexport interface FieldHandlersConfig {\n  setFormData: React.Dispatch<React.SetStateAction<CompanyFormData>>;\n  hasRegions: boolean;\n  regionOptions: any[];\n  fieldsConfig: FieldsProps[];\n  formTranslations: any;\n  setFieldErrors?: React.Dispatch<React.SetStateAction<Record<string, string>>>;\n}\n\nexport const createFieldHandlers = (config: FieldHandlersConfig) => {\n  const { setFormData, hasRegions, regionOptions, fieldsConfig, formTranslations, setFieldErrors } = config;\n\n  // Validation helper\n  const validateField = (fieldCode: string, value: string | string[] | number | boolean) => {\n    const errorMessage = validateSingleField(fieldCode, value, fieldsConfig, formTranslations);\n    if (setFieldErrors && errorMessage) {\n      setFieldErrors((prev: Record<string, string>) => ({\n        ...prev,\n        [fieldCode]: errorMessage\n      }));\n    } else if (setFieldErrors) {\n      setFieldErrors((prev: Record<string, string>) => {\n        const updated = { ...prev };\n        delete updated[fieldCode];\n        return updated;\n      });\n    }\n  };\n\n  const handleStreetChange = (value: string | string[]) => {\n    setFormData(prev => {\n      // Ensure prev.street is always treated as an array\n      const currentStreet = Array.isArray(prev.street) ? prev.street : [prev.street || '', ''];\n      const newStreet = Array.isArray(value) ? value : [value, currentStreet[1] || ''];\n      return {\n        ...prev,\n        street: newStreet\n      };\n    });\n    validateField('street', value);\n  };\n\n  const handleStreetLine2Change = (value: string) => {\n    setFormData(prev => {\n      // Ensure prev.street is always treated as an array\n      const currentStreet = Array.isArray(prev.street) ? prev.street : [prev.street || '', ''];\n      const newStreet = [currentStreet[0] || '', value];\n      return {\n        ...prev,\n        street: newStreet\n      };\n    });\n    validateField('streetLine2', value);\n  };\n\n  const handleRegionTextChange = (value: string) => {\n    setFormData(prev => ({\n      ...prev,\n      region: value,\n      regionCode: '',\n      regionId: undefined\n    }));\n    validateField('region', value);\n  };\n\n  const handleRegionCodeChange = (value: string) => {\n    setFormData(prev => ({\n      ...prev,\n      regionCode: value,\n      ...(hasRegions ? {} : { regionId: undefined })\n    }));\n    validateField('regionCode', value);\n  };\n\n  const handleRegionDropdownChange = (value: string | number) => {\n    const regionId = typeof value === 'string' ? parseInt(value, 10) || undefined : value;\n    \n    setFormData(prev => {\n      const updated = { ...prev, regionId };\n      \n      // Find corresponding region code\n      if (regionId && regionOptions.length > 0) {\n        const selectedRegion = regionOptions.find((option: any) => \n          option.id === regionId || option.value === regionId?.toString()\n        );\n        if (selectedRegion && selectedRegion.code) {\n          updated.regionCode = selectedRegion.code;\n        }\n      }\n      \n      return updated;\n    });\n    validateField('regionId', value);\n  };\n\n  const handleCountryChange = (value: string) => {\n    setFormData(prev => ({\n      ...prev,\n      countryCode: value,\n      regionCode: '',\n      regionId: undefined,\n      region: ''\n    }));\n    validateField('countryCode', value);\n    // Clear region errors when country changes since required status may change\n    if (setFieldErrors) {\n      setFieldErrors((prev: Record<string, string>) => {\n        const updated = { ...prev };\n        delete updated.region;\n        delete updated.regionCode;\n        delete updated.regionId;\n        return updated;\n      });\n    }\n  };\n\n  const handleGenericFieldChange = (key: string, value: string | string[] | number | boolean) => {\n    setFormData(prev => ({\n      ...prev,\n      [key]: value\n    }));\n    validateField(key, value);\n  };\n\n  // Main input change handler that delegates to specific handlers\n  const handleInputChangeFromValues = (values: Record<string, string | string[] | number | boolean>) => {\n    Object.entries(values).forEach(([key, value]) => {\n      switch (key) {\n        case 'street':\n          handleStreetChange(value as string | string[]);\n          break;\n        case 'streetLine2':\n          handleStreetLine2Change(value as string);\n          break;\n        case 'region':\n          handleRegionTextChange(value as string);\n          break;\n        case 'regionCode':\n          handleRegionCodeChange(value as string);\n          break;\n        case 'regionId':\n          handleRegionDropdownChange(value as string | number);\n          break;\n        case 'countryCode':\n          handleCountryChange(value as string);\n          break;\n        default:\n          handleGenericFieldChange(key, value);\n          break;\n      }\n    });\n  };\n\n  // DOM event handler that delegates to specific handlers\n  const handleInputChange = (event: Event) => {\n    const target = event.target as HTMLInputElement | HTMLSelectElement;\n    if (!target) return;\n    \n    const { name, value } = target;\n    \n    switch (name) {\n      case 'street':\n        handleStreetChange(value);\n        break;\n      case 'streetLine2':\n        handleStreetLine2Change(value);\n        break;\n      case 'region':\n        if (hasRegions) {\n          handleRegionDropdownChange(value);\n        } else {\n          handleRegionTextChange(value);\n        }\n        break;\n      case 'regionCode':\n        handleRegionCodeChange(value);\n        break;\n      case 'countryCode':\n        handleCountryChange(value);\n        break;\n      default:\n        handleGenericFieldChange(name, value);\n        break;\n    }\n  };\n\n  return {\n    handleInputChange,\n    handleInputChangeFromValues,\n    handleStreetChange,\n    handleStreetLine2Change,\n    handleRegionTextChange,\n    handleRegionCodeChange,\n    handleRegionDropdownChange,\n    handleCountryChange,\n    handleGenericFieldChange,\n  };\n};","/********************************************************************\n * ADOBE CONFIDENTIAL\n * __________________\n *\n *  Copyright 2025 Adobe\n *  All Rights Reserved.\n *\n * NOTICE:  All information contained herein is, and remains\n * the property of Adobe and its suppliers, if any. The intellectual\n * and technical concepts contained herein are proprietary to Adobe\n * and its suppliers and are protected by all applicable intellectual\n * property laws, including trade secret and copyright laws.\n * Dissemination of this information or reproduction of this material\n * is strictly forbidden unless prior written permission is obtained\n * from Adobe.\n *******************************************************************/\n\nimport { useState, useMemo, useEffect } from 'preact/hooks';\nimport { useText } from '@adobe-commerce/elsie/i18n';\n\nimport { createCompany } from '../api/createCompany/createCompany';\nimport { getStoreConfig } from '../api/getStoreConfig/getStoreConfig';\nimport { validateCompanyEmail } from '../api/validateCompanyEmail/validateCompanyEmail';\nimport { useCountryAndRegionFields } from './useCountryAndRegionFields';\nimport { getCompanyFieldsConfig } from '../components/CompanyRegistrationForm/Form/getCompanyFieldsConfig';\nimport { createFieldHandlers } from '../components/CompanyRegistrationForm/Form/fieldHandlers';\nimport { validateFormData, validateSingleField } from '../components/CompanyRegistrationForm/Form/formValidation';\n\nexport interface UseCompanyRegistrationFormProps {\n  onSuccess?: (company: any) => void;\n  onError?: (errors: string[]) => void;\n}\n\nexport interface UseCompanyRegistrationFormReturn {\n  // Form state\n  formValues: Record<string, string | number | boolean | string[]>;\n  fieldErrors: Record<string, string>;\n  isSubmitting: boolean;\n  loadingStoreConfig: boolean;\n  \n  // Form configuration\n  fieldsConfig: any[];\n  \n  // From useCountryAndRegionFields\n  countryOptions: any[];\n  regionOptions: any[];\n  loadingCountries: boolean;\n  \n  // Form handlers\n  handleInputChange: (values: Record<string, string | string[] | number | boolean>) => void;\n  handleBlur: (event: Event) => void;\n  handleFormSubmit: (event: SubmitEvent, isValid: boolean) => Promise<void>;\n  \n  // Translations\n  translations: Record<string, string>;\n  formTranslations: Record<string, string>;\n}\n\nexport const useCompanyRegistrationForm = ({\n  onSuccess,\n  onError,\n}: UseCompanyRegistrationFormProps): UseCompanyRegistrationFormReturn => {\n  const [isSubmitting, setIsSubmitting] = useState(false);\n  const [fieldErrors, setFieldErrors] = useState<Record<string, string>>({});\n  const [defaultCountry, setDefaultCountry] = useState('US');\n  const [loadingStoreConfig, setLoadingStoreConfig] = useState(true);\n\n  const {\n    countryOptions,\n    regionOptions,\n    isRequiredRegion,\n    isRequiredPostCode,\n    hasRegions,\n    loadingCountries,\n    disableField,\n    handleInputChange: handleCompanyFormChange,\n  } = useCountryAndRegionFields({\n    defaultCountry,\n    formName: 'companyRegistration',\n  });\n\n\n  const [formValues, setFormValues] = useState<Record<string, string | number | boolean | string[]>>({\n    countryCode: defaultCountry,\n    region: '',\n    regionCode: '',\n    regionId: '',\n    street: ['', ''],\n  });\n\n\n  // Fetch store config to get default country\n  useEffect(() => {\n    const fetchStoreConfig = async () => {\n      try {\n        setLoadingStoreConfig(true);\n        const storeConfig = await getStoreConfig();\n        const country = storeConfig.defaultCountry || 'US';\n        setDefaultCountry(country);\n        setFormValues(prev => ({ ...prev, countryCode: country }));\n      } catch (error) {\n        console.error('Failed to load store config:', error);\n        // Keep default fallback country 'US'\n      } finally {\n        setLoadingStoreConfig(false);\n      }\n    };\n\n    fetchStoreConfig();\n  }, []);\n\n  // Initialize the hook with default country when component mounts\n  useEffect(() => {\n    if (defaultCountry && !loadingStoreConfig) {\n      handleCompanyFormChange('countryCode', defaultCountry);\n    }\n  }, [defaultCountry, handleCompanyFormChange, loadingStoreConfig]);\n\n  const formTranslations = useText({\n    requiredFieldError: 'Company.shared.validation.required',\n    lengthTextError: 'Company.FormText.lengthTextError',\n    numericError: 'Company.FormText.numericError',\n    alphaNumWithSpacesError: 'Company.FormText.alphaNumWithSpacesError',\n    alphaNumericError: 'Company.FormText.alphaNumericError',\n    alphaError: 'Company.FormText.alphaError',\n    emailError: 'Company.shared.validation.invalidEmail',\n    phoneError: 'Company.shared.validation.phoneInvalid',\n    postalCodeError: 'Company.shared.validation.postalCodeInvalid',\n    urlError: 'Company.FormText.urlError',\n    nameError: 'Company.FormText.nameError',\n  });\n\n  const translations = useText({\n    title: 'Company.shared.fields.title',\n    submitButton: 'Company.shared.fields.submit',\n    submittingButton: 'Company.shared.fields.submitting',\n    cancelButton: 'Company.shared.buttons.cancel',\n    createCompanyError: 'Company.shared.fields.createCompanyError',\n    unexpectedError: 'Company.shared.fields.unexpectedError',\n    emailNotAvailable: 'Company.shared.validation.emailNotAvailable',\n    // Field labels for placeholder generation\n    companyName: 'Company.shared.fields.companyName',\n    legalName: 'Company.shared.fields.legalName',\n    companyEmail: 'Company.shared.fields.companyEmail',\n    vatTaxId: 'Company.shared.fields.vatTaxId',\n    resellerId: 'Company.shared.fields.resellerId',\n    street: 'Company.shared.fields.street',\n    streetLine2: 'Company.shared.fields.streetLine2',\n    city: 'Company.shared.fields.city',\n    country: 'Company.shared.fields.country',\n    stateProvince: 'Company.shared.fields.stateProvince',\n    postalCode: 'Company.shared.fields.postalCode',\n    telephone: 'Company.shared.fields.telephone',\n    adminJobTitle: 'Company.shared.fields.adminJobTitle',\n    adminWorkTelephone: 'Company.shared.fields.adminWorkTelephone',\n    adminEmail: 'Company.shared.fields.adminEmail',\n    adminFirstname: 'Company.shared.fields.adminFirstname',\n    adminLastname: 'Company.shared.fields.adminLastname',\n    adminGender: 'Company.shared.fields.adminGender',\n  });\n\n  // Generate fields config\n  const fieldsConfig = useMemo(() => {\n    const config = getCompanyFieldsConfig({\n      formData: {\n        countryCode: formValues.countryCode as string,\n        regionCode: formValues.regionCode as string,\n        regionId: formValues.regionId as number,\n      },\n      isRequiredRegion,\n      isRequiredPostCode,\n      hasRegions,\n      disableField,\n      translations,\n    });\n    \n    return config.map((field: any) => {\n      if (field.code === 'region') {\n        return {\n          ...field,\n          required: isRequiredRegion,\n          disabled: loadingCountries,\n          fieldType: hasRegions ? 'SELECT' : 'TEXT',\n          options: hasRegions ? regionOptions.map(region => ({\n            text: region.text,\n            value: region.value,\n            isDefault: false,\n          })) : [],\n        };\n      }\n      if (field.code === 'postcode') {\n        return {\n          ...field,\n          required: true,\n        };\n      }\n      if (field.code === 'countryCode') {\n        return {\n          ...field,\n          disabled: disableField || loadingCountries,\n          options: countryOptions.map(country => ({\n            text: country.text,\n            value: country.value,\n            isDefault: false,\n          })),\n        };\n      }\n      return field;\n    });\n  }, [isRequiredRegion, isRequiredPostCode, hasRegions, loadingCountries, disableField, countryOptions, regionOptions, formValues.countryCode, formValues.regionCode, formValues.regionId, translations]);\n\n  const validateForm = (formData: any): boolean => {\n    const validation = validateFormData(formData, fieldsConfig, formTranslations);\n    setFieldErrors(validation.fieldErrors);\n    \n    return validation.isValid;\n  };\n\n  // Create field handlers\n  const fieldHandlers = useMemo(() => createFieldHandlers({\n    setFormData: setFormValues as any,\n    hasRegions,\n    regionOptions,\n    fieldsConfig,\n    formTranslations,\n    setFieldErrors,\n  }), [hasRegions, regionOptions, fieldsConfig, formTranslations]);\n\n  const handleInputChange = (values: Record<string, string | string[] | number | boolean>) => {\n    // Use the field handlers to process the values\n    fieldHandlers.handleInputChangeFromValues(values);\n    \n    // Handle special cases that need additional processing\n    Object.entries(values).forEach(([key, value]) => {\n      if (key === 'countryCode') {\n        handleCompanyFormChange('countryCode', value as string);\n      }\n    });\n  };\n\n  const handleBlur = (event: Event) => {\n    const target = event.target as HTMLInputElement;\n    const { name, value } = target;\n    \n    // Find the field configuration\n    const fieldConfig = fieldsConfig.find(field => field.customUpperCode === name);\n    \n    if (fieldConfig) {\n      // Validate this specific field using field code\n      const validation = validateSingleField(fieldConfig.code, value, fieldsConfig, formTranslations);\n      \n      // Update field errors - clear if valid, set if invalid\n      setFieldErrors(prev => ({\n        ...prev,\n        [name]: validation || ''\n      }));\n    }\n  };\n\n  const handleFormSubmit = async (event: SubmitEvent, isValid: boolean) => {\n    // Get form data from the form\n    const formElement = event.target as HTMLFormElement;\n    const formData = new FormData(formElement);\n    const rawFormValues: Record<string, any> = {};\n    \n    for (const [key, value] of formData.entries()) {\n      rawFormValues[key] = value;\n    }\n\n    const finalFormValues = {\n      ...rawFormValues,\n      ...formValues \n    };\n\n    const formIsValid = validateForm(finalFormValues);\n    \n    if (!isValid || !formIsValid) {\n      return;\n    }\n\n    setIsSubmitting(true);\n\n    try {\n      // Validate company email availability before creating the company\n      const emailValidation = await validateCompanyEmail(finalFormValues.companyEmail as string);\n      if (!emailValidation.isValid) {\n        setFieldErrors(prev => ({\n          ...prev,\n          companyEmail: emailValidation.error || translations.emailNotAvailable,\n        }));\n        setIsSubmitting(false);\n        return;\n      }\n      const result = await createCompany(finalFormValues);\n      \n      if (result.success && result.company) {\n        onSuccess?.(result.company);\n      } else {\n        const errorMessages = result.errors || [translations.createCompanyError];\n        onError?.(errorMessages);\n      }\n    } catch (error) {\n      const errorMessage = error instanceof Error ? error.message : translations.unexpectedError;\n      onError?.([errorMessage]);\n    } finally {\n      setIsSubmitting(false);\n    }\n  };\n\n  return {\n    // Form state\n    formValues,\n    fieldErrors,\n    isSubmitting,\n    loadingStoreConfig,\n    \n    // Form configuration\n    fieldsConfig,\n    \n    // From useCountryAndRegionFields\n    countryOptions,\n    regionOptions,\n    loadingCountries,\n    \n    // Form handlers\n    handleInputChange,\n    handleBlur,\n    handleFormSubmit,\n    \n    // Translations\n    translations,\n    formTranslations,\n  };\n};\n","/********************************************************************\n * ADOBE CONFIDENTIAL\n * __________________\n *\n *  Copyright 2025 Adobe\n *  All Rights Reserved.\n *\n * NOTICE:  All information contained herein is, and remains\n * the property of Adobe and its suppliers, if any. The intellectual\n * and technical concepts contained herein are proprietary to Adobe\n * and its suppliers and are protected by all applicable intellectual\n * property laws, including trade secret and copyright laws.\n * Dissemination of this information or reproduction of this material\n * is strictly forbidden unless prior written permission is obtained\n * from Adobe.\n *******************************************************************/\n\nimport { FunctionComponent } from 'preact';\nimport { Button, InLineAlert } from '@adobe-commerce/elsie/components';\nimport { classes } from '@adobe-commerce/elsie/lib';\nimport { Form } from './Form/Form';\nimport { CompanyFormSlots } from '../../types/form.types';\nimport { Company } from '../../data/models/company';\nimport { useCompanyRegistrationForm } from '../../hooks/useCompanyRegistrationForm';\nimport { InLineAlertProps } from '../../types/companyProfile.types';\nimport '@adobe-commerce/storefront-design/dist/css/base.css';\nimport './CompanyRegistrationForm.css';\n\nexport interface CompanyRegistrationFormProps {\n  onSuccess?: (company: Company) => void;\n  onError?: (errors: string[]) => void;\n  className?: string;\n  slots?: CompanyFormSlots;\n  hideActionFormButtons?: boolean;\n  inLineAlertProps?: InLineAlertProps;\n}\n\nexport const CompanyRegistrationForm: FunctionComponent<CompanyRegistrationFormProps> = ({\n  onSuccess,\n  onError,\n  className = '',\n  slots,\n  hideActionFormButtons = false,\n  inLineAlertProps,\n}) => {\n  const {\n    // Form state\n    formValues,\n    fieldErrors,\n    isSubmitting,\n    loadingStoreConfig,\n    \n    // Form configuration\n    fieldsConfig,\n    \n    // From useCountryAndRegionFields\n    countryOptions,\n    regionOptions,\n    loadingCountries,\n    \n    // Form handlers\n    handleInputChange,\n    handleBlur,\n    handleFormSubmit,\n    \n    // Translations\n    translations,\n  } = useCompanyRegistrationForm({\n    onSuccess,\n    onError,\n  });\n\n  // Show loading state while initial data is being fetched\n  const isInitialLoading = loadingStoreConfig || loadingCountries;\n\n  return (\n    <div className={classes(['company-form-wrapper', className])}>\n      <h2>{translations.title}</h2>\n      {inLineAlertProps?.text && (\n        <InLineAlert\n          className=\"company-form-wrapper__notification\"\n          type={inLineAlertProps.type}\n          variant=\"secondary\"\n          heading={inLineAlertProps.text}\n          icon={inLineAlertProps.icon}\n          data-testid=\"companyRegistrationFormAlert\"\n        />\n      )}\n      <Form\n        regionOptions={regionOptions}\n        countryOptions={countryOptions}\n        slots={slots}\n        className=\"company-registration-form\"\n        name=\"companyRegistrationForm\"\n        fieldsConfig={fieldsConfig}\n        values={formValues}\n        errors={fieldErrors}\n        onChange={handleInputChange}\n        onBlur={handleBlur}\n        onSubmit={handleFormSubmit}\n        loading={isInitialLoading}\n        submitting={isSubmitting}\n      >\n        {/* Submit Button Section */}\n        {!hideActionFormButtons && (\n          <div className={classes(['company-form-wrapper__buttons'])}>\n            <Button\n              type=\"submit\"\n              disabled={isSubmitting || isInitialLoading}\n              className=\"company-form-wrapper__submit\"\n            >\n              {translations.submitButton}\n            </Button>\n          </div>\n        )}\n      </Form>\n    </div>\n  );\n};","/********************************************************************\n * ADOBE CONFIDENTIAL\n * __________________\n *\n *  Copyright 2025 Adobe\n *  All Rights Reserved.\n *\n * NOTICE:  All information contained herein is, and remains\n * the property of Adobe and its suppliers, if any. The intellectual\n * and technical concepts contained herein are proprietary to Adobe\n * and its suppliers and are protected by all applicable intellectual\n * property laws, including trade secret and copyright laws.\n * Dissemination of this information or reproduction of this material\n * is strictly forbidden unless prior written permission is obtained\n * from Adobe.\n *******************************************************************/\n\nimport { FunctionComponent } from 'preact';\nimport { useState, useEffect } from 'preact/hooks';\nimport { useText } from '@adobe-commerce/elsie/i18n';\nimport { getCountries } from '@/company-management/api/getCountries';\nimport { Company } from '@/company-management/data/models/company';\nimport '@adobe-commerce/storefront-design/dist/css/base.css';\nimport './CompanyRegistrationSuccess.css';\n\n\nexport interface CompanyRegistrationSuccessProps {\n  company: Company;\n}\n\nexport const CompanyRegistrationSuccess: FunctionComponent<CompanyRegistrationSuccessProps> = ({\n  company\n}) => {\n  const [countryName, setCountryName] = useState<string>('');\n\n  const translations = useText({\n    pendingApproval: 'Company.CompanyRegistration.success.pendingApproval',\n    companyDetails: 'Company.CompanyRegistration.success.companyDetails',\n    companyName: 'Company.shared.fields.companyName',\n    companyEmail: 'Company.shared.fields.companyEmail',\n    legalName: 'Company.shared.fields.legalName',\n    vatTaxId: 'Company.shared.fields.vatTaxId',\n    resellerId: 'Company.shared.fields.resellerId',\n    address: 'Company.shared.fields.legalAddress',\n    street: 'Company.shared.fields.street',\n    city: 'Company.shared.fields.city',\n    stateProvince: 'Company.shared.fields.stateProvince',\n    postcode: 'Company.shared.fields.postcode',\n    country: 'Company.shared.fields.country',\n    telephone: 'Company.shared.fields.telephone',\n    companyAdmin: 'Company.shared.fields.companyAdmin',\n    adminFirstname: 'Company.shared.fields.adminFirstname',\n    adminLastname: 'Company.shared.fields.adminLastname',\n    adminEmail: 'Company.shared.fields.adminEmail',\n    adminJobTitle: 'Company.shared.fields.adminJobTitle',\n    adminWorkTelephone: 'Company.shared.fields.adminWorkTelephone',\n  });\n\n  // Fetch country name based on country code\n  useEffect(() => {\n    const fetchCountryName = async () => {\n      if (company.legalAddress?.countryCode) {\n        try {\n          const { availableCountries } = await getCountries();\n          const country = availableCountries.find(c => c.value === company.legalAddress?.countryCode);\n          if (country) {\n            setCountryName(country.text);\n          }\n        } catch (error) {\n          console.error('Failed to fetch countries:', error);\n          // Fallback to country code if API fails\n          setCountryName(company.legalAddress.countryCode);\n        }\n      }\n    };\n\n    fetchCountryName();\n  }, [company.legalAddress?.countryCode]); \n\n  return (\n    <div className={`company-registration-success`}>\n      <div className=\"company-registration-success__header\">\n        <p className=\"company-registration-success__pending\">\n          {translations.pendingApproval}\n        </p>\n      </div>\n\n      <div className=\"company-registration-success__details\">\n        <h2 className=\"company-registration-success__details-title\">\n          {translations.companyDetails}\n        </h2>\n        \n        <div className=\"company-registration-success__grid\">\n          <div className=\"company-registration-success__item\">\n            <span className=\"company-registration-success__label\">\n              {translations.companyName}:\n            </span>\n            <span className=\"company-registration-success__value\">{company.name}</span>\n          </div>\n\n          {company.legalName && (\n            <div className=\"company-registration-success__item\">\n              <span className=\"company-registration-success__label\">\n                {translations.legalName}:\n              </span>\n              <span className=\"company-registration-success__value\">{company.legalName}</span>\n            </div>\n          )}\n\n          <div className=\"company-registration-success__item\">\n            <span className=\"company-registration-success__label\">\n              {translations.companyEmail}:\n            </span>\n            <span className=\"company-registration-success__value\">{company.email}</span>\n          </div>\n\n         \n\n          {company.vatTaxId && (\n            <div className=\"company-registration-success__item\">\n              <span className=\"company-registration-success__label\">\n                {translations.vatTaxId}:\n              </span>\n              <span className=\"company-registration-success__value\">{company.vatTaxId}</span>\n            </div>\n          )}\n\n          {company.resellerId && (\n            <div className=\"company-registration-success__item\">\n              <span className=\"company-registration-success__label\">\n                {translations.resellerId}:\n              </span>\n              <span className=\"company-registration-success__value\">{company.resellerId}</span>\n            </div>\n          )}\n\n          {/* Address Information */}\n          {company.legalAddress && (\n            <>\n              <div className=\"company-registration-success__section-header\">\n                <h3>{translations.address}</h3>\n              </div>\n\n              {company.legalAddress.street && company.legalAddress.street[0] && (\n                <div className=\"company-registration-success__item\">\n                  <span className=\"company-registration-success__label\">\n                    {translations.street}:\n                  </span>\n                  <span className=\"company-registration-success__value\">\n                    {company.legalAddress.street.map((line: string, index: number) => (\n                      <div key={index}>{line}</div>\n                    ))}\n                  </span>\n                </div>\n              )}\n\n              {company.legalAddress.city && (\n                <div className=\"company-registration-success__item\">\n                  <span className=\"company-registration-success__label\">\n                    {translations.city}:\n                  </span>\n                  <span className=\"company-registration-success__value\">{company.legalAddress.city}</span>\n                </div>\n              )}\n\n               {company.legalAddress.countryCode && (\n                <div className=\"company-registration-success__item\">\n                  <span className=\"company-registration-success__label\">\n                    {translations.country}:\n                  </span>\n                  <span className=\"company-registration-success__value\">{countryName || company.legalAddress.countryCode}</span>\n                </div>\n              )}\n\n              {company.legalAddress.region && (\n                <div className=\"company-registration-success__item\">\n                  <span className=\"company-registration-success__label\">\n                    {translations.stateProvince}:\n                  </span>\n                  <span className=\"company-registration-success__value\">\n                    {company.legalAddress.region.region || company.legalAddress.region.regionCode}\n                  </span>\n                </div>\n              )}\n\n              {company.legalAddress.postcode && (\n                <div className=\"company-registration-success__item\">\n                  <span className=\"company-registration-success__label\">\n                    {translations.postcode}:\n                  </span>\n                  <span className=\"company-registration-success__value\">{company.legalAddress.postcode}</span>\n                </div>\n              )}\n\n             \n\n              {company.legalAddress.telephone && (\n                <div className=\"company-registration-success__item\">\n                  <span className=\"company-registration-success__label\">\n                    {translations.telephone}:\n                  </span>\n                  <span className=\"company-registration-success__value\">{company.legalAddress.telephone}</span>\n                </div>\n              )}\n            </>\n          )}\n\n          {/* Company Admin Information */}\n          {company.companyAdmin && (\n            <>\n              <div className=\"company-registration-success__section-header\">\n                <h3>{translations.companyAdmin}</h3>\n              </div>\n\n              {company.companyAdmin.jobTitle && (\n                <div className=\"company-registration-success__item\">\n                  <span className=\"company-registration-success__label\">\n                    {translations.adminJobTitle}:\n                  </span>\n                  <span className=\"company-registration-success__value\">{company.companyAdmin.jobTitle}</span>\n                </div>\n              )}\n\n              {company.companyAdmin.telephone && (\n                <div className=\"company-registration-success__item\">\n                  <span className=\"company-registration-success__label\">\n                    {translations.adminWorkTelephone}:\n                  </span>\n                  <span className=\"company-registration-success__value\">{company.companyAdmin.telephone}</span>\n                </div>\n              )}\n\n              <div className=\"company-registration-success__item\">\n                <span className=\"company-registration-success__label\">\n                  {translations.adminEmail}:\n                </span>\n                <span className=\"company-registration-success__value\">{company.companyAdmin.email}</span>\n              </div>\n            </>\n          )}\n\n        </div>\n      </div>\n    </div>\n  );\n};\n","/********************************************************************\n * ADOBE CONFIDENTIAL\n * __________________\n *\n *  Copyright 2025 Adobe\n *  All Rights Reserved.\n *\n * NOTICE:  All information contained herein is, and remains\n * the property of Adobe and its suppliers, if any. The intellectual\n * and technical concepts contained herein are proprietary to Adobe\n * and its suppliers and are protected by all applicable intellectual\n * property laws, including trade secret and copyright laws.\n * Dissemination of this information or reproduction of this material\n * is strictly forbidden unless prior written permission is obtained\n * from Adobe.\n *******************************************************************/\n\nimport { useState, useEffect } from 'preact/hooks';\nimport { Container } from '@adobe-commerce/elsie/lib';\nimport { CompanyRegistrationForm } from '@/company-management/components/CompanyRegistrationForm';\nimport { CompanyRegistrationSuccess } from '@/company-management/components/CompanyRegistrationSuccess';\nimport { CompanyFormSlots } from '@/company-management/types/form.types';\nimport { Company } from '@/company-management/data/models/company';\nimport { allowCompanyRegistration } from '../../api/allowCompanyRegistration';\nimport { isCompanyUser } from '../../api/isCompanyUser';\nimport { useInLineAlert } from '../../hooks/useInLineAlert';\n\nexport interface CompanyRegistrationProps {\n  /** Indicates whether the current user is authenticated */\n  isAuthenticated?: boolean;\n  /** Callback to redirect unauthenticated users to login page */\n  onRedirectLogin?: () => void;\n  /** Callback to redirect to account page after successful registration or when user already has company */\n  onRedirectAccount?: () => void;\n  /** Callback function triggered on successful company registration */\n  onSuccess?: (company: Company) => void;\n  /** Callback function triggered when registration fails with error messages */\n  onError?: (errors: string[]) => void;\n  /** Additional CSS classes to apply to the container for custom styling */\n  className?: string;\n  /** Slot configuration for customizing form sections */\n  slots?: CompanyFormSlots;\n}\n\ntype CompanyRegistrationState = 'loading' | 'redirect-login' | 'redirect-account' | 'show-form' | 'success';\n\nexport const CompanyRegistration: Container<CompanyRegistrationProps> = ({\n  isAuthenticated = false,\n  onRedirectLogin,\n  onRedirectAccount,\n  onSuccess,\n  onError,\n  className,\n  slots,\n}) => {\n  const [state, setState] = useState<CompanyRegistrationState>('loading');\n  const [registeredCompany, setRegisteredCompany] = useState<Company | null>(null);\n  const { inLineAlertProps, showError, clearAlert } = useInLineAlert();\n\n  useEffect(() => {\n    let active = true;\n    (async () => {\n      try {\n        const canRegister = await allowCompanyRegistration();\n        \n        if (!canRegister) {\n          // Provide status logging since company registration link is always visible\n          // and backend configuration is not exposed to frontend users\n          if (active) {\n            const redirectState = isAuthenticated ? 'redirect-account' : 'redirect-login';\n            const destination = isAuthenticated ? 'account dashboard' : 'login page';\n            console.log(`Company registration disabled - redirecting to ${destination}`);\n            setState(redirectState);\n          }\n          return;\n        }\n\n        if (isAuthenticated) {\n          try {\n            const belongsToCompany = await isCompanyUser();\n            if (belongsToCompany) {\n              if (active) {\n                console.log('User already belongs to a company - redirecting to account dashboard');\n                setState('redirect-account');\n              }\n              return;\n            }\n          } catch (error) {\n            console.error('Error checking company membership - redirecting to account dashboard:', error);\n            if (active) setState('redirect-account');\n            return;\n          }\n        }\n\n        if (active) setState('show-form');\n      } catch (error) {\n        console.error('Error checking B2B status:', error);\n        if (active) setState(isAuthenticated ? 'redirect-account' : 'redirect-login');\n      }\n    })();\n    return () => { active = false; };\n  }, [isAuthenticated]);\n\n  // Handle redirects\n  useEffect(() => {\n    if (state === 'redirect-login' && onRedirectLogin) {\n      onRedirectLogin();\n    }\n    if (state === 'redirect-account' && onRedirectAccount) {\n      onRedirectAccount();\n    }\n  }, [state, onRedirectLogin, onRedirectAccount]);\n\n  const handleSuccess = (company: Company) => {\n    clearAlert();\n    setState('success');\n    setRegisteredCompany(company);\n    onSuccess?.(company);\n  };\n\n  const handleError = (errors: string[]) => {\n    // Display error message in the UI\n    const errorMessage = errors.join('. ');\n    showError(errorMessage, false); // Don't auto-hide error messages\n    onError?.(errors);\n  };\n\n  if (state === 'loading' || state === 'redirect-login' || state === 'redirect-account') {\n    return null;\n  }\n\n  if (state === 'success' && registeredCompany) {\n    return (\n      <div className={`company-registration-container ${className || ''}`}>\n        <CompanyRegistrationSuccess\n          company={registeredCompany}\n        />\n      </div>\n    );\n  }\n\n  return (\n    <div className={`company-registration-container ${className || ''}`}>\n      <CompanyRegistrationForm\n        onSuccess={handleSuccess}\n        onError={handleError}\n        slots={slots}\n        inLineAlertProps={inLineAlertProps}\n      />\n    </div>\n  );\n};"],"names":["FieldTypeEnum","FormInputs","memo","loading","values","fields","errors","className","regionOptions","countryOptions","onChange","onBlur","onFocus","slots","fieldIdPrefix","itemClassName","translations","useText","fieldSections","getSectionTitle","sectionKey","formatRegionValue","item","regionCode","_a","regionId","_b","_c","_d","formatStreetValue","renderSlot","errorMessage","slotName","slot","contextValue","jsx","Slot","selectElement","valueMessage","options","country","option","Fragment","Field","classes","Picker","inputElement","inputType","Input","renderSectionFields","sectionFields","field","streetValue","regionValue","renderSection","sectionTitle","jsxs","Form","showFormLoader","name","submitting","children","fieldsConfig","onSubmit","formRef","useRef","useEffect","handleSubmit","event","ProgressSpinner","handleChange","target","value","useCountryAndRegionFields","defaultCountry","formName","countriesData","setCountriesData","useState","inputChange","setInputChange","savedData","disableField","setDisableField","loadingCountries","setLoadingCountries","regionsData","setRegionsData","getCountries","availableCountries","countriesWithRequiredRegion","optionalZipCountries","error","selectedCountry","regions","region","useMemo","isRequiredRegion","isRequiredPostCode","hasRegions","handleInputChange","useCallback","prev","updatedData","getCompanyFieldsConfig","formData","getLabel","key","getPlaceholder","label","commonConfig","flattenObjectsArray","arr","acc","obj","validateNumeric","validateAlphanumeric","validateAlphanumWithSpaces","validateAlpha","validateEmail","validatePhone","validateUrl","validatePostalCode","validateName","validateLength","minLength","maxLength","length","validationFields","configs","errorsList","requiredFieldError","lengthTextError","numericError","alphaNumWithSpacesError","alphaNumericError","alphaError","emailError","phoneError","postalCodeError","urlError","nameError","fieldName","defaultFields","trimmedValue","validateRulesConfig","min","max","validation","getValidationTranslations","createValidationConfig","validateField","fieldCode","config","fieldConfig","stringValue","validationConfig","validateAllFields","firstField","hasErrors","fieldErrors","result","hasRegionId","hasRegionCode","hasRegion","validateSingleField","validateFormData","createFieldHandlers","setFormData","formTranslations","setFieldErrors","updated","handleStreetChange","currentStreet","newStreet","handleStreetLine2Change","handleRegionTextChange","handleRegionCodeChange","handleRegionDropdownChange","selectedRegion","handleCountryChange","handleGenericFieldChange","useCompanyRegistrationForm","onSuccess","onError","isSubmitting","setIsSubmitting","setDefaultCountry","loadingStoreConfig","setLoadingStoreConfig","handleCompanyFormChange","formValues","setFormValues","getStoreConfig","validateForm","fieldHandlers","isValid","formElement","rawFormValues","finalFormValues","formIsValid","emailValidation","validateCompanyEmail","createCompany","errorMessages","CompanyRegistrationForm","hideActionFormButtons","inLineAlertProps","handleBlur","handleFormSubmit","isInitialLoading","InLineAlert","Button","CompanyRegistrationSuccess","company","countryName","setCountryName","c","line","index","CompanyRegistration","isAuthenticated","onRedirectLogin","onRedirectAccount","state","setState","registeredCompany","setRegisteredCompany","showError","clearAlert","useInLineAlert","active","allowCompanyRegistration","redirectState","isCompanyUser","handleSuccess","handleError"],"mappings":"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"}