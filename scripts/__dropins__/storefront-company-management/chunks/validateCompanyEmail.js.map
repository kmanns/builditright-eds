{"version":3,"file":"validateCompanyEmail.js","sources":["/@dropins/storefront-company-management/src/data/transforms/transform-company.ts","/@dropins/storefront-company-management/src/data/transforms/transform-countries.ts","/@dropins/storefront-company-management/src/api/getCountries/graphql/getCountries.graphql.ts","/@dropins/storefront-company-management/src/api/getCountries/getCountries.ts","/@dropins/storefront-company-management/src/api/validateCompanyEmail/graphql/validateCompanyEmail.graphql.ts","/@dropins/storefront-company-management/src/api/validateCompanyEmail/validateCompanyEmail.ts"],"sourcesContent":["/********************************************************************\n * ADOBE CONFIDENTIAL\n * __________________\n *\n *  Copyright 2025 Adobe\n *  All Rights Reserved.\n *\n * NOTICE:  All information contained herein is, and remains\n * the property of Adobe and its suppliers, if any. The intellectual\n * and technical concepts contained herein are proprietary to Adobe\n * and its suppliers and are protected by all applicable intellectual\n * property laws, including trade secret and copyright laws.\n * Dissemination of this information or reproduction of this material\n * is strictly forbidden unless prior written permission is obtained\n * from Adobe.\n *******************************************************************/\nimport { getCompanyResponse } from '../../types/api/getCompany.types';\nimport { updateCompanyResponse } from '../../types/api/updateCompany.types';\nimport { CompanyModel, CompanyRegistrationModel } from '../models/company';\nimport { buildPermissionFlags } from '../../lib/company-permissions';\n\nexport const transformCompany = (\n  response: getCompanyResponse | updateCompanyResponse\n): CompanyModel => {\n  // Validate response structure\n  if (!response?.data) {\n    throw new Error('Invalid response: missing data');\n  }\n\n  // Handle both getCompany and updateCompany response structures\n  const companyData: any = 'updateCompany' in response.data \n    ? response.data.updateCompany?.company \n    : response.data.company;\n  \n  if (!companyData) {\n    throw new Error('Invalid response: missing company data');\n  }\n  \n  const customerData = 'customer' in response.data ? response.data.customer : undefined;\n\n  // Transform legal address with validation\n  const legalAddress = companyData.legal_address ? {\n    street: Array.isArray(companyData.legal_address.street) \n      ? companyData.legal_address.street.filter((line: string) => line && line.trim() !== '') \n      : [],\n    city: (companyData.legal_address.city || '').trim(),\n    region: companyData.legal_address.region ? {\n      region: (companyData.legal_address.region.region || '').trim(),\n      regionCode: (companyData.legal_address.region.region_code || '').trim(),\n      regionId: companyData.legal_address.region.region_id ? Number(companyData.legal_address.region.region_id) : 0,\n    } : undefined,\n    countryCode: (companyData.legal_address.country_code || '').toUpperCase().trim(),\n    postcode: (companyData.legal_address.postcode || '').trim(),\n    telephone: companyData.legal_address.telephone ? \n      companyData.legal_address.telephone.trim() : undefined,\n  } : undefined;\n\n  // Determine permissions using shared utility\n  const customerRole = customerData?.role;\n  const permissionsFlags = buildPermissionFlags(customerRole);\n\n  // Build the model with proper validation\n  const model: CompanyModel = {\n    id: (companyData.id || '').toString(),\n    name: (companyData.name || '').trim(),\n    email: (companyData.email || '').trim().toLowerCase(),\n    legalName: companyData.legal_name ? companyData.legal_name.trim() : undefined,\n    vatTaxId: companyData.vat_tax_id ? companyData.vat_tax_id.trim() : undefined,\n    resellerId: companyData.reseller_id ? companyData.reseller_id.trim() : undefined,\n    legalAddress,\n    companyAdmin: companyData.company_admin ? {\n      id: (companyData.company_admin.id || '').toString(),\n      firstname: (companyData.company_admin.firstname || '').trim(),\n      lastname: (companyData.company_admin.lastname || '').trim(),\n      email: (companyData.company_admin.email || '').trim().toLowerCase(),\n      jobTitle: companyData.company_admin.job_title ? companyData.company_admin.job_title.trim() : undefined,\n    } : undefined,\n\n    // Transform sales representative\n    salesRepresentative: companyData.sales_representative ? {\n      firstname: (companyData.sales_representative.firstname || '').trim(),\n      lastname: (companyData.sales_representative.lastname || '').trim(),\n      email: (companyData.sales_representative.email || '').trim().toLowerCase(),\n    } : undefined,\n\n    // New comprehensive payment methods with code and title\n    availablePaymentMethods: Array.isArray(companyData.available_payment_methods)\n      ? companyData.available_payment_methods\n          .filter((m: any) => m && typeof m.code === 'string' && typeof m.title === 'string')\n          .map((m: any) => ({ code: m.code.trim(), title: m.title.trim() }))\n          .filter((m: any) => m.code.length > 0 && m.title.length > 0)\n      : undefined,\n\n    // New available shipping methods\n    availableShippingMethods: Array.isArray(companyData.available_shipping_methods)\n      ? companyData.available_shipping_methods\n          .filter((m: any) => m && typeof m.code === 'string' && typeof m.title === 'string')\n          .map((m: any) => ({ code: m.code.trim(), title: m.title.trim() }))\n          .filter((m: any) => m.code.length > 0 && m.title.length > 0)\n      : undefined,\n    \n    // Computed permission flags (single source of truth)\n    canEditAccount: permissionsFlags.canEditAccount,\n    canEditAddress: permissionsFlags.canEditAddress,\n    permissionsFlags,\n    customerRole,\n    customerStatus: customerData?.status,\n  };\n\n  // Validate only when profile fields are permitted\n  if (permissionsFlags.canViewAccount) {\n    if (!model.id) {\n      throw new Error('Company ID is required');\n    }\n    if (!model.name) {\n      throw new Error('Company name is required');\n    }\n    if (!model.email) {\n      throw new Error('Company email is required');\n    }\n  }\n\n  return model;\n};\n\n/**\n * Transform createCompany GraphQL response to Company model\n */\nexport const transformCreateCompanyResponse = (response: any): CompanyRegistrationModel => {\n  // Validate response structure\n  if (!response?.data?.createCompany?.company) {\n    throw new Error('Invalid createCompany response: missing company data');\n  }\n\n  const rawCompany = response.data.createCompany.company;\n\n  // Validate required fields\n  if (!rawCompany.legal_address) {\n    throw new Error('Legal address is required for company registration');\n  }\n  if (!rawCompany.company_admin) {\n    throw new Error('Company admin is required for company registration');\n  }\n\n  // Transform the GraphQL response to match the CompanyRegistrationModel\n  const transformedCompany: CompanyRegistrationModel = {\n    id: rawCompany.id,\n    name: rawCompany.name,\n    email: rawCompany.email,\n    legalName: rawCompany.legal_name,\n    vatTaxId: rawCompany.vat_tax_id,\n    resellerId: rawCompany.reseller_id,\n    legalAddress: {\n      street: rawCompany.legal_address.street || [],\n      city: rawCompany.legal_address.city || '',\n      region: {\n        regionCode: rawCompany.legal_address.region?.region_code || '',\n        region: rawCompany.legal_address.region?.region,\n        regionId: rawCompany.legal_address.region?.region_id,\n      },\n      countryCode: rawCompany.legal_address.country_code || '',\n      postcode: rawCompany.legal_address.postcode || '',\n      telephone: rawCompany.legal_address.telephone,\n    },\n    companyAdmin: {\n      id: rawCompany.company_admin.id,\n      firstname: rawCompany.company_admin.firstname,\n      lastname: rawCompany.company_admin.lastname,\n      email: rawCompany.company_admin.email,\n      jobTitle: rawCompany.company_admin.job_title,\n      telephone: rawCompany.company_admin.telephone,\n    },\n  };\n\n  return transformedCompany;\n};\n","/********************************************************************\n * ADOBE CONFIDENTIAL\n * __________________\n *\n *  Copyright 2025 Adobe\n *  All Rights Reserved.\n *\n * NOTICE:  All information contained herein is, and remains\n * the property of Adobe and its suppliers, if any. The intellectual\n * and technical concepts contained herein are proprietary to Adobe\n * and its suppliers and are protected by all applicable intellectual\n * property laws, including trade secret and copyright laws.\n * Dissemination of this information or reproduction of this material\n * is strictly forbidden unless prior written permission is obtained\n * from Adobe.\n *******************************************************************/\nimport { CountriesFormResponse } from '../../types/api/getCountries.types';\nimport { Country } from '../models/country';\n\nexport const transformCountries = (\n  response: CountriesFormResponse\n): {\n  availableCountries: Country[] | [];\n  countriesWithRequiredRegion: string[];\n  optionalZipCountries: string[];\n} => {\n  if (!response?.data?.countries?.length) {\n    return {\n      availableCountries: [],\n      countriesWithRequiredRegion: [],\n      optionalZipCountries: [],\n    };\n  }\n\n  const { countries, storeConfig } = response.data;\n\n  const countriesWithRequiredRegion =\n    storeConfig?.countries_with_required_region.split(',');\n  const optionalZipCountries = storeConfig?.optional_zip_countries.split(',');\n\n  const availableCountries = countries\n    .filter(({ two_letter_abbreviation, full_name_locale }) =>\n      Boolean(two_letter_abbreviation && full_name_locale)\n    )\n    .map((country) => {\n      const { two_letter_abbreviation, full_name_locale, available_regions } = country;\n\n      const hasRegions = Array.isArray(available_regions) && available_regions.length > 0;\n      return {\n        value: two_letter_abbreviation,\n        text: full_name_locale,\n        availableRegions: hasRegions ? available_regions : undefined,\n      };\n    })\n    .sort((a, b) => a.text.localeCompare(b.text));\n\n  return {\n    availableCountries,\n    countriesWithRequiredRegion,\n    optionalZipCountries,\n  };\n};\n","/********************************************************************\n * ADOBE CONFIDENTIAL\n * __________________\n *\n *  Copyright 2025 Adobe\n *  All Rights Reserved.\n *\n * NOTICE:  All information contained herein is, and remains\n * the property of Adobe and its suppliers, if any. The intellectual\n * and technical concepts contained herein are proprietary to Adobe\n * and its suppliers and are protected by all applicable intellectual\n * property laws, including trade secret and copyright laws.\n * Dissemination of this information or reproduction of this material\n * is strictly forbidden unless prior written permission is obtained\n * from Adobe.\n *******************************************************************/\nexport const GET_COUNTRIES_QUERY = `\n  query getCountries {\n    countries {\n      id\n      two_letter_abbreviation\n      three_letter_abbreviation\n      full_name_locale\n      full_name_english\n      available_regions {\n        id\n        code\n        name\n      }\n    }\n    storeConfig {\n      countries_with_required_region\n      optional_zip_countries\n    }\n  }\n`;\n","/********************************************************************\n * ADOBE CONFIDENTIAL\n * __________________\n *\n *  Copyright 2025 Adobe\n *  All Rights Reserved.\n *\n * NOTICE:  All information contained herein is, and remains\n * the property of Adobe and its suppliers, if any. The intellectual\n * and technical concepts contained herein are proprietary to Adobe\n * and its suppliers and are protected by all applicable intellectual\n * property laws, including trade secret and copyright laws.\n * Dissemination of this information or reproduction of this material\n * is strictly forbidden unless prior written permission is obtained\n * from Adobe.\n *******************************************************************/\nimport { GET_COUNTRIES_QUERY } from './graphql/getCountries.graphql';\nimport { fetchGraphQl } from '../fetch-graphql';\nimport { handleNetworkError } from '../../lib/network-error';\nimport { handleFetchError } from '../../lib/fetch-error';\nimport { transformCountries } from '../../data/transforms/transform-countries';\nimport { CountriesFormResponse } from '../../types/api/getCountries.types';\nimport { Country } from '../../data/models/country';\n\nexport const getCountries = async (): Promise<{\n  availableCountries: Country[] | [];\n  countriesWithRequiredRegion: string[];\n  optionalZipCountries: string[];\n}> => {\n  const sessionStorageKey = '_company_countries';\n\n  const sessionStorageCache = sessionStorage.getItem(sessionStorageKey);\n\n  if (sessionStorageCache) {\n    return JSON.parse(sessionStorageCache);\n  }\n\n  return await fetchGraphQl(GET_COUNTRIES_QUERY, {\n    method: 'GET',\n  })\n    .then((response: CountriesFormResponse) => {\n      if (response.errors?.length) return handleFetchError(response.errors);\n\n      const transformedData = transformCountries(response);\n\n      sessionStorage.setItem(\n        sessionStorageKey,\n        JSON.stringify(transformedData)\n      );\n\n      return transformedData;\n    })\n    .catch(handleNetworkError);\n};\n","/********************************************************************\n * ADOBE CONFIDENTIAL\n * __________________\n *\n *  Copyright 2025 Adobe\n *  All Rights Reserved.\n *\n * NOTICE:  All information contained herein is, and remains\n * the property of Adobe and its suppliers, if any. The intellectual\n * and technical concepts contained herein are proprietary to Adobe\n * and its suppliers and are protected by all applicable intellectual\n * property laws, including trade secret and copyright laws.\n * Dissemination of this information or reproduction of this material\n * is strictly forbidden unless prior written permission is obtained\n * from Adobe.\n *******************************************************************/\nexport const VALIDATE_COMPANY_EMAIL_QUERY = /* GraphQL */ `\n  query validateCompanyEmail($email: String!) {\n    isCompanyEmailAvailable(email: $email) {\n      is_email_available\n    }\n  }\n`;","/********************************************************************\n * ADOBE CONFIDENTIAL\n * __________________\n *\n *  Copyright 2025 Adobe\n *  All Rights Reserved.\n *\n * NOTICE:  All information contained herein is, and remains\n * the property of Adobe and its suppliers, if any. The intellectual\n * and technical concepts contained herein are proprietary to Adobe\n * and its suppliers and are protected by all applicable intellectual\n * property laws, including trade secret and copyright laws.\n * Dissemination of this information or reproduction of this material\n * is strictly forbidden unless prior written permission is obtained\n * from Adobe.\n *******************************************************************/\nimport { fetchGraphQl } from '../fetch-graphql';\nimport { VALIDATE_COMPANY_EMAIL_QUERY } from './graphql/validateCompanyEmail.graphql';\nimport { ValidateCompanyEmailQuery, ValidateCompanyEmailResponse } from '../../types/api/validateCompanyEmail.types';\n\nexport const validateCompanyEmail = async (email: string): Promise<ValidateCompanyEmailResponse> => {\n  try {\n    const response = await fetchGraphQl<ValidateCompanyEmailQuery>(VALIDATE_COMPANY_EMAIL_QUERY, {\n      variables: { email },\n    });\n\n    if (response.errors) {\n      return {\n        isValid: false,\n        error: 'Unable to validate email'\n      };\n    }\n\n    return {\n      isValid: response.data.isCompanyEmailAvailable.is_email_available,\n      error: response.data.isCompanyEmailAvailable.is_email_available \n        ? undefined \n        : 'This email is already used by another company'\n    };\n  } catch (error) {\n    return {\n      isValid: false,\n      error: 'Unable to validate email'\n    };\n  }\n};"],"names":["transformCompany","response","companyData","_a","customerData","legalAddress","line","customerRole","permissionsFlags","buildPermissionFlags","model","m","transformCreateCompanyResponse","_b","rawCompany","_c","_d","_e","transformCountries","countries","storeConfig","countriesWithRequiredRegion","optionalZipCountries","two_letter_abbreviation","full_name_locale","country","available_regions","hasRegions","b","GET_COUNTRIES_QUERY","getCountries","sessionStorageKey","sessionStorageCache","fetchGraphQl","handleFetchError","transformedData","handleNetworkError","VALIDATE_COMPANY_EMAIL_QUERY","validateCompanyEmail","email"],"mappings":"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"}