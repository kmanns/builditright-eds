{"version":3,"file":"acdl.js","sources":["/@dropins/storefront-company-management/src/lib/acdl.ts"],"sourcesContent":["/********************************************************************\n * ADOBE CONFIDENTIAL\n * __________________\n *\n *  Copyright 2025 Adobe\n *  All Rights Reserved.\n *\n * NOTICE:  All information contained herein is, and remains\n * the property of Adobe and its suppliers, if any. The intellectual\n * and technical concepts contained herein are proprietary to Adobe\n * and its suppliers and are protected by all applicable intellectual\n * property laws, including trade secret and copyright laws.\n * Dissemination of this information or reproduction of this material\n * is strictly forbidden unless prior written permission is obtained\n * from Adobe.\n *******************************************************************/\ndeclare global {\n  interface Window {\n    adobeDataLayer: any[];\n  }\n}\n\nenum EventsList {\n  EDIT_COMPANY_EVENT = 'edit-company',\n  EDIT_COMPANY_STRUCTURE_EVENT = 'edit-company-structure',\n}\n\nconst EVENTS_MAPPING = {\n  EDIT_COMPANY_EVENT: EventsList.EDIT_COMPANY_EVENT,\n  EDIT_COMPANY_STRUCTURE_EVENT: EventsList.EDIT_COMPANY_STRUCTURE_EVENT,\n};\n\n/**\n * Set and return the Adobe Client Data Layer (ACDL)\n * @returns ACDL instance or an empty array if it doesn't exist\n */\nconst getAdobeDataLayer = () => {\n  if (!window.adobeDataLayer) {\n    window.adobeDataLayer = [];\n  }\n  return window.adobeDataLayer;\n};\n\n/**\n * Sets a context in the Adobe Client Data Layer (ACDL)\n * @param context - The context object to set\n */\nconst setContext = (context: Record<string, any>) => {\n  const adobeDataLayer = getAdobeDataLayer();\n  adobeDataLayer.push({\n    context,\n  });\n};\n\n/**\n * Pushes an event to the Adobe Client Data Layer (ACDL)\n * @param event - The event object to push\n */\nconst pushEvent = (event: Record<string, any>) => {\n  const adobeDataLayer = getAdobeDataLayer();\n  \n  adobeDataLayer.push((acdl: any) => {\n    const state = acdl.getState ? acdl.getState() : {};\n    \n    acdl.push({\n      event,\n      context: state,\n    });\n  });\n};\n\n/**\n * Publishes events to the Adobe Client Data Layer (ACDL)\n * @param eventType - The type of event to publish\n * @param eventParams - Parameters associated with the event\n * @returns null if the event type is not recognized\n */\nconst publishEvents = (eventType: string, eventParams: any) => {\n  if (!EVENTS_MAPPING[eventType as keyof typeof EVENTS_MAPPING]) {\n    return null;\n  }\n\n  switch (eventType) {\n    case EventsList.EDIT_COMPANY_EVENT:\n      pushEvent({\n        type: 'company',\n        eventType: 'edit',\n        companyData: eventParams,\n      });\n      break;\n    case EventsList.EDIT_COMPANY_STRUCTURE_EVENT:\n      pushEvent({\n        type: 'company-structure',\n        eventType: 'edit',\n        structureData: eventParams,\n      });\n      break;\n    default:\n      return null;\n  }\n};\n\nexport { EventsList, publishEvents, pushEvent, setContext };"],"names":["EventsList","EVENTS_MAPPING","getAdobeDataLayer","pushEvent","event","acdl","state","publishEvents","eventType","eventParams"],"mappings":"AAsBA,IAAKA,GAAAA,IACHA,EAAA,mBAAqB,eACrBA,EAAA,6BAA+B,yBAF5BA,IAAAA,GAAA,CAAA,CAAA,EAKL,MAAMC,EAAiB,CACrB,mBAAoB,eACpB,6BAA8B,wBAChC,EAMMC,EAAoB,KACnB,OAAO,iBACV,OAAO,eAAiB,CAAA,GAEnB,OAAO,gBAkBVC,EAAaC,GAA+B,CACzBF,EAAA,EAER,KAAMG,GAAc,CACjC,MAAMC,EAAQD,EAAK,SAAWA,EAAK,SAAA,EAAa,CAAA,EAEhDA,EAAK,KAAK,CACR,MAAAD,EACA,QAASE,CAAA,CACV,CACH,CAAC,CACH,EAQMC,EAAgB,CAACC,EAAmBC,IAAqB,CAC7D,GAAI,CAACR,EAAeO,CAAwC,EAC1D,OAAO,KAGT,OAAQA,EAAA,CACN,IAAK,eACHL,EAAU,CACR,KAAM,UACN,UAAW,OACX,YAAaM,CAAA,CACd,EACD,MACF,IAAK,yBACHN,EAAU,CACR,KAAM,oBACN,UAAW,OACX,cAAeM,CAAA,CAChB,EACD,MACF,QACE,OAAO,IAAA,CAEb"}