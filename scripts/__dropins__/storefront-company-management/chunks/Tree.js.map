{"version":3,"file":"Tree.js","sources":["../../node_modules/mobile-drag-drop/index.min.js","/@dropins/storefront-company-management/src/components/Tree/Tree.tsx"],"sourcesContent":["/*! mobile-drag-drop 3.0.0-rc.0 | Copyright (c) 2022 Tim Ruffles | MIT License */\n!function(t,i){\"object\"==typeof exports&&\"undefined\"!=typeof module?i(exports):\"function\"==typeof define&&define.amd?define([\"exports\"],i):i(t.MobileDragDrop=t.MobileDragDrop||{})}(this,function(t){\"use strict\";var c=\"dnd-poly-\",s=[\"none\",\"copy\",\"copyLink\",\"copyMove\",\"link\",\"linkMove\",\"move\",\"all\"],f=[\"none\",\"copy\",\"move\",\"link\"];function i(){var t=!1;try{var i=Object.defineProperty({},\"passive\",{get:function(){t=!0}});window.addEventListener(\"test\",null,i)}catch(t){}return t}var e=i();function l(t){return t&&t.tagName}function h(t,i,s){void 0===s&&(s=!0),document.addEventListener(t,i,!!e&&{passive:s})}function n(t,i){document.removeEventListener(t,i)}function u(t,i,s,n){void 0===n&&(n=!1);var h=e?{passive:!0,capture:n}:n;return t.addEventListener(i,s,h),{off:function(){t.removeEventListener(i,s,h)}}}function o(t){return 0===t.length?0:t.reduce(function(t,i){return i+t},0)/t.length}function r(t,i){for(var s=0;s<t.changedTouches.length;s++)if(t.changedTouches[s].identifier===i)return!0;return!1}function a(t,i,s){for(var n=[],h=[],e=0;e<i.touches.length;e++){var r=i.touches[e];n.push(r[t+\"X\"]),h.push(r[t+\"Y\"])}s.x=o(n),s.y=o(h)}var d=[\"\",\"-webkit-\"];function v(t,i,s,n,h){var e=i.x,i=i.y;n&&(e+=n.x,i+=n.y),(h=void 0===h||h)&&(e-=parseInt(t.offsetWidth,10)/2,i-=parseInt(t.offsetHeight,10)/2);for(var r=\"translate3d(\"+e+\"px,\"+i+\"px, 0)\",o=0;o<d.length;o++){var u=d[o]+\"transform\";t.style[u]=r+\" \"+s[o]}}var p=(Object.defineProperty(g.prototype,\"dropEffect\",{get:function(){return this.t},set:function(t){0!==this.i.mode&&-1<s.indexOf(t)&&(this.t=t)},enumerable:!1,configurable:!0}),Object.defineProperty(g.prototype,\"types\",{get:function(){if(0!==this.i.mode)return Object.freeze(this.i.types)},enumerable:!1,configurable:!0}),Object.defineProperty(g.prototype,\"effectAllowed\",{get:function(){return this.i.effectAllowed},set:function(t){2===this.i.mode&&-1<s.indexOf(t)&&(this.i.effectAllowed=t)},enumerable:!1,configurable:!0}),g.prototype.setData=function(t,i){if(2===this.i.mode){if(-1<t.indexOf(\" \"))throw new Error(\"illegal arg: type contains space\");this.i.data[t]=i,-1===this.i.types.indexOf(t)&&this.i.types.push(t)}},g.prototype.getData=function(t){if(1===this.i.mode||2===this.i.mode)return this.i.data[t]||\"\"},g.prototype.clearData=function(t){2===this.i.mode&&(t&&this.i.data[t]?(delete this.i.data[t],-1<(t=this.i.types.indexOf(t))&&this.i.types.splice(t,1)):(this.i.data={},this.i.types=[]))},g.prototype.setDragImage=function(t,i,s){2===this.i.mode&&this.h(t,i,s)},g);function g(t,i){this.i=t,this.h=i,this.t=f[0]}function m(t,i){return t?t===s[0]?f[0]:0===t.indexOf(s[1])||t===s[7]?f[1]:0===t.indexOf(s[4])?f[3]:t===s[6]?f[2]:f[1]:3===i.nodeType&&\"A\"===i.tagName?f[3]:f[1]}function y(u,t,a,i,s,n,c){void 0===c&&(c=null);s=function(t,i,s,n,h,e,r){void 0===c&&(r=null);var o=a.changedTouches[0],n=new Event(u,{bubbles:!0,cancelable:n});n.dataTransfer=e,n.relatedTarget=r,n.screenX=o.screenX,n.screenY=o.screenY,n.clientX=o.clientX,n.clientY=o.clientY,n.pageX=o.pageX,n.pageY=o.pageY;t=t.getBoundingClientRect();return n.offsetX=n.clientX-t.left,n.offsetY=n.clientY-t.top,n}(t,0,0,n=void 0===n||n,document.defaultView,s,c),s=!t.dispatchEvent(s);return i.mode=0,s}function b(t,i){if(!t||t===s[7])return i;if(i===f[1]){if(0===t.indexOf(f[1]))return f[1]}else if(i===f[3]){if(0===t.indexOf(f[3])||-1<t.indexOf(\"Link\"))return f[3]}else if(i===f[2]&&(0===t.indexOf(f[2])||-1<t.indexOf(\"Move\")))return f[2];return f[0]}var w=(x.prototype.o=function(){var n=this;this.u=1,this.l=f[0],this.v={data:{},effectAllowed:void 0,mode:3,types:[]},this.p={x:null,y:null},this.g={x:null,y:null};var h=this.m;if(this.I=new p(this.v,function(t,i,s){h=t,\"number\"!=typeof i&&\"number\"!=typeof s||(n.j={x:i||0,y:s||0})}),this.v.mode=2,this.I.dropEffect=f[0],y(\"dragstart\",this.m,this.k,this.v,this.I))return this.u=3,this.C(),!1;a(\"page\",this.k,this.g);var i,t,s=this.S.dragImageSetup(h);return this.A=(i=s,d.map(function(t){t=i.style[t+\"transform\"];return t&&\"none\"!==t?t.replace(/translate\\(\\D*\\d+[^,]*,\\D*\\d+[^,]*\\)\\s*/g,\"\"):\"\"})),s.style.position=\"absolute\",s.style.left=\"0px\",s.style.top=\"0px\",s.style.zIndex=\"999999\",s.classList.add(\"dnd-poly-drag-image\"),s.classList.add(\"dnd-poly-icon\"),this.O=s,this.j||(this.S.dragImageOffset?this.j={x:this.S.dragImageOffset.x,y:this.S.dragImageOffset.y}:this.S.dragImageCenterOnTouch?(t=getComputedStyle(h),this.j={x:0-parseInt(t.marginLeft,10),y:0-parseInt(t.marginTop,10)}):(s=h.getBoundingClientRect(),t=getComputedStyle(h),this.j={x:s.left-this.M.clientX-parseInt(t.marginLeft,10)+s.width/2,y:s.top-this.M.clientY-parseInt(t.marginTop,10)+s.height/2})),v(this.O,this.g,this.A,this.j,this.S.dragImageCenterOnTouch),document.body.appendChild(this.O),this.D=window.setInterval(function(){n.F||(n.F=!0,n.N(),n.F=!1)},this.S.iterationInterval),!0},x.prototype.C=function(){this.D&&(clearInterval(this.D),this.D=null),n(\"touchmove\",this.P),n(\"touchend\",this.T),n(\"touchcancel\",this.T),this.O&&(this.O.parentNode.removeChild(this.O),this.O=null),this.L(this.S,this.k,this.u)},x.prototype._=function(t){var s=this;if(!1!==r(t,this.M.identifier)){if(this.k=t,0===this.u){var i=void 0;if(this.S.dragStartConditionOverride)try{i=this.S.dragStartConditionOverride(t)}catch(t){i=!1}else i=1===t.touches.length;return i?void(!0===this.o()&&(this.H.preventDefault(),t.preventDefault())):void this.C()}if(t.preventDefault(),a(\"client\",t,this.p),a(\"page\",t,this.g),this.S.dragImageTranslateOverride)try{var n=!1;if(this.S.dragImageTranslateOverride(t,{x:this.p.x,y:this.p.y},this.V,function(t,i){s.O&&(n=!0,s.p.x+=t,s.p.y+=i,s.g.x+=t,s.g.y+=i,v(s.O,s.g,s.A,s.j,s.S.dragImageCenterOnTouch))}),n)return}catch(t){}v(this.O,this.g,this.A,this.j,this.S.dragImageCenterOnTouch)}},x.prototype.X=function(t){if(!1!==r(t,this.M.identifier)){if(this.S.dragImageTranslateOverride)try{this.S.dragImageTranslateOverride(void 0,void 0,void 0,function(){})}catch(t){}0!==this.u?(t.preventDefault(),this.u=\"touchcancel\"===t.type?3:2):this.C()}},x.prototype.N=function(){var t=this,i=this.l;this.v.mode=3,this.I.dropEffect=f[0];var s,n,h,e,r,o=y(\"drag\",this.m,this.k,this.v,this.I);if(o&&(this.l=f[0]),o||2===this.u||3===this.u)return this.Y(this.u)?(e=this.m,s=this.O,n=this.A,a=function(){t.q()},void(\"hidden\"!==(r=getComputedStyle(e)).visibility&&\"none\"!==r.display?(s.classList.add(\"dnd-poly-snapback\"),h=getComputedStyle(s),o=parseFloat(h.transitionDuration),isNaN(o)||0===o?a():((e={x:(u=e.getBoundingClientRect()).left,y:u.top}).x+=document.body.scrollLeft||document.documentElement.scrollLeft,e.y+=document.body.scrollTop||document.documentElement.scrollTop,e.x-=parseInt(r.marginLeft,10),e.y-=parseInt(r.marginTop,10),u=parseFloat(h.transitionDelay),u=Math.round(1e3*(o+u)),v(s,e,n,void 0,!1),setTimeout(a,u))):a())):void this.q();var u=this.S.elementFromPoint(this.p.x,this.p.y),a=this.B;u!==this.V&&u!==this.B&&(this.V=u,null!==this.B&&(this.v.mode=3,this.I.dropEffect=f[0],y(\"dragexit\",this.B,this.k,this.v,this.I,!1)),null===this.V?this.B=this.V:(this.v.mode=3,this.I.dropEffect=m(this.v.effectAllowed,this.m),y(\"dragenter\",this.V,this.k,this.v,this.I)?(this.B=this.V,this.l=b(this.I.effectAllowed,this.I.dropEffect)):this.V!==document.body&&(this.B=document.body))),a!==this.B&&l(a)&&(this.v.mode=3,this.I.dropEffect=f[0],y(\"dragleave\",a,this.k,this.v,this.I,!1,this.B)),l(this.B)&&(this.v.mode=3,this.I.dropEffect=m(this.v.effectAllowed,this.m),!1===y(\"dragover\",this.B,this.k,this.v,this.I)?this.l=f[0]:this.l=b(this.I.effectAllowed,this.I.dropEffect)),i!==this.l&&this.O.classList.remove(c+i);i=c+this.l;this.O.classList.add(i)},x.prototype.Y=function(t){t=this.l===f[0]||null===this.B||3===t;return t?l(this.B)&&(this.v.mode=3,this.I.dropEffect=f[0],y(\"dragleave\",this.B,this.k,this.v,this.I,!1)):l(this.B)&&(this.v.mode=1,this.I.dropEffect=this.l,!0===y(\"drop\",this.B,this.k,this.v,this.I)?this.l=this.I.dropEffect:this.l=f[0]),t},x.prototype.q=function(){this.v.mode=3,this.I.dropEffect=this.l,y(\"dragend\",this.m,this.k,this.v,this.I,!1),this.u=2,this.C()},x);function x(t,i,s,n){this.H=t,this.S=i,this.m=s,this.L=n,this.u=0,this.V=null,this.B=null,this.k=t,this.M=t.changedTouches[0],this.P=this._.bind(this),this.T=this.X.bind(this),h(\"touchmove\",this.P,!1),h(\"touchend\",this.T,!1),h(\"touchcancel\",this.T,!1)}var I,j={iterationInterval:150,tryFindDraggableTarget:function(t){for(var i=0,s=t.composedPath();i<s.length;i++){var n=s[i];do{if(!1!==n.draggable){if(!0===n.draggable)return n;if(n.getAttribute&&\"true\"===n.getAttribute(\"draggable\"))return n}}while((n=n.parentNode)&&n!==document.body)}},dragImageSetup:function(t){var i=t.cloneNode(!0);return function t(i,s){if(1===i.nodeType){for(var n,h,e=getComputedStyle(i),r=0;r<e.length;r++){var o=e[r];s.style.setProperty(o,e.getPropertyValue(o),e.getPropertyPriority(o))}s.style.pointerEvents=\"none\",s.removeAttribute(\"id\"),s.removeAttribute(\"class\"),s.removeAttribute(\"draggable\"),\"CANVAS\"===s.nodeName&&(n=s,h=(h=i).getContext(\"2d\").getImageData(0,0,h.width,h.height),n.getContext(\"2d\").putImageData(h,0,0))}if(i.hasChildNodes())for(r=0;r<i.childNodes.length;r++)t(i.childNodes[r],s.childNodes[r]);!function t(i){if(i instanceof HTMLElement&&(i.style.pointerEvents=\"none\"),i.children&&i.children.length)for(var s=0;s<i.children.length;s++)t(i.children[s]);if(i.shadowRoot&&i.shadowRoot.children.length)for(s=0;s<i.shadowRoot.children.length;s++)t(i.shadowRoot.children[s])}(s)}(t,i),i},elementFromPoint:function(t,i){var s=document.elementFromPoint(t,i);if(s){for(;s.shadowRoot;){var n=s.shadowRoot.elementFromPoint(t,i);if(null===n||n===s)break;s=n}return s}}};function k(i){if(!I){var t=j.tryFindDraggableTarget(i);if(t)try{I=new w(i,j,t,S)}catch(t){throw S(j,i,3),t}}}function C(t){function i(t){h.off(),e.off(),r.off(),o.off(),s&&s.dispatchEvent(new CustomEvent(\"dnd-poly-dragstart-cancel\",{bubbles:!0,cancelable:!0})),clearTimeout(n)}var s=t.target;s&&s.dispatchEvent(new CustomEvent(\"dnd-poly-dragstart-pending\",{bubbles:!0,cancelable:!0}));var n=window.setTimeout(function(){h.off(),e.off(),r.off(),o.off(),k(t)},j.holdToDrag),h=u(s,\"touchend\",i),e=u(s,\"touchcancel\",i),r=u(s,\"touchmove\",i),o=u(window,\"scroll\",i,!0)}function S(t,i,s){if(0===s&&t.defaultActionOverride)try{t.defaultActionOverride(i),i.defaultPrevented}catch(t){}I=null}t.polyfill=function(i){if(i&&Object.keys(i).forEach(function(t){j[t]=i[t]}),!j.forceApply){t=(t=!!window.chrome||/chrome/i.test(navigator.userAgent),{dragEvents:\"ondragstart\"in document.documentElement,draggable:\"draggable\"in document.documentElement,userAgentSupportingNativeDnD:!(/iPad|iPhone|iPod|Android/.test(navigator.userAgent)||t&&\"ontouchstart\"in document.documentElement)});if(t.userAgentSupportingNativeDnD&&t.draggable&&t.dragEvents)return!1}var t;return j.holdToDrag?h(\"touchstart\",C,!1):h(\"touchstart\",k,!1),!0},t.supportsPassiveEventListener=i,Object.defineProperty(t,\"G\",{value:!0})});\n//# sourceMappingURL=index.min.js.map","/********************************************************************\n * ADOBE CONFIDENTIAL\n * __________________\n *\n *  Copyright 2025 Adobe\n *  All Rights Reserved.\n *\n * NOTICE:  All information contained herein is, and remains\n * the property of Adobe and its suppliers, if any. The intellectual\n * and technical concepts contained herein are proprietary to Adobe\n * and its suppliers and are protected by all applicable intellectual\n * property laws, including trade secret and copyright laws.\n * Dissemination of this information or reproduction of this material\n * is strictly forbidden unless prior written permission is obtained\n * from Adobe.\n *******************************************************************/\n\nimport { FunctionComponent } from 'preact';\nimport { useMemo, useCallback, useRef } from 'preact/hooks';\nimport { Checkbox } from '@adobe-commerce/elsie/components';\nimport { polyfill } from 'mobile-drag-drop';\nimport 'mobile-drag-drop/default.css';\nimport 'mobile-drag-drop/icons.css';\nimport './Tree.css';\n\n// Initialize mobile-drag-drop polyfill once\nlet polyfillInitialized = false;\nif (typeof window !== 'undefined' && !polyfillInitialized) {\n  // Required for iOS 10+\n  try {\n    window.addEventListener('touchmove', () => {}, { passive: false });\n  } catch (e) {}\n  \n  polyfill({\n    holdToDrag: 300,\n    tryFindDraggableTarget: (event: TouchEvent) => {\n      let element = event.target as HTMLElement;\n      while (element && element !== document.body) {\n        if (element.getAttribute('draggable') === 'true') {\n          return element;\n        }\n        element = element.parentElement as HTMLElement;\n      }\n      return undefined;\n    },\n  });\n  \n  // Required: prevent context menu on long press\n  document.addEventListener('contextmenu', (e) => {\n    const target = e.target as HTMLElement;\n    if (target.closest('[draggable=\"true\"]')) {\n      e.preventDefault();\n    }\n  });\n  \n  polyfillInitialized = true;\n}\n\nexport interface TreeItem {\n  id: string;\n  parentId?: string | null;\n  label: string;\n}\n\nexport interface RenderNodeArgs {\n  item: TreeItem;\n  level: number;\n  expanded: boolean;\n  selected: boolean;\n  hasChildren: boolean;\n  toggle: () => void;\n  select: () => void;\n  // Optional Elsie-friendly render helpers\n  expander?: () => any;\n  checkbox?: () => any;\n  icon?: () => any;\n}\n\nexport interface TreeProps {\n  items: TreeItem[];\n  rootId?: string | null;\n  className?: string;\n  expandedIds: Set<string>;\n  selectedId?: string | null;\n  selectedIds?: Set<string>;\n  onExpandedChange: (next: Set<string>) => void;\n  onSelectedChange?: (id: string | null) => void;\n  onSelectedIdsChange?: (ids: Set<string>) => void;\n  renderNode: (args: RenderNodeArgs) => any;\n  role?: 'tree' | 'list' | 'grid'; // default 'tree'\n  // Sorting behavior (optional)\n  preserveOrder?: boolean; // If true, preserve the original order of items. If false/undefined, sort alphabetically by label\n  // Drag & Drop (optional)\n  draggable?: (item: TreeItem) => boolean;\n  canDrop?: (dragId: string, targetId: string) => boolean;\n  onMove?: (args: { id: string; newParentId: string }) => void;\n  // Checkable (optional)\n  isCheckable?: (item: TreeItem) => boolean;\n  checkedIds?: Set<string>;\n  onCheckedChange?: (next: Set<string>) => void;\n  // Checkbox behavior (optional)\n  biDirectionalChecking?: boolean; // If true, checking a node directly marks it as checked. If false, uses descendant-based logic (default: false)\n  // Optional Elsie-friendly render-props to build UI primitives\n  renderExpander?: (args: { expanded: boolean; hasChildren: boolean; toggle: () => void }) => any;\n  renderCheckbox?: (args: { checked: boolean; indeterminate: boolean; onCheck: () => void }) => any;\n  renderIcon?: (args: { item: TreeItem; level: number; hasChildren: boolean; expanded: boolean }) => any;\n}\n\nconst buildChildrenMap = (items: TreeItem[], preserveOrder: boolean = false): Map<string | null, TreeItem[]> => {\n  const byParent = new Map<string | null, TreeItem[]>();\n  for (const item of items) {\n    const key = (item.parentId ?? null) as string | null;\n    const list = byParent.get(key) ?? [];\n    list.push(item);\n    byParent.set(key, list);\n  }\n  \n  // Apply sorting based on preserveOrder flag\n  if (!preserveOrder) {\n    // Default behavior: stable sort by label for determinism\n    for (const [, list] of byParent) {\n      list.sort((a, b) => a.label.localeCompare(b.label));\n    }\n  }\n  // If preserveOrder is true, keep the original order (e.g., sorted by sort_order)\n  \n  return byParent;\n};\n\nexport const Tree: FunctionComponent<TreeProps> = ({\n  items,\n  rootId = null,\n  className,\n  expandedIds,\n  selectedId = null,\n  selectedIds,\n  onExpandedChange,\n  onSelectedChange,\n  onSelectedIdsChange,\n  renderNode,\n  role = 'tree',\n  preserveOrder = false,\n  draggable,\n  canDrop,\n  onMove,\n  isCheckable,\n  checkedIds,\n  onCheckedChange,\n  biDirectionalChecking = false,\n  renderExpander,\n  renderCheckbox,\n  renderIcon,\n}) => {\n  const byParent = useMemo(() => buildChildrenMap(items, preserveOrder), [items, preserveOrder]);\n  const draggingIdRef = useRef<string | null>(null);\n  const multiSelectRef = useRef<boolean>(false);\n\n  const byId = useMemo(() => new Map(items.map((i) => [i.id, i] as const)), [items]);\n\n  const collectDescendants = (\n    byParentMap: Map<string | null, TreeItem[]>,\n    id: string\n  ): string[] => {\n    const out: string[] = [];\n    const stack = [id];\n    while (stack.length) {\n      const cur = stack.pop()!;\n      const children = byParentMap.get(cur) ?? [];\n      for (const ch of children) {\n        out.push(ch.id);\n        stack.push(ch.id);\n      }\n    }\n    return out;\n  };\n\n  const getDescendants = useCallback(\n    (id: string): string[] => {\n      return collectDescendants(byParent, id);\n    },\n    [byParent]\n  );\n\n  const isNodeCheckable = useCallback((item: TreeItem) => (isCheckable ? isCheckable(item) : true), [isCheckable]);\n\n  const computeCheckedState = useCallback(\n    (id: string): { checked: boolean; indeterminate: boolean } => {\n      const item = byId.get(id);\n      if (!item) return { checked: false, indeterminate: false };\n      \n      const set = checkedIds ?? new Set<string>();\n      \n      if (biDirectionalChecking) {\n        // If this node is directly checked, show it as checked\n        if (set.has(id)) {\n          return { checked: true, indeterminate: false };\n        }\n        \n        // Otherwise, check descendants to determine indeterminate state\n        const descendants = getDescendants(id).filter((nid) => {\n          const node = byId.get(nid);\n          return node ? isNodeCheckable(node) : false;\n        });\n        \n        if (descendants.length === 0) return { checked: false, indeterminate: false };\n        \n        const numCheckedDescendants = descendants.reduce((acc, nid) => (set.has(nid) ? acc + 1 : acc), 0);\n        \n        if (numCheckedDescendants === 0) return { checked: false, indeterminate: false };\n        return { checked: false, indeterminate: true };\n      }\n      \n      // Check if node and ALL descendants are checked\n      const all = [id, ...getDescendants(id)].filter((nid) => {\n          const node = byId.get(nid);\n          return node ? isNodeCheckable(node) : false;\n        });\n        \n        if (all.length === 0) return { checked: false, indeterminate: false };\n        \n        const numChecked = all.reduce((acc, nid) => (set.has(nid) ? acc + 1 : acc), 0);\n        \n        if (numChecked === 0) return { checked: false, indeterminate: false };\n        if (numChecked === all.length) return { checked: true, indeterminate: false };\n        return { checked: false, indeterminate: true };\n    },\n    [byId, getDescendants, isNodeCheckable, checkedIds, biDirectionalChecking]\n  );\n\n  const toggleCheck = useCallback(\n    (id: string) => {\n      if (!onCheckedChange) return;\n      \n      const set = new Set(checkedIds ?? []);\n      const { checked } = computeCheckedState(id);\n      \n      // 1) Handle downward propagation: check/uncheck this node and all descendants\n      const descendants = getDescendants(id);\n      const targets = [id, ...descendants].filter((nid) => {\n        const node = byId.get(nid);\n        return node ? isNodeCheckable(node) : false;\n      });\n      \n      if (checked) {\n        // Unchecking: remove this node and all descendants\n        for (const nid of targets) set.delete(nid);\n      } else {\n        // Checking: add this node and all descendants\n        for (const nid of targets) set.add(nid);\n      }\n      \n      // 2) Handle upward propagation: only check ancestors when checking\n      if (biDirectionalChecking && !checked) {\n        const item = byId.get(id);\n        if (item) {\n          let currentParentId = item.parentId;\n          while (currentParentId) {\n            const parentItem = byId.get(currentParentId);\n            if (!parentItem || !isNodeCheckable(parentItem)) break;\n            \n            // When checking a child, check the parent\n            set.add(currentParentId);\n            \n            // Move up to the next parent\n            currentParentId = parentItem.parentId;\n          }\n        }\n      }\n      \n      onCheckedChange(set);\n    },\n    [checkedIds, onCheckedChange, computeCheckedState, getDescendants, byId, isNodeCheckable, biDirectionalChecking]\n  );\n\n  // Default checkbox renderer that handles tri-state logic\n  const defaultCheckboxRenderer = useCallback(\n    (args: { checked: boolean; indeterminate: boolean; onCheck: () => void }) => {\n      return (\n        <Checkbox\n          name={`tree-checkbox-${Math.random().toString(36).substr(2, 9)}`}\n          checked={args.checked}\n          indeterminate={args.indeterminate}\n          onChange={args.onCheck}\n        />\n      );\n    },\n    []\n  );\n\n  const toggle = useCallback(\n    (id: string) => {\n      const next = new Set(expandedIds);\n      if (next.has(id)) next.delete(id);\n      else next.add(id);\n      onExpandedChange(next);\n    },\n    [expandedIds, onExpandedChange]\n  );\n\n  const select = useCallback(\n    (id: string) => {\n      // If the node is checkable, toggle its checkbox state\n      const item = byId.get(id);\n      if (item && isNodeCheckable(item) && onCheckedChange) {\n        toggleCheck(id);\n      }\n\n      if (!onSelectedIdsChange) {\n        onSelectedChange?.(id);\n        return;\n      }\n\n      const isMulti = !!multiSelectRef.current;\n      const next = isMulti ? new Set(selectedIds ?? []) : new Set<string>();\n      \n      if (isMulti && next.has(id)) {\n        next.delete(id);\n      } else {\n        next.add(id);\n      }\n      \n      onSelectedIdsChange(next);\n      multiSelectRef.current = false;\n    },\n    [onSelectedChange, onSelectedIdsChange, selectedIds, byId, isNodeCheckable, onCheckedChange, toggleCheck]\n  );\n\n  const renderSubtree = (parentId: string | null, level: number): any => {\n    const children = byParent.get(parentId) ?? [];\n    if (!children.length) return null;\n    const ulClass = level === 1 ? (className ?? 'acm-tree') : 'acm-tree__group';\n    return (\n      <ul role={level === 1 ? (role as any) : 'group'} className={ulClass}>\n        {children.map((item, index) => {\n          const childHasChildren = (byParent.get(item.id) ?? []).length > 0;\n          const isExpanded = expandedIds.has(item.id);\n          const isSelected = (selectedIds ? selectedIds.has(item.id) : (selectedId === item.id));\n          const isDraggable = !!draggable?.(item);\n          const allowDrop = (dragId: string) => (canDrop ? canDrop(dragId, item.id) : dragId !== item.id);\n          // Optional helpers for Elsie-based UIs\n          const expanderFactory = childHasChildren\n            ? () => (renderExpander ? renderExpander({ expanded: isExpanded, hasChildren: childHasChildren, toggle: () => toggle(item.id) }) : null)\n            : undefined;\n          const checkboxFactory = (() => {\n            if (!onCheckedChange) return undefined;\n            const nodeObj = byId.get(item.id);\n            if (!nodeObj || !isNodeCheckable(nodeObj)) return undefined;\n            const s = computeCheckedState(item.id);\n            const checkboxRenderer = renderCheckbox || defaultCheckboxRenderer;\n            return () => checkboxRenderer({ checked: s.checked, indeterminate: s.indeterminate, onCheck: () => toggleCheck(item.id) });\n          })();\n          const iconFactory = renderIcon\n            ? () => renderIcon({ item, level, hasChildren: childHasChildren, expanded: isExpanded })\n            : undefined;\n\n          const node = renderNode({\n            item,\n            level,\n            expanded: isExpanded,\n            selected: !!isSelected,\n            hasChildren: childHasChildren,\n            toggle: () => toggle(item.id),\n            select: () => select(item.id),\n            ...(expanderFactory ? { expander: expanderFactory } : {}),\n            ...(checkboxFactory ? { checkbox: checkboxFactory } : {}),\n            ...(iconFactory ? { icon: iconFactory } : {}),\n          });\n          return (\n            <li\n              key={item.id}\n              role=\"treeitem\"\n              className=\"acm-tree__item\"\n              data-level={level}\n              aria-expanded={childHasChildren ? isExpanded : undefined}\n              aria-selected={isSelected || undefined}\n              aria-level={level as any}\n              aria-setsize={children.length as any}\n              aria-posinset={(index + 1) as any}\n              draggable={isDraggable}\n              onMouseDown={(e) => {\n                // Command (mac) or Ctrl (win/linux) enables multi-select\n                multiSelectRef.current = !!(e.metaKey || e.ctrlKey);\n              }}\n              onDragStart={(e) => {\n                e.stopPropagation();\n                if (!isDraggable) return;\n                draggingIdRef.current = item.id;\n                try { e.dataTransfer?.setData('text/plain', item.id); } catch {}\n              }}\n              onDragEnter={(e) => {\n                // Required by mobile-drag-drop polyfill\n                e.preventDefault();\n              }}\n              onDragOver={(e) => {\n                e.stopPropagation();\n                const dragId = draggingIdRef.current ?? (e.dataTransfer?.getData('text/plain') || '');\n                if (dragId && allowDrop(dragId)) {\n                  e.preventDefault();\n                }\n              }}\n              onDrop={(e) => {\n                e.stopPropagation();\n                const dragId = draggingIdRef.current ?? (e.dataTransfer?.getData('text/plain') || '');\n                draggingIdRef.current = null;\n                if (dragId && allowDrop(dragId)) {\n                  onMove?.({ id: dragId, newParentId: item.id });\n                }\n              }}\n            >\n              {node}\n              {childHasChildren && isExpanded ? renderSubtree(item.id, level + 1) : null}\n            </li>\n          );\n        })}\n      </ul>\n    );\n  };\n\n  return <div className=\"acm-tree-root\">{renderSubtree(rootId, 1)}</div>;\n};\n\nexport default Tree;\n"],"names":["t","i","exports","this","c","s","f","e","l","h","n","u","o","r","a","d","v","p","g","m","y","b","w","x","I","j","k","S","C","polyfillInitialized","polyfill","event","element","buildChildrenMap","items","preserveOrder","byParent","item","key","list","Tree","rootId","className","expandedIds","selectedId","selectedIds","onExpandedChange","onSelectedChange","onSelectedIdsChange","renderNode","role","draggable","canDrop","onMove","isCheckable","checkedIds","onCheckedChange","biDirectionalChecking","renderExpander","renderCheckbox","renderIcon","useMemo","draggingIdRef","useRef","multiSelectRef","byId","collectDescendants","byParentMap","id","out","stack","cur","children","ch","getDescendants","useCallback","isNodeCheckable","computeCheckedState","set","descendants","nid","node","acc","all","numChecked","toggleCheck","checked","targets","currentParentId","parentItem","defaultCheckboxRenderer","args","jsx","Checkbox","toggle","next","select","isMulti","renderSubtree","parentId","level","index","childHasChildren","isExpanded","isSelected","isDraggable","allowDrop","dragId","expanderFactory","checkboxFactory","nodeObj","checkboxRenderer","iconFactory","jsxs","_a"],"mappings":"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","x_google_ignoreList":[0]}