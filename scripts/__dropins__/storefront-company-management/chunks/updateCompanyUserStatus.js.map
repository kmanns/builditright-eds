{"version":3,"file":"updateCompanyUserStatus.js","sources":["/@dropins/storefront-company-management/src/data/transforms/transform-company-user.ts","/@dropins/storefront-company-management/src/api/createCompanyUser/graphql/createCompanyUser.graphql.ts","/@dropins/storefront-company-management/src/api/createCompanyUser/createCompanyUser.ts","/@dropins/storefront-company-management/src/api/getCompanyUser/graphql/getCompanyUser.graphql.ts","/@dropins/storefront-company-management/src/api/getCompanyUser/getCompanyUser.ts","/@dropins/storefront-company-management/src/api/isCompanyUserEmailAvailable/graphql/isCompanyUserEmailAvailable.graphql.ts","/@dropins/storefront-company-management/src/api/isCompanyUserEmailAvailable/isCompanyUserEmailAvailable.ts","/@dropins/storefront-company-management/src/api/updateCompanyUser/graphql/updateCompanyUser.graphql.ts","/@dropins/storefront-company-management/src/api/updateCompanyUser/updateCompanyUser.ts","/@dropins/storefront-company-management/src/api/updateCompanyUserStatus/graphql/updateCompanyUserStatus.graphql.ts","/@dropins/storefront-company-management/src/api/updateCompanyUserStatus/updateCompanyUserStatus.ts"],"sourcesContent":["/********************************************************************\n * ADOBE CONFIDENTIAL\n * __________________\n *\n *  Copyright 2025 Adobe\n *  All Rights Reserved.\n *\n * NOTICE:  All information contained herein is, and remains\n * the property of Adobe and its suppliers, if any. The intellectual\n * and technical concepts contained herein are proprietary to Adobe\n * and its suppliers and are protected by all applicable intellectual\n * property laws, including trade secret and copyright laws.\n * Dissemination of this information or reproduction of this material\n * is strictly forbidden unless prior written permission is obtained\n * from Adobe.\n *******************************************************************/\n\nimport { CompanyUserModel } from '@/company-management/data/models/company-user';\nimport { isCompanyAdministrator } from '@/company-management/lib';\n\ninterface CompanyUserResponse {\n  id: string;\n  email: string;\n  firstname: string;\n  lastname: string;\n  job_title?: string | null;\n  telephone?: string | null;\n  status?: string | null;\n  role?: {\n    id: string;\n    name: string;\n  } | null;\n}\n\nexport const transformCompanyUser = (response: CompanyUserResponse): CompanyUserModel => {\n  if (!response) {\n    throw new Error('Invalid response: missing user data');\n  }\n\n  return {\n    id: response.id,\n    email: response.email,\n    firstName: response.firstname,\n    lastName: response.lastname,\n    jobTitle: response.job_title,\n    telephone: response.telephone,\n    status: response.status,\n    role: response.role,\n    isCompanyAdmin: isCompanyAdministrator(response.role),\n  };\n};\n","/********************************************************************\n * ADOBE CONFIDENTIAL\n * __________________\n *\n *  Copyright 2025 Adobe\n *  All Rights Reserved.\n *\n * NOTICE:  All information contained herein is, and remains\n * the property of Adobe and its suppliers, if any. The intellectual\n * and technical concepts contained herein are proprietary to Adobe\n * and its suppliers and are protected by all applicable intellectual\n * property laws, including trade secret and copyright laws.\n * Dissemination of this information or reproduction of this material\n * is strictly forbidden unless prior written permission is obtained\n * from Adobe.\n *******************************************************************/\n\nexport const CREATE_COMPANY_USER = /* GraphQL */ `\n  mutation createCompanyUser($input: CompanyUserCreateInput!) {\n    createCompanyUser(input: $input) { __typename user { id structure_id email firstname lastname job_title } }\n  }\n`;\n","/********************************************************************\n * ADOBE CONFIDENTIAL\n * __________________\n *\n *  Copyright 2025 Adobe\n *  All Rights Reserved.\n *\n * NOTICE:  All information contained herein is, and remains\n * the property of Adobe and its suppliers, if any. The intellectual\n * and technical concepts contained herein are proprietary to Adobe\n * and its suppliers and are protected by all applicable intellectual\n * property laws, including trade secret and copyright laws.\n * Dissemination of this information or reproduction of this material\n * is strictly forbidden unless prior written permission is obtained\n * from Adobe.\n *******************************************************************/\nimport { fetchGraphQl } from '@/company-management/api';\nimport { handleNetworkError, handleFetchError } from '@/company-management/lib';\nimport { CreateCompanyUserInput, CreateCompanyUserResult } from '@/company-management/types';\nimport { CREATE_COMPANY_USER } from './graphql/createCompanyUser.graphql';\n\n/**\n * Creates a new company user with the provided information\n * @param input - User information including email, name, job title, and role\n * @returns Promise resolving to created user result or null if creation failed\n */\nexport async function createCompanyUser(input: CreateCompanyUserInput): Promise<CreateCompanyUserResult | null> {\n  const transformedInput = {\n    email: input.email,\n    firstname: input.firstName,\n    lastname: input.lastName,\n    job_title: input.jobTitle,\n    telephone: input.telephone,\n    role_id: input.roleId,\n    status: input.status,\n    target_id: input.targetId,\n  };\n\n  return await fetchGraphQl<{ createCompanyUser?: { user?: { id: string; structure_id?: string; job_title?: string | null } } }>(CREATE_COMPANY_USER, { variables: { input: transformedInput } })\n    .then((res) => {\n      if (res.errors?.length) return handleFetchError(res.errors);\n      const user = res?.data?.createCompanyUser?.user;\n      if (!user) return null;\n\n      return {\n        id: user.id,\n        structureId: user.structure_id,\n        jobTitle: user.job_title,\n      };\n    })\n    .catch(handleNetworkError);\n}\n","/********************************************************************\n * ADOBE CONFIDENTIAL\n * __________________\n *\n *  Copyright 2025 Adobe\n *  All Rights Reserved.\n *\n * NOTICE:  All information contained herein is, and remains\n * the property of Adobe and its suppliers, if any. The intellectual\n * and technical concepts contained herein are proprietary to Adobe\n * and its suppliers and are protected by all applicable intellectual\n * property laws, including trade secret and copyright laws.\n * Dissemination of this information or reproduction of this material\n * is strictly forbidden unless prior written permission is obtained\n * from Adobe.\n *******************************************************************/\n\nexport const GET_COMPANY_USER = /* GraphQL */ `\n  query getCompanyUser($id: ID!) {\n    company {\n      user(id: $id) {\n        id\n        email\n        firstname\n        lastname\n        job_title\n        telephone\n        status\n        role { id name }\n      }\n    }\n  }\n`;\n","/********************************************************************\n * ADOBE CONFIDENTIAL\n * __________________\n *\n *  Copyright 2025 Adobe\n *  All Rights Reserved.\n *\n * NOTICE:  All information contained herein is, and remains\n * the property of Adobe and its suppliers, if any. The intellectual\n * and technical concepts contained herein are proprietary to Adobe\n * and its suppliers and are protected by all applicable intellectual\n * property laws, including trade secret and copyright laws.\n * Dissemination of this information or reproduction of this material\n * is strictly forbidden unless prior written permission is obtained\n * from Adobe.\n *******************************************************************/\nimport { fetchGraphQl } from '@/company-management/api';\nimport { handleNetworkError, handleFetchError } from '@/company-management/lib';\nimport { CompanyUserModel } from '@/company-management/data/models';\nimport { transformCompanyUser } from '@/company-management/data/transforms';\nimport { GET_COMPANY_USER } from './graphql/getCompanyUser.graphql';\n\n/**\n * Retrieves a specific company user by their ID\n * @param id - The ID of the company user to retrieve (base64 encoded UID from GraphQL)\n * @returns Promise resolving to CompanyUserModel or null if user not found\n */\nexport async function getCompanyUser(id: string): Promise<CompanyUserModel | null> {\n  return await fetchGraphQl<{ company: { user?: { id: string; email: string; firstname: string; lastname: string; job_title?: string | null; telephone?: string | null; status?: string | null; role?: { id: string; name: string } | null } } }>(GET_COMPANY_USER, { variables: { id } })\n    .then((res) => {\n      if (res.errors?.length) return handleFetchError(res.errors);\n      const user = res?.data?.company?.user;\n      if (!user) return null;\n\n      return transformCompanyUser(user);\n    })\n    .catch(handleNetworkError);\n}\n","/********************************************************************\n * ADOBE CONFIDENTIAL\n * __________________\n *\n *  Copyright 2025 Adobe\n *  All Rights Reserved.\n *\n * NOTICE:  All information contained herein is, and remains\n * the property of Adobe and its suppliers, if any. The intellectual\n * and technical concepts contained herein are proprietary to Adobe\n * and its suppliers and are protected by all applicable intellectual\n * property laws, including trade secret and copyright laws.\n * Dissemination of this information or reproduction of this material\n * is strictly forbidden unless prior written permission is obtained\n * from Adobe.\n *******************************************************************/\n\nexport const IS_COMPANY_USER_EMAIL_AVAILABLE = /* GraphQL */ `\n  query isCompanyUserEmailAvailable($email: String!) {\n    isCompanyUserEmailAvailable(email: $email) { is_email_available }\n  }\n`;\n","/********************************************************************\n * ADOBE CONFIDENTIAL\n * __________________\n *\n *  Copyright 2025 Adobe\n *  All Rights Reserved.\n *\n * NOTICE:  All information contained herein is, and remains\n * the property of Adobe and its suppliers, if any. The intellectual\n * and technical concepts contained herein are proprietary to Adobe\n * and its suppliers and are protected by all applicable intellectual\n * property laws, including trade secret and copyright laws.\n * Dissemination of this information or reproduction of this material\n * is strictly forbidden unless prior written permission is obtained\n * from Adobe.\n *******************************************************************/\nimport { fetchGraphQl } from '@/company-management/api';\nimport { handleNetworkError, handleFetchError } from '@/company-management/lib';\nimport { IS_COMPANY_USER_EMAIL_AVAILABLE } from './graphql/isCompanyUserEmailAvailable.graphql';\n\n/**\n * Checks if an email address is available for use by a new company user\n * @param email - The email address to check for availability\n * @returns Promise resolving to boolean indicating availability or null if check failed\n */\nexport async function isCompanyUserEmailAvailable(email: string): Promise<boolean | null> {\n  return await fetchGraphQl<{ isCompanyUserEmailAvailable?: { is_email_available: boolean } }>(IS_COMPANY_USER_EMAIL_AVAILABLE, { variables: { email } })\n    .then((res) => {\n      if (res.errors?.length) return handleFetchError(res.errors);\n      return res?.data?.isCompanyUserEmailAvailable?.is_email_available ?? null;\n    })\n    .catch(handleNetworkError);\n}\n","/********************************************************************\n * ADOBE CONFIDENTIAL\n * __________________\n *\n *  Copyright 2025 Adobe\n *  All Rights Reserved.\n *\n * NOTICE:  All information contained herein is, and remains\n * the property of Adobe and its suppliers, if any. The intellectual\n * and technical concepts contained herein are proprietary to Adobe\n * and its suppliers and are protected by all applicable intellectual\n * property laws, including trade secret and copyright laws.\n * Dissemination of this information or reproduction of this material\n * is strictly forbidden unless prior written permission is obtained\n * from Adobe.\n *******************************************************************/\n\nexport const UPDATE_COMPANY_USER = /* GraphQL */ `\n  mutation updateCompanyUser($input: CompanyUserUpdateInput!) {\n    updateCompanyUser(input: $input) { __typename user { id } }\n  }\n`;\n","/********************************************************************\n * ADOBE CONFIDENTIAL\n * __________________\n *\n *  Copyright 2025 Adobe\n *  All Rights Reserved.\n *\n * NOTICE:  All information contained herein is, and remains\n * the property of Adobe and its suppliers, if any. The intellectual\n * and technical concepts contained herein are proprietary to Adobe\n * and its suppliers and are protected by all applicable intellectual\n * property laws, including trade secret and copyright laws.\n * Dissemination of this information or reproduction of this material\n * is strictly forbidden unless prior written permission is obtained\n * from Adobe.\n *******************************************************************/\nimport { fetchGraphQl } from '@/company-management/api';\nimport { handleNetworkError, handleFetchError } from '@/company-management/lib';\nimport { UpdateCompanyUserInput } from '@/company-management/types';\nimport { UPDATE_COMPANY_USER } from './graphql/updateCompanyUser.graphql';\n\n/**\n * Updates an existing company user with the provided information\n * @param input - User information including ID (base64 encoded UID) and fields to update\n * @returns Promise resolving to boolean indicating success\n */\nexport async function updateCompanyUser(input: UpdateCompanyUserInput): Promise<boolean> {\n  const transformedInput = {\n    id: input.id,\n    email: input.email,\n    firstname: input.firstName,\n    lastname: input.lastName,\n    job_title: input.jobTitle,\n    telephone: input.telephone,\n    role_id: input.roleId,\n    status: input.status,\n  };\n\n  return await fetchGraphQl<{ updateCompanyUser?: { user?: { id: string } } }>(UPDATE_COMPANY_USER, { variables: { input: transformedInput } })\n    .then((res) => {\n      if (res.errors?.length) return handleFetchError(res.errors);\n      return !!res?.data?.updateCompanyUser?.user?.id;\n    })\n    .catch(handleNetworkError);\n}\n","/********************************************************************\n * ADOBE CONFIDENTIAL\n * __________________\n *\n *  Copyright 2025 Adobe\n *  All Rights Reserved.\n *\n * NOTICE:  All information contained herein is, and remains\n * the property of Adobe and its suppliers, if any. The intellectual\n * and technical concepts contained herein are proprietary to Adobe\n * and its suppliers and are protected by all applicable intellectual\n * property laws, including trade secret and copyright laws.\n * Dissemination of this information or reproduction of this material\n * is strictly forbidden unless prior written permission is obtained\n * from Adobe.\n *******************************************************************/\nexport const UPDATE_COMPANY_USER_STATUS_MUTATION = /* GraphQL */ `\n  mutation UPDATE_COMPANY_USER_STATUS($input: CompanyUserUpdateInput!) {\n    updateCompanyUser(input: $input) {\n      user {\n        id\n        status\n      }\n    }\n  }\n`;\n","/********************************************************************\n * ADOBE CONFIDENTIAL\n * __________________\n *\n *  Copyright 2025 Adobe\n *  All Rights Reserved.\n *\n * NOTICE:  All information contained herein is, and remains\n * the property of Adobe and its suppliers, if any. The intellectual\n * and technical concepts contained herein are proprietary to Adobe\n * and its suppliers and are protected by all applicable intellectual\n * property laws, including trade secret and copyright laws.\n * Dissemination of this information or reproduction of this material\n * is strictly forbidden unless prior written permission is obtained\n * from Adobe.\n *******************************************************************/\nimport { fetchGraphQl } from '@/company-management/api';\nimport { handleNetworkError, handleFetchError } from '@/company-management/lib';\nimport { UPDATE_COMPANY_USER_STATUS_MUTATION } from './graphql/updateCompanyUserStatus.graphql';\nimport {\n  UpdateCompanyUserStatusMutation,\n  UpdateCompanyUserStatusParams,\n  UpdateCompanyUserStatusResponse,\n} from '@/company-management/types';\n\n/**\n * Updates a company user's status (Active/Inactive)\n * @param params - The parameters containing user ID and new status\n * @param params.id - The ID of the user to update (base64 encoded UID from GraphQL)\n * @param params.status - The new status for the user (ACTIVE or INACTIVE)\n * @returns Promise<UpdateCompanyUserStatusResponse> - Object containing success status and updated user data\n */\nexport const updateCompanyUserStatus = async (params: UpdateCompanyUserStatusParams): Promise<UpdateCompanyUserStatusResponse> => {\n  const { id, status } = params;\n  \n  if (!id) {\n    throw new Error('User ID is required to update company user status');\n  }\n  \n  if (!status || (status !== 'ACTIVE' && status !== 'INACTIVE')) {\n    throw new Error('Valid status (ACTIVE or INACTIVE) is required to update company user status');\n  }\n  \n  const response = await fetchGraphQl<UpdateCompanyUserStatusMutation>(\n    UPDATE_COMPANY_USER_STATUS_MUTATION,\n    {\n      method: 'POST',\n      cache: 'no-cache',\n      variables: {\n        input: {\n          id,\n          status\n        }\n      }\n    }\n  ).catch(handleNetworkError);\n\n  if (response.errors?.length) {\n    handleFetchError(response.errors);\n  }\n\n  if (!response.data?.updateCompanyUser?.user) {\n    return {\n      success: false\n    };\n  }\n\n  return {\n    success: true,\n    user: {\n      id: response.data.updateCompanyUser.user.id,\n      status: response.data.updateCompanyUser.user.status\n    }\n  };\n};\n"],"names":["transformCompanyUser","response","isCompanyAdministrator","CREATE_COMPANY_USER","createCompanyUser","input","transformedInput","fetchGraphQl","res","_a","handleFetchError","user","_c","_b","handleNetworkError","GET_COMPANY_USER","getCompanyUser","id","IS_COMPANY_USER_EMAIL_AVAILABLE","isCompanyUserEmailAvailable","email","UPDATE_COMPANY_USER","updateCompanyUser","_d","UPDATE_COMPANY_USER_STATUS_MUTATION","updateCompanyUserStatus","params","status"],"mappings":"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"}