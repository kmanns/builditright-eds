{"version":3,"file":"AttachedFilesList.js","sources":["../../node_modules/@adobe-commerce/elsie/src/icons/Add.svg","../../node_modules/@adobe-commerce/elsie/src/icons/Close.svg","/@dropins/storefront-quote-management/src/utils/fileUtils.ts","/@dropins/storefront-quote-management/src/components/AttachedFilesList/AttachedFilesList.tsx"],"sourcesContent":["import * as React from \"react\";\nconst SvgAdd = (props) => /* @__PURE__ */ React.createElement(\"svg\", { id: \"Icon_Add_Base\", \"data-name\": \"Icon \\\\u2013 Add \\\\u2013 Base\", xmlns: \"http://www.w3.org/2000/svg\", width: 24, height: 24, viewBox: \"0 0 24 24\", ...props }, /* @__PURE__ */ React.createElement(\"g\", { id: \"Large\" }, /* @__PURE__ */ React.createElement(\"rect\", { id: \"Placement_area\", \"data-name\": \"Placement area\", width: 24, height: 24, fill: \"#fff\", opacity: 0 }), /* @__PURE__ */ React.createElement(\"g\", { id: \"Add_icon\", \"data-name\": \"Add icon\", transform: \"translate(9.734 9.737)\" }, /* @__PURE__ */ React.createElement(\"line\", { vectorEffect: \"non-scaling-stroke\", id: \"Line_579\", \"data-name\": \"Line 579\", y2: 12.7, transform: \"translate(2.216 -4.087)\", fill: \"none\", stroke: \"currentColor\" }), /* @__PURE__ */ React.createElement(\"line\", { vectorEffect: \"non-scaling-stroke\", id: \"Line_580\", \"data-name\": \"Line 580\", x2: 12.7, transform: \"translate(-4.079 2.263)\", fill: \"none\", stroke: \"currentColor\" }))));\nexport default SvgAdd;\n","import * as React from \"react\";\nconst SvgClose = (props) => /* @__PURE__ */ React.createElement(\"svg\", { width: 24, height: 24, viewBox: \"0 0 24 24\", fill: \"none\", xmlns: \"http://www.w3.org/2000/svg\", ...props }, /* @__PURE__ */ React.createElement(\"path\", { vectorEffect: \"non-scaling-stroke\", d: \"M18.3599 5.64001L5.62988 18.37\", stroke: \"currentColor\" }), /* @__PURE__ */ React.createElement(\"path\", { vectorEffect: \"non-scaling-stroke\", d: \"M18.3599 18.37L5.62988 5.64001\", stroke: \"currentColor\" }));\nexport default SvgClose;\n","/********************************************************************\n *  Copyright 2025 Adobe\n *  All Rights Reserved.\n *\n * NOTICE:  Adobe permits you to use, modify, and distribute this\n * file in accordance with the terms of the Adobe license agreement\n * accompanying it.\n *******************************************************************/\n\n/**\n * Formats a file size in bytes to a human-readable string\n * @param bytes - The file size in bytes\n * @returns A formatted string with the appropriate unit (Bytes, KB, MB, GB)\n * \n * @example\n * formatFileSize(0) // '0 Bytes'\n * formatFileSize(1024) // '1 KB'\n * formatFileSize(1536) // '1.5 KB'\n * formatFileSize(1048576) // '1 MB'\n * formatFileSize(5242880) // '5 MB'\n */\nexport const formatFileSize = (bytes: number): string => {\n  if (bytes === 0) return '0 Bytes';\n  \n  const k = 1024;\n  const sizes = ['Bytes', 'KB', 'MB', 'GB'];\n  const i = Math.floor(Math.log(bytes) / Math.log(k));\n  \n  // Ensure we don't go beyond our sizes array\n  const sizeIndex = Math.min(i, sizes.length - 1);\n  \n  const size = bytes / Math.pow(k, sizeIndex);\n  \n  // Round to 2 decimal places\n  const roundedSize = Math.round(size * 100) / 100;\n  \n  return `${roundedSize} ${sizes[sizeIndex]}`;\n};\n\n/**\n * Validates if a file type is accepted\n * @param fileType - The MIME type of the file\n * @param acceptedTypes - Array of accepted MIME types (e.g., ['image/png', 'application/pdf'])\n * @returns true if the file type is accepted, false otherwise\n * \n * @example\n * validateFileType('image/png', ['image/png', 'image/jpeg']) // true\n * validateFileType('application/pdf', ['image/png']) // false\n * validateFileType('image/png', []) // true (empty array means all types accepted)\n */\nexport const validateFileType = (\n  fileType: string,\n  acceptedTypes?: string[]\n): boolean => {\n  if (!acceptedTypes || acceptedTypes.length === 0) {\n    return true;\n  }\n  \n  return acceptedTypes.includes(fileType);\n};\n\n/**\n * Validates if a file size is within the maximum limit\n * @param fileSize - The file size in bytes\n * @param maxSize - Maximum allowed file size in bytes\n * @returns true if the file size is within the limit, false otherwise\n * \n * @example\n * validateFileSize(1024, 2048) // true\n * validateFileSize(3072, 2048) // false\n * validateFileSize(1024, undefined) // true (no limit)\n */\nexport const validateFileSize = (\n  fileSize: number,\n  maxSize?: number\n): boolean => {\n  if (maxSize === undefined || maxSize === null) {\n    return true;\n  }\n  \n  return fileSize <= maxSize;\n};\n\n","/********************************************************************\n *  Copyright 2025 Adobe\n *  All Rights Reserved.\n *\n * NOTICE:  Adobe permits you to use, modify, and distribute this\n * file in accordance with the terms of the Adobe license agreement\n * accompanying it.\n *******************************************************************/\n\nimport { FunctionComponent } from 'preact';\nimport { useText } from '@adobe-commerce/elsie/i18n';\nimport { Button } from '@adobe-commerce/elsie/components';\nimport { Close, CheckWithCircle, WarningFilled } from '@adobe-commerce/elsie/icons';\nimport { formatFileSize } from '@/quote-management/utils/fileUtils';\nimport './AttachedFilesList.css';\n\nexport interface AttachedFile {\n  key: string;\n  name: string;\n  size: number;\n  status: 'uploading' | 'success' | 'error';\n  error?: string;\n}\n\nexport interface AttachedFilesListProps {\n  files: AttachedFile[];\n  onRemove: (key: string) => void;\n  disabled?: boolean;\n}\n\nexport const AttachedFilesList: FunctionComponent<AttachedFilesListProps> = ({\n  files,\n  onRemove,\n  disabled = false,\n}) => {\n  const dictionary = useText({\n    removeFile: 'NegotiableQuote.Manage.removeFile',\n    uploading: 'NegotiableQuote.Manage.uploading',\n    uploadSuccess: 'NegotiableQuote.Manage.uploadSuccess',\n    uploadError: 'NegotiableQuote.Manage.uploadError',\n  });\n\n  if (!files || files.length === 0) {\n    return null;\n  }\n\n  return (\n    <div className=\"attached-files-list\" data-testid=\"attached-files-list\">\n      {files.map((file) => {\n        const isUploading = file.status === 'uploading';\n        const isError = file.status === 'error';\n        const isSuccess = file.status === 'success';\n        const canRemove = !disabled && !isUploading;\n\n        return (\n          <div\n            key={file.key}\n            className={`attached-files-list__item attached-files-list__item--${file.status}`}\n            data-testid={`attached-file-${file.key}`}\n          >\n            <div className=\"attached-files-list__item-main\">\n              <div className=\"attached-files-list__item-icon\">\n                {isUploading && (\n                  <div\n                    className=\"attached-files-list__spinner\"\n                    data-testid=\"file-uploading-spinner\"\n                    aria-label={dictionary.uploading}\n                  />\n                )}\n                {isSuccess && (\n                  <CheckWithCircle\n                    data-testid=\"file-success-icon\"\n                    aria-label={dictionary.uploadSuccess}\n                    className=\"attached-files-list__success-icon\"\n                  />\n                )}\n                {isError && (\n                  <WarningFilled\n                    data-testid=\"file-error-icon\"\n                    aria-label={dictionary.uploadError}\n                    color=\"var(--color-error)\"\n                    className=\"attached-files-list__error-icon\"\n                  />\n                )}\n              </div>\n\n              <div className=\"attached-files-list__item-info\">\n                <div className=\"attached-files-list__item-name\" data-testid=\"file-name\">\n                  {file.name}\n                </div>\n                <div className=\"attached-files-list__item-size\" data-testid=\"file-size\">\n                  {formatFileSize(file.size)}\n                  {isUploading && ` - ${dictionary.uploading}`}\n                </div>\n              </div>\n\n              <Button\n                variant=\"tertiary\"\n                onClick={() => onRemove(file.key)}\n                disabled={!canRemove}\n                type=\"button\"\n                aria-label={`${dictionary.removeFile}: ${file.name}`}\n                data-testid={`remove-file-${file.key}`}\n                className=\"attached-files-list__remove-button\"\n              >\n                <Close />\n              </Button>\n            </div>\n\n            {isError && file.error && (\n              <div\n                className=\"attached-files-list__item-error\"\n                data-testid=\"file-error-message\"\n              >\n                {file.error}\n              </div>\n            )}\n          </div>\n        );\n      })}\n    </div>\n  );\n};\n\n"],"names":["SvgAdd","props","React","SvgClose","formatFileSize","bytes","k","sizes","i","sizeIndex","size","validateFileType","fileType","acceptedTypes","validateFileSize","fileSize","maxSize","AttachedFilesList","files","onRemove","disabled","dictionary","useText","jsx","file","isUploading","isError","isSuccess","canRemove","jsxs","CheckWithCircle","WarningFilled","Button","Close"],"mappings":"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","x_google_ignoreList":[0,1]}