{"version":3,"file":"negotiableQuotes.js","sources":["/@dropins/storefront-quote-management/src/api/graphql/NegotiableQuoteListFragment.ts","/@dropins/storefront-quote-management/src/api/graphql/SearchResultPageInfoFragment.ts","/@dropins/storefront-quote-management/src/api/graphql/SortFieldsFragment.ts","/@dropins/storefront-quote-management/src/api/negotiableQuotes/graphql/NegotiableQuotesQuery.ts","/@dropins/storefront-quote-management/src/api/negotiableQuotes/negotiableQuotes.ts"],"sourcesContent":["/********************************************************************\n *  Copyright 2025 Adobe\n *  All Rights Reserved.\n *\n * NOTICE:  Adobe permits you to use, modify, and distribute this\n * file in accordance with the terms of the Adobe license agreement\n * accompanying it.\n *******************************************************************/\n\nexport const NEGOTIABLE_QUOTE_LIST_FRAGMENT = /* GraphQL */ `\n  fragment NegotiableQuoteListFragment on NegotiableQuote {\n    uid\n    name\n    created_at\n    updated_at\n    status\n    buyer {\n      firstname\n      lastname\n    }\n    template_name\n    prices {\n      grand_total {\n        value\n        currency\n      }\n    }\n    history {\n      change_type\n      changes {\n        statuses {\n          changes {\n            new_status\n            old_status\n          }\n        }\n      }\n    }\n  }\n`;\n","/********************************************************************\n *  Copyright 2025 Adobe\n *  All Rights Reserved.\n *\n * NOTICE:  Adobe permits you to use, modify, and distribute this\n * file in accordance with the terms of the Adobe license agreement\n * accompanying it.\n *******************************************************************/\n\nexport const SEARCH_RESULT_PAGE_INFO_FRAGMENT = /* GraphQL */ `\n  fragment SearchResultPageInfoFragment on SearchResultPageInfo {\n    current_page\n    page_size\n    total_pages\n  }\n`;\n","/********************************************************************\n *  Copyright 2025 Adobe\n *  All Rights Reserved.\n *\n * NOTICE:  Adobe permits you to use, modify, and distribute this\n * file in accordance with the terms of the Adobe license agreement\n * accompanying it.\n *******************************************************************/\n\nexport const SORT_FIELDS_FRAGMENT = /* GraphQL */ `\n  fragment SortFieldsFragment on SortFields {\n    default\n    options {\n      label\n      value\n    }\n  }\n`;\n","/********************************************************************\n *  Copyright 2025 Adobe\n *  All Rights Reserved.\n *\n * NOTICE:  Adobe permits you to use, modify, and distribute this\n * file in accordance with the terms of the Adobe license agreement\n * accompanying it.\n *******************************************************************/\n\nimport { NEGOTIABLE_QUOTE_LIST_FRAGMENT } from '@/quote-management/api/graphql/NegotiableQuoteListFragment';\nimport { SEARCH_RESULT_PAGE_INFO_FRAGMENT } from '@/quote-management/api/graphql/SearchResultPageInfoFragment';\nimport { SORT_FIELDS_FRAGMENT } from '@/quote-management/api/graphql/SortFieldsFragment';\n\nexport const NEGOTIABLE_QUOTES_QUERY = /* GraphQL */ `\n  query negotiableQuotes(\n    $filter: NegotiableQuoteFilterInput\n    $pageSize: Int\n    $currentPage: Int\n    $sort: NegotiableQuoteSortInput\n  ) {\n    negotiableQuotes(\n      filter: $filter\n      pageSize: $pageSize\n      currentPage: $currentPage\n      sort: $sort\n    ) {\n      items {\n        ...NegotiableQuoteListFragment\n      }\n      page_info {\n        ...SearchResultPageInfoFragment\n      }\n      sort_fields {\n        ...SortFieldsFragment\n      }\n      total_count\n    }\n  }\n\n  ${NEGOTIABLE_QUOTE_LIST_FRAGMENT}\n  ${SEARCH_RESULT_PAGE_INFO_FRAGMENT}\n  ${SORT_FIELDS_FRAGMENT}\n`;\n","/********************************************************************\n *  Copyright 2025 Adobe\n *  All Rights Reserved.\n *\n * NOTICE:  Adobe permits you to use, modify, and distribute this\n * file in accordance with the terms of the Adobe license agreement\n * accompanying it.\n *******************************************************************/\n\nimport { fetchGraphQl } from '@/quote-management/api';\nimport { NEGOTIABLE_QUOTES_QUERY } from './graphql/NegotiableQuotesQuery';\nimport { transformNegotiableQuotesList } from '@/quote-management/data/transforms';\nimport { NegotiableQuotesListModel } from '@/quote-management/data/models/negotiable-quote-model';\nimport { state } from '@/quote-management/lib/state';\n\nexport enum FilterMatchTypeEnum {\n  FULL = 'FULL',\n  PARTIAL = 'PARTIAL',\n}\n\nexport interface FilterEqualTypeInput {\n  eq?: string;\n  in?: string[];\n}\n\nexport interface FilterMatchTypeInput {\n  match?: string;\n  match_type?: FilterMatchTypeEnum;\n}\n\nexport interface NegotiableQuoteFilterInput {\n  ids?: FilterEqualTypeInput;\n  name?: FilterMatchTypeInput;\n}\n\nexport enum SortEnum {\n  ASC = 'ASC',\n  DESC = 'DESC',\n}\n\nexport enum NegotiableQuoteSortableField {\n  QUOTE_NAME = 'QUOTE_NAME',\n  CREATED_AT = 'CREATED_AT',\n  UPDATED_AT = 'UPDATED_AT',\n}\n\nexport interface NegotiableQuoteSortInput {\n  sort_direction: SortEnum;\n  sort_field: NegotiableQuoteSortableField;\n}\n\nexport interface NegotiableQuotesParams {\n  filter?: NegotiableQuoteFilterInput;\n  pageSize?: number;\n  currentPage?: number;\n  sort?: NegotiableQuoteSortInput;\n}\n\nexport const negotiableQuotes = async (\n  params: NegotiableQuotesParams = {}\n): Promise<NegotiableQuotesListModel> => {\n  if (!state.authenticated) {\n    return Promise.reject(new Error('Unauthorized'));\n  }\n\n  const variables = {\n    filter: params.filter || null,\n    pageSize: params.pageSize || 20,\n    currentPage: params.currentPage || 1,\n    sort: params.sort || null,\n  };\n\n  try {\n    const results: any = await fetchGraphQl(NEGOTIABLE_QUOTES_QUERY, {\n      variables,\n    });\n\n    if (!results?.data?.negotiableQuotes) {\n      throw new Error('No quotes data received');\n    }\n\n    const transformedData = transformNegotiableQuotesList(\n      results.data.negotiableQuotes\n    );\n\n    if (!transformedData) {\n      throw new Error('Failed to transform quotes data');\n    }\n\n    return transformedData;\n  } catch (error) {\n    return Promise.reject(error);\n  }\n};\n"],"names":["NEGOTIABLE_QUOTE_LIST_FRAGMENT","SEARCH_RESULT_PAGE_INFO_FRAGMENT","SORT_FIELDS_FRAGMENT","NEGOTIABLE_QUOTES_QUERY","FilterMatchTypeEnum","SortEnum","NegotiableQuoteSortableField","negotiableQuotes","params","state","variables","results","fetchGraphQl","_a","transformedData","transformNegotiableQuotesList","error"],"mappings":"mHASO,MAAMA,EAA+C;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA,ECA/CC,EAAiD;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA,ECAjDC,EAAqC;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA,ECIrCC,EAAwC;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA,IA0BjDH,CAA8B;AAAA,IAC9BC,CAAgC;AAAA,IAChCC,CAAoB;AAAA,EC1BjB,IAAKE,GAAAA,IACVA,EAAA,KAAO,OACPA,EAAA,QAAU,UAFAA,IAAAA,GAAA,CAAA,CAAA,EAoBAC,GAAAA,IACVA,EAAA,IAAM,MACNA,EAAA,KAAO,OAFGA,IAAAA,GAAA,CAAA,CAAA,EAKAC,GAAAA,IACVA,EAAA,WAAa,aACbA,EAAA,WAAa,aACbA,EAAA,WAAa,aAHHA,IAAAA,GAAA,CAAA,CAAA,EAkBL,MAAMC,EAAmB,MAC9BC,EAAiC,KACM,OACvC,GAAI,CAACC,EAAM,cACT,OAAO,QAAQ,OAAO,IAAI,MAAM,cAAc,CAAC,EAGjD,MAAMC,EAAY,CAChB,OAAQF,EAAO,QAAU,KACzB,SAAUA,EAAO,UAAY,GAC7B,YAAaA,EAAO,aAAe,EACnC,KAAMA,EAAO,MAAQ,IAAA,EAGvB,GAAI,CACF,MAAMG,EAAe,MAAMC,EAAaT,EAAyB,CAC/D,UAAAO,CAAA,CACD,EAED,GAAI,GAACG,EAAAF,GAAA,YAAAA,EAAS,OAAT,MAAAE,EAAe,kBAClB,MAAM,IAAI,MAAM,yBAAyB,EAG3C,MAAMC,EAAkBC,EACtBJ,EAAQ,KAAK,gBAAA,EAGf,GAAI,CAACG,EACH,MAAM,IAAI,MAAM,iCAAiC,EAGnD,OAAOA,CACT,OAASE,EAAO,CACd,OAAO,QAAQ,OAAOA,CAAK,CAC7B,CACF"}