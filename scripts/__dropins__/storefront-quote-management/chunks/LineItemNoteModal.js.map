{"version":3,"file":"LineItemNoteModal.js","sources":["/@dropins/storefront-quote-management/src/components/ItemsQuoted/ItemsQuoted.tsx","/@dropins/storefront-quote-management/src/components/ProductListTable/ProductListTable.tsx","/@dropins/storefront-quote-management/src/components/QuotePricesSummary/QuotePricesSummary.tsx","/@dropins/storefront-quote-management/src/components/LineItemNoteModal/LineItemNoteModal.tsx"],"sourcesContent":["/********************************************************************\n *  Copyright 2025 Adobe\n *  All Rights Reserved.\n *\n * NOTICE:  Adobe permits you to use, modify, and distribute this \n * file in accordance with the terms of the Adobe license agreement \n * accompanying it. \n *******************************************************************/\n\nimport { FunctionComponent, VNode } from 'preact';\nimport { HTMLAttributes } from 'preact/compat';\nimport { classes, VComponent } from '@adobe-commerce/elsie/lib';\nimport '@/quote-management/components/ItemsQuoted/ItemsQuoted.css';\nimport { Skeleton, SkeletonRow } from '@adobe-commerce/elsie/components';\n\nexport interface ItemsQuotedProps extends Omit<HTMLAttributes<HTMLDivElement>, 'loading'> {\n  loading?: boolean;\n  table?: VNode;\n  pricesSummary?: VNode;\n}\n\nexport const ItemsQuoted: FunctionComponent<ItemsQuotedProps> = ({\n  className,\n  loading,\n  table,\n  pricesSummary,\n  ...props\n}) => {\n  if (loading) {\n    return <ItemsQuotedSkeleton />;\n  }\n\n  return (\n    <div className={classes(['quote-management-items-quoted', className])} {...props}>\n      {table && (\n        <VComponent\n          node={table}\n          className={classes(['quote-management-items-quoted__table'])}\n          data-testid=\"quote-management-items-quoted__table\"\n        />\n      )}\n      {pricesSummary && (\n        <VComponent\n          node={pricesSummary}\n          className={classes(['quote-management-items-quoted__prices-summary'])}\n          data-testid=\"quote-management-items-quoted__prices-summary\"\n        />\n      )}\n    </div>\n  );\n};\n\nexport const ItemsQuotedSkeleton: FunctionComponent = () => {\n  return (\n    <Skeleton data-testid=\"items-quoted-skeleton\">\n      <SkeletonRow variant=\"row\" fullWidth={true} size=\"medium\" lines={4} multilineGap='xsmall' />\n    </Skeleton>\n  );\n};","/********************************************************************\n *  Copyright 2025 Adobe\n *  All Rights Reserved.\n *\n * NOTICE:  Adobe permits you to use, modify, and distribute this\n * file in accordance with the terms of the Adobe license agreement\n * accompanying it.\n *******************************************************************/\n\nimport { FunctionComponent, h } from 'preact';\nimport { HTMLAttributes } from 'preact/compat';\nimport { useState, useEffect } from 'preact/hooks';\nimport { classes, VComponent } from '@adobe-commerce/elsie/lib';\nimport {\n  Table,\n  Checkbox,\n  Picker,\n  Price,\n  Button,\n  Input,\n  InLineAlert,\n} from '@adobe-commerce/elsie/components';\nimport { useText } from '@adobe-commerce/elsie/i18n';\nimport { getUserTimezone } from '@/quote-management/utils/dateUtils';\nimport { CartItemModel } from '@/quote-management/data/models/negotiable-quote-model';\n\nimport '@/quote-management/components/ProductListTable/ProductListTable.css';\nimport { WarningFilled } from '@adobe-commerce/elsie/icons';\n\nexport interface ProductListTableProps\n  extends HTMLAttributes<HTMLDivElement | HTMLFormElement> {\n  items: CartItemModel[];\n  canEdit: boolean;\n  readOnly?: boolean;\n  showActions?: boolean;\n  onItemCheckboxChange?: (\n    item: CartItemModel,\n    isSelected: boolean\n  ) => void;\n  onItemDropdownChange?: (item: CartItemModel, action: string) => void;\n  onQuantityChange?: (item: CartItemModel, newQuantity: number) => void;\n  onUpdate?: (e: SubmitEvent) => void;\n  dropdownSelections?: Record<string, string | undefined>;\n}\n\nexport const ProductListTable: FunctionComponent<ProductListTableProps> = ({\n  className,\n  items,\n  canEdit,\n  readOnly = false,\n  showActions,\n  onItemCheckboxChange,\n  onItemDropdownChange,\n  onQuantityChange,\n  onUpdate,\n  dropdownSelections,\n  ...props\n}) => {\n  // Track original quantities to detect changes\n  const [originalQuantities, setOriginalQuantities] = useState<\n    Record<string, number>\n  >({});\n  const [currentQuantities, setCurrentQuantities] = useState<\n    Record<string, number>\n  >({});\n\n  // Initialize quantities when items change\n  useEffect(() => {\n    const quantities: Record<string, number> = {};\n    items.forEach((item) => {\n      quantities[item.uid] = item.quantity;\n    });\n    setOriginalQuantities(quantities);\n    setCurrentQuantities(quantities);\n  }, [items]);\n\n  // Check if any quantities have changed\n  const hasQuantityChanges = Object.keys(currentQuantities).some(\n    (uid) => currentQuantities[uid] !== originalQuantities[uid]\n  );\n\n  const dictionary = useText({\n    updateButton: 'NegotiableQuote.Manage.productListTable.submitButton',\n    productNameHeader:\n      'NegotiableQuote.Manage.productListTable.headers.productName',\n    skuHeader: 'NegotiableQuote.Manage.productListTable.headers.sku',\n    priceHeader: 'NegotiableQuote.Manage.productListTable.headers.price',\n    quantityHeader: 'NegotiableQuote.Manage.productListTable.headers.quantity',\n    discountHeader: 'NegotiableQuote.Manage.productListTable.headers.discount',\n    subtotalHeader: 'NegotiableQuote.Manage.productListTable.headers.subtotal',\n    actionsHeader: 'NegotiableQuote.Manage.productListTable.headers.actions',\n    editNoteToSeller:\n      'NegotiableQuote.Manage.productListTable.actions.editNoteToSeller',\n    remove: 'NegotiableQuote.Manage.productListTable.actions.remove',\n    notesHeader: 'NegotiableQuote.Manage.productListTable.notes.header',\n    leftANote: 'NegotiableQuote.Manage.productListTable.notes.leftANote',\n    buyer: 'NegotiableQuote.Manage.productListTable.notes.buyer',\n    seller: 'NegotiableQuote.Manage.productListTable.notes.seller',\n    outOfStock: 'NegotiableQuote.Manage.productListTable.outOfStock',\n    outOfStockMessage:\n      'NegotiableQuote.Manage.productListTable.outOfStockMessage',\n  });\n\n  const columns = [\n    {\n      label: dictionary.productNameHeader,\n      key: 'productName',\n    },\n    {\n      label: dictionary.skuHeader,\n      key: 'sku',\n    },\n    {\n      label: dictionary.priceHeader,\n      key: 'price',\n    },\n    {\n      label: dictionary.quantityHeader,\n      key: 'quantity',\n    },\n    {\n      label: dictionary.discountHeader,\n      key: 'discount',\n    },\n    {\n      label: dictionary.subtotalHeader,\n      key: 'subtotal',\n    },\n  ];\n\n  // Add checkbox column when canEdit (for bulk operations)\n  if (canEdit && !readOnly) {\n    columns.unshift({\n      label: '',\n      key: 'checkbox',\n    });\n  }\n\n  // Add actions column when showActions is explicitly true, or when canEdit is true and showActions is not explicitly false\n  const shouldShowActions = showActions ?? canEdit;\n  if (shouldShowActions && !readOnly) {\n    columns.push({\n      label: dictionary.actionsHeader,\n      key: 'actions',\n    });\n  }\n\n  const handleItemCheckboxChange = (\n    event: Event,\n    item: CartItemModel\n  ) => {\n    const isSelected = (event.target as HTMLInputElement).checked;\n    onItemCheckboxChange?.(item, isSelected);\n  };\n\n  const handleItemDropdownChange = (\n    event: Event,\n    item: CartItemModel\n  ) => {\n    const action = (event.target as HTMLSelectElement).value;\n    onItemDropdownChange?.(item, action);\n  };\n\n  const handleQuantityChange = (event: Event, item: CartItemModel) => {\n    const newQuantity = parseInt((event.target as HTMLInputElement).value, 10);\n    if (!isNaN(newQuantity) && newQuantity > 0) {\n      setCurrentQuantities((prev) => ({\n        ...prev,\n        [item.uid]: newQuantity,\n      }));\n      onQuantityChange?.(item, newQuantity);\n    }\n  };\n\n  const handleUpdate = (event: SubmitEvent) => {\n    event.preventDefault();\n    onUpdate?.(event);\n  };\n\n  const discountElement = (amountOff: number, percentOff: number) => {\n    return amountOff > 0 ? (\n      <div className=\"quote-management-product-list-table__discount-container\">\n        <span className=\"quote-management-product-list-table__discount-percent\">\n          {percentOff}%\n        </span>\n        <span className=\"quote-management-product-list-table__discount-price\">\n          (<Price amount={amountOff} />)\n        </span>\n      </div>\n    ) : undefined;\n  };\n\n  const getProductNameContent = (item: CartItemModel) => {\n    const configurableOptions = item.configurableOptions?.map((option) => (\n      <div\n        key={option.optionLabel}\n        className=\"quote-management-product-list-table__configurable-option\"\n      >\n        <span className=\"quote-management-product-list-table__configurable-option-label\">\n          {option.optionLabel}:\n        </span>\n        <span className=\"quote-management-product-list-table__configurable-option-value\">\n          {option.valueLabel}\n        </span>\n      </div>\n    ));\n\n    const bundleOptions = item.bundleOptions?.map((option) => (\n      <div\n        key={option.label}\n        className=\"quote-management-product-list-table__bundle-option\"\n      >\n        <span className=\"quote-management-product-list-table__bundle-option-label\">\n          {option.label}\n        </span>\n        <div className=\"quote-management-product-list-table__bundle-option-values\">\n          {option.values.map((value) => (\n            <span\n              key={value.label}\n              className=\"quote-management-product-list-table__bundle-option-value\"\n            >\n              <span className=\"quote-management-product-list-table__bundle-option-value-quantity\">\n                {value.quantity} x\n              </span>\n              <span className=\"quote-management-product-list-table__bundle-option-value-label\">\n                {value.label}\n              </span>\n              <Price\n                className=\"quote-management-product-list-table__bundle-option-value-original-price\"\n                amount={value.originalPrice.value}\n                currency={value.originalPrice.currency}\n                weight=\"normal\"\n              />\n            </span>\n          ))}\n        </div>\n      </div>\n    ));\n\n    return (\n      <div className=\"quote-management-product-list-table__product-name-container\">\n        <span className=\"quote-management-product-list-table__product-name\">\n          {item.product.name}\n        </span>\n        {configurableOptions}\n        {bundleOptions}\n      </div>\n    );\n  };\n\n  const formatNoteTimestamp = (timestamp: string) => {\n    const date = new Date(timestamp);\n    return date.toLocaleString('en-US', {\n      month: 'short',\n      day: 'numeric',\n      year: 'numeric',\n      hour: 'numeric',\n      minute: '2-digit',\n      second: '2-digit',\n      hour12: true,\n      timeZone: getUserTimezone(),\n    });\n  };\n\n  const getNotesContent = (item: CartItemModel) => {\n    const validNotesFromBuyer = item.noteFromBuyer?.filter(\n      (note) => note && note.note && note.note.trim() !== ''\n    ) || [];\n\n    const validNotesFromSeller = item.noteFromSeller?.filter(\n      (note) => note && note.note && note.note.trim() !== ''\n    ) || [];\n\n    const validNotes = [...validNotesFromBuyer, ...validNotesFromSeller];\n\n    if (validNotes.length === 0) {\n      return null;\n    }\n\n    return (\n      <div\n        className=\"quote-management-product-list-table__notes-container\"\n        data-testid={`item-notes-${item.product.sku}`}\n      >\n        <div className=\"quote-management-product-list-table__notes-header\">\n          {dictionary.notesHeader}\n        </div>\n        <div className=\"quote-management-product-list-table__notes-list\">\n          {validNotes.map((note, index) => (\n            <div\n              key={note.noteUid || index}\n              className=\"quote-management-product-list-table__note-item\"\n            >\n              <div className=\"quote-management-product-list-table__note-content\">\n                <strong className=\"quote-management-product-list-table__note-meta\">\n                  {/* TODO: When backend exposes creator_name for notes, replace (Buyer) with the actual name */}\n                  {formatNoteTimestamp(note.createdAt)} ({validNotesFromBuyer.includes(note) ? dictionary.buyer : dictionary.seller})\n                </strong>{' '}\n                {dictionary.leftANote}\n              </div>\n              <div className=\"quote-management-product-list-table__note-text\">\n                {note.note}{' '}\n              </div>\n            </div>\n          ))}\n        </div>\n      </div>\n    );\n  };\n\n  const expandedRows = new Set<number>();\n  const rowData = items.flatMap((item, index) => {\n    const notes = getNotesContent(item);\n    if (notes || item.outOfStock) {\n      expandedRows.add(index);\n    }\n\n    const quantityElement = canEdit ? (\n      <Input\n        className=\"quote-management-product-list-table__quantity-input\"\n        type=\"number\"\n        min=\"1\"\n        value={\n          currentQuantities[item.uid]?.toString() || item.quantity.toString()\n        }\n        onChange={(e) => handleQuantityChange(e, item)}\n        disabled={readOnly || !canEdit}\n        data-testid={`quantity-input-${item.product.sku}`}\n      />\n    ) : (\n      <span className=\"quote-management-product-list-table__quantity\">\n        {item.quantity}\n      </span>\n    );\n\n    const productRow = {\n      checkbox: (\n        <Checkbox\n          className=\"quote-management-product-list-table__checkbox\"\n          name=\"itemSelected\"\n          data-testid={`item-checkbox-${item.product.sku}`}\n          onChange={(e) => handleItemCheckboxChange(e, item)}\n          value={item.product.sku}\n        />\n      ),\n      productName: getProductNameContent(item),\n      sku: (\n        <span className=\"quote-management-product-list-table__sku\">\n          {item.product.sku}\n        </span>\n      ),\n      price: (\n        <Price\n          className=\"quote-management-product-list-table__price\"\n          amount={item.prices.originalItemPrice.value}\n          currency={item.prices.originalItemPrice.currency}\n        />\n      ),\n      quantity: quantityElement,\n      discount: item.catalogDiscount\n        ? discountElement(\n          item.catalogDiscount.amountOff,\n          item.catalogDiscount.percentOff\n        )\n        : undefined,\n      subtotal: (\n        <Price\n          className=\"quote-management-product-list-table__subtotal\"\n          amount={item.prices.rowTotal.value}\n          currency={item.prices.rowTotal.currency}\n        />\n      ),\n      actions: (\n        <Picker\n          className=\"quote-management-product-list-table__actions\"\n          data-testid={`item-dropdown-${item.product.sku}`}\n          name={`item-dropdown-${item.product.sku}`}\n          handleSelect={(e) => handleItemDropdownChange(e, item)}\n          placeholder=\"Select\"\n          value={dropdownSelections?.[item.uid] ?? ''}\n          options={[\n            { text: dictionary.editNoteToSeller, value: 'edit' },\n            { text: dictionary.remove, value: 'remove' },\n          ]}\n        />\n      ),\n      _rowDetails: <>\n        {/* If the item is out of stock, show a message */}\n        {item.outOfStock && (\n          <div className=\"quote-management-product-list-table__out-of-stock-message\">\n            <InLineAlert\n              type=\"warning\"\n              variant=\"primary\"\n              icon={<WarningFilled />}\n              heading={dictionary.outOfStock}\n              description={dictionary.outOfStockMessage}\n            />\n          </div>\n        )}\n        {/* If there are notes, create a notes details */}\n        {notes && (\n          <div className=\"quote-management-product-list-table__notes-row-wrapper\">\n            {notes}\n          </div>\n        )}\n      </>\n    };\n\n    return [productRow];\n  });\n\n  const table = (\n    <Table\n      columns={columns}\n      rowData={rowData}\n      data-testid=\"product-list-table\"\n      mobileLayout=\"stacked\"\n      expandedRows={expandedRows}\n    />\n  );\n\n  // if can edit, the wrapper node should use the form element, else use the div element\n  const wrapperNode = canEdit ? h('form', {}) : h('div', {});\n  const wrapperProps = canEdit\n    ? {\n      onSubmit: handleUpdate,\n      ...props,\n    }\n    : props;\n\n  const submitButton = (\n    <Button\n      type=\"submit\"\n      disabled={readOnly || !canEdit || !hasQuantityChanges}\n      data-testid=\"product-list-table-submit-button\"\n    >\n      {dictionary.updateButton}\n    </Button>\n  );\n\n  return (\n    <VComponent\n      node={wrapperNode}\n      className={classes([\n        'quote-management-product-list-table-container',\n        className,\n      ])}\n      data-testid=\"product-list-table-container\"\n      {...wrapperProps}\n    >\n      {table}\n      <div className=\"quote-management-product-list-table-container__submit-container\">\n        {submitButton}\n      </div>\n    </VComponent>\n  );\n};\n","/********************************************************************\n *  Copyright 2025 Adobe\n *  All Rights Reserved.\n *\n * NOTICE:  Adobe permits you to use, modify, and distribute this \n * file in accordance with the terms of the Adobe license agreement \n * accompanying it. \n *******************************************************************/\n  \nimport { FunctionComponent, VNode } from 'preact';\nimport { HTMLAttributes } from 'preact/compat';\nimport { classes } from '@adobe-commerce/elsie/lib';\nimport '@/quote-management/components/QuotePricesSummary/QuotePricesSummary.css';\nimport { Accordion, AccordionSection } from '@adobe-commerce/elsie/components';\n\ninterface Entry {\n  label: string;\n  id: string;\n  value: VNode;\n  strong?: boolean;\n  children?: Entry[];\n}\n\nexport interface QuotePricesSummaryProps extends HTMLAttributes<HTMLDivElement> {\n  entries?: Entry[];\n}\n\nexport const QuotePricesSummary: FunctionComponent<QuotePricesSummaryProps> = ({\n  className,\n  entries,\n  ...props\n}) => {\n  const createEntry = (entry: Entry) => {\n    const children = entry.children?.map(createEntry);\n    return (\n      <div key={entry.id} className=\"quote-management-quote-prices-summary__entry\" data-testid={`quote-prices-summary-entry-${entry.id}`}>\n        {children ? <Accordion\n          className=\"quote-management-quote-prices-summary__accordion\"\n          data-testid={`quote-prices-summary-entry-accordion-${entry.id}`}\n        >\n          <AccordionSection className=\"quote-management-quote-prices-summary__accordion-section\" title={entry.label} ariaLabelTitle={entry.label} secondaryText={entry.value}>\n            {children}\n          </AccordionSection>\n        </Accordion>\n        :\n        <>\n          <span className={classes(['quote-management-quote-prices-summary__label', ['quote-management-quote-prices-summary__label--strong', entry.strong]])} data-testid={`quote-prices-summary-entry-label-${entry.id}`}>{entry.label}</span>\n          <span className=\"quote-management-quote-prices-summary__value\" data-testid={`quote-prices-summary-entry-value-${entry.id}`}>{entry.value}</span>\n        </>\n        }\n      </div>\n    );\n  };\n\n  return (\n    <div className={classes(['quote-management-quote-prices-summary', className])} data-testid=\"quote-prices-summary\" {...props}>\n      {entries?.map(createEntry)}\n    </div>\n  );\n};\n","/********************************************************************\n *  Copyright 2025 Adobe\n *  All Rights Reserved.\n *\n * NOTICE:  Adobe permits you to use, modify, and distribute this\n * file in accordance with the terms of the Adobe license agreement\n * accompanying it.\n *******************************************************************/\n\nimport { FunctionComponent, VNode } from 'preact';\nimport {\n  HTMLAttributes,\n  useCallback,\n  useEffect,\n  useState,\n} from 'preact/compat';\nimport { classes } from '@adobe-commerce/elsie/lib';\nimport { useText } from '@adobe-commerce/elsie/i18n';\nimport {\n  Button,\n  TextArea,\n  Input,\n  Modal,\n  Price,\n  Table,\n} from '@adobe-commerce/elsie/components';\nimport { CartItemModel } from '@/quote-management/data/models/negotiable-quote-model';\nimport '@/quote-management/components/LineItemNoteModal/LineItemNoteModal.css';\n\nexport interface LineItemNoteModalProps\n  extends Omit<HTMLAttributes<HTMLDivElement>, 'title'> {\n  open: boolean;\n  item: CartItemModel;\n  onClose?: () => void;\n  onConfirm: (note: string, quantity: number) => void;\n  isSubmitting?: boolean;\n  errorBanner?: VNode;\n  successBanner?: VNode;\n  showCloseButton?: boolean;\n  readOnlyQuantity?: boolean;\n}\n\nexport const LineItemNoteModal: FunctionComponent<LineItemNoteModalProps> = ({\n  className,\n  open,\n  item,\n  onClose,\n  onConfirm,\n  isSubmitting = false,\n  errorBanner,\n  successBanner,\n  showCloseButton = true,\n  readOnlyQuantity = false,\n}) => {\n  const [note, setNote] = useState('');\n  const [quantity, setQuantity] = useState(item.quantity);\n  const [errors, setErrors] = useState<{ note?: string; quantity?: string }>(\n    {}\n  );\n\n  const dictionary = useText({\n    title: 'NegotiableQuote.Manage.lineItemNote.title',\n    productLabel: 'NegotiableQuote.Manage.lineItemNote.productLabel',\n    skuLabel: 'NegotiableQuote.Manage.lineItemNote.skuLabel',\n    priceLabel: 'NegotiableQuote.Manage.lineItemNote.priceLabel',\n    stockLabel: 'NegotiableQuote.Manage.lineItemNote.stockLabel',\n    quantityLabel: 'NegotiableQuote.Manage.lineItemNote.quantityLabel',\n    discountLabel: 'NegotiableQuote.Manage.lineItemNote.discountLabel',\n    subtotalLabel: 'NegotiableQuote.Manage.lineItemNote.subtotalLabel',\n    noteLabel: 'NegotiableQuote.Manage.lineItemNote.noteLabel',\n    notePlaceholder: 'NegotiableQuote.Manage.lineItemNote.notePlaceholder',\n    noteHelper: 'NegotiableQuote.Manage.lineItemNote.noteHelper',\n    confirmButton: 'NegotiableQuote.Manage.lineItemNote.confirmButton',\n    cancelButton: 'NegotiableQuote.Manage.lineItemNote.cancelButton',\n    noteError: 'NegotiableQuote.Manage.lineItemNote.noteError',\n    quantityError: 'NegotiableQuote.Manage.lineItemNote.quantityError',\n  });\n\n  // Reset form when modal opens with new item\n  useEffect(() => {\n    if (open) {\n      // Get the most recent valid note from buyer (if exists)\n      const validNotes =\n        item.noteFromBuyer?.filter((note) => note && note.note) || [];\n      const existingNote = validNotes.length > 0 ? validNotes[0].note : '';\n      setNote(existingNote || '');\n      setQuantity(item.quantity);\n      setErrors({});\n    }\n  }, [open, item.quantity, item.noteFromBuyer]);\n\n  const handleConfirm = useCallback(() => {\n    const newErrors: { note?: string; quantity?: string } = {};\n\n    // Check if the note field is empty\n    if (!note.trim()) {\n      newErrors.note = dictionary.noteError;\n    }\n\n    // Only validate quantity if it's editable\n    if (!readOnlyQuantity && quantity <= 0) {\n      newErrors.quantity = dictionary.quantityError;\n    }\n\n    if (Object.keys(newErrors).length > 0) {\n      setErrors(newErrors);\n      return;\n    }\n\n    onConfirm(note.trim(), quantity);\n  }, [note, quantity, onConfirm, dictionary, readOnlyQuantity]);\n\n  const handleCancel = useCallback(() => {\n    setNote('');\n    setQuantity(item.quantity);\n    setErrors({});\n    onClose?.();\n  }, [onClose, item.quantity]);\n\n  if (!open) {\n    return null;\n  }\n\n  // Calculate discount display\n  const hasDiscount = item.discounts && item.discounts.length > 0;\n  const discountDisplay = hasDiscount\n    ? item.discounts.map((d) => d.label).join(', ')\n    : '-';\n\n  // Define table columns\n  const columns = [\n    {\n      label: dictionary.productLabel,\n      key: 'productName',\n    },\n    {\n      label: dictionary.priceLabel,\n      key: 'price',\n    },\n    {\n      label: dictionary.stockLabel,\n      key: 'stock',\n    },\n    {\n      label: dictionary.quantityLabel,\n      key: 'quantity',\n    },\n    {\n      label: dictionary.discountLabel,\n      key: 'discount',\n    },\n    {\n      label: dictionary.subtotalLabel,\n      key: 'subtotal',\n    },\n  ];\n\n  // Define table row data\n  const rowData = [\n    {\n      productName: (\n        <div className=\"quote-management-line-item-note-modal__product-info\">\n          <div className=\"quote-management-line-item-note-modal__product-name\">\n            {item.product.name}\n          </div>\n          <div className=\"quote-management-line-item-note-modal__product-sku\">\n            {dictionary.skuLabel}: {item.product.sku}\n          </div>\n        </div>\n      ),\n      price: (\n        <Price\n          amount={item.prices.originalItemPrice.value}\n          currency={item.prices.originalItemPrice.currency}\n        />\n      ),\n      stock: (\n        <span className=\"quote-management-line-item-note-modal__stock\">\n          {item.stockStatus}\n        </span>\n      ),\n      quantity: readOnlyQuantity ? (\n        <span className=\"quote-management-line-item-note-modal__quantity-readonly\">\n          {item.quantity}\n        </span>\n      ) : (\n        <Input\n          name=\"quantity\"\n          type=\"number\"\n          min=\"1\"\n          value={quantity.toString()}\n          onInput={(e: any) => {\n            const newQuantity = parseInt(e.target.value, 10) || 0;\n            setQuantity(newQuantity);\n            setErrors({ ...errors, quantity: undefined });\n          }}\n          disabled={isSubmitting}\n          error={!!errors.quantity}\n          required\n          data-testid=\"line-item-note-quantity-input\"\n          className=\"quote-management-line-item-note-modal__quantity-input\"\n        />\n      ),\n      discount: (\n        <span className=\"quote-management-line-item-note-modal__discount\">\n          {discountDisplay}\n        </span>\n      ),\n      subtotal: (\n        <Price\n          amount={item.prices.rowTotal.value}\n          currency={item.prices.rowTotal.currency}\n        />\n      ),\n    },\n  ];\n\n  return (\n    <Modal\n      open={open}\n      size=\"medium\"\n      title={<>{dictionary.title}</>}\n      onClose={handleCancel}\n      clickToDismiss={true}\n      escapeToDismiss={true}\n      showCloseButton={showCloseButton}\n      className={classes(['quote-management-line-item-note-modal', className])}\n      data-testid=\"line-item-note-modal\"\n    >\n      {errorBanner && (\n        <div\n          className=\"quote-management-line-item-note-modal__error-banner\"\n          data-testid=\"line-item-note-modal-error-banner\"\n        >\n          {errorBanner}\n        </div>\n      )}\n\n      {successBanner && (\n        <div\n          className=\"quote-management-line-item-note-modal__success-banner\"\n          data-testid=\"line-item-note-modal-success-banner\"\n        >\n          {successBanner}\n        </div>\n      )}\n\n      <div className=\"quote-management-line-item-note-modal__content\">\n        {/* Product Details Table */}\n        <div className=\"quote-management-line-item-note-modal__details\">\n          <Table\n            columns={columns}\n            rowData={rowData}\n            data-testid=\"line-item-note-table\"\n            mobileLayout=\"stacked\"\n            className=\"quote-management-line-item-note-modal__details-table\"\n          />\n          {errors.quantity && (\n            <div className=\"quote-management-line-item-note-modal__table-error\">\n              {errors.quantity}\n            </div>\n          )}\n        </div>\n\n        {/* Note TextArea */}\n        <div className=\"quote-management-line-item-note-modal__form-field\">\n          <TextArea\n            name=\"note\"\n            placeholder={dictionary.notePlaceholder}\n            rows={4}\n            value={note}\n            onInput={(e: any) => {\n              setNote(e.target.value);\n              setErrors({ ...errors, note: undefined });\n            }}\n            label={dictionary.noteLabel}\n            disabled={isSubmitting}\n            data-testid=\"line-item-note-textarea\"\n          />\n          {!errors.note && (\n            <span className=\"quote-management-line-item-note-modal__helper-text\">\n              {dictionary.noteHelper}\n            </span>\n          )}\n          {errors.note && (\n            <span className=\"quote-management-line-item-note-modal__error-text\">\n              {errors.note}\n            </span>\n          )}\n        </div>\n      </div>\n\n      <div className=\"quote-management-line-item-note-modal__actions\">\n        <Button\n          variant=\"secondary\"\n          size=\"medium\"\n          onClick={handleCancel}\n          disabled={isSubmitting}\n          className=\"quote-management-line-item-note-modal__cancel-button\"\n          data-testid=\"line-item-note-cancel-button\"\n        >\n          {dictionary.cancelButton}\n        </Button>\n        <Button\n          variant=\"primary\"\n          size=\"medium\"\n          onClick={handleConfirm}\n          disabled={isSubmitting}\n          className=\"quote-management-line-item-note-modal__confirm-button\"\n          data-testid=\"line-item-note-confirm-button\"\n        >\n          {dictionary.confirmButton}\n        </Button>\n      </div>\n    </Modal>\n  );\n};\n"],"names":["ItemsQuoted","className","loading","table","pricesSummary","props","ItemsQuotedSkeleton","jsxs","classes","jsx","VComponent","Skeleton","SkeletonRow","ProductListTable","items","canEdit","readOnly","showActions","onItemCheckboxChange","onItemDropdownChange","onQuantityChange","onUpdate","dropdownSelections","originalQuantities","setOriginalQuantities","useState","currentQuantities","setCurrentQuantities","useEffect","quantities","item","hasQuantityChanges","uid","dictionary","useText","columns","handleItemCheckboxChange","event","isSelected","handleItemDropdownChange","action","handleQuantityChange","newQuantity","prev","handleUpdate","discountElement","amountOff","percentOff","Price","getProductNameContent","configurableOptions","_a","option","bundleOptions","_b","value","formatNoteTimestamp","timestamp","getUserTimezone","getNotesContent","validNotesFromBuyer","note","validNotesFromSeller","validNotes","index","expandedRows","rowData","notes","quantityElement","Input","e","Checkbox","Picker","Fragment","InLineAlert","WarningFilled","Table","wrapperNode","h","wrapperProps","submitButton","Button","QuotePricesSummary","entries","createEntry","entry","children","Accordion","AccordionSection","LineItemNoteModal","open","onClose","onConfirm","isSubmitting","errorBanner","successBanner","showCloseButton","readOnlyQuantity","setNote","quantity","setQuantity","errors","setErrors","existingNote","handleConfirm","useCallback","newErrors","handleCancel","discountDisplay","d","Modal","TextArea"],"mappings":"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"}