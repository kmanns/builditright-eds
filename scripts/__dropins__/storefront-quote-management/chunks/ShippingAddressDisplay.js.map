{"version":3,"file":"ShippingAddressDisplay.js","sources":["/@dropins/storefront-quote-management/src/components/ShippingAddressDisplay/ShippingAddressDisplay.tsx","/@dropins/storefront-quote-management/src/containers/ShippingAddressDisplay/ShippingAddressDisplay.tsx"],"sourcesContent":["/********************************************************************\n *  Copyright 2025 Adobe\n *  All Rights Reserved.\n *\n * NOTICE:  Adobe permits you to use, modify, and distribute this \n * file in accordance with the terms of the Adobe license agreement \n * accompanying it. \n *******************************************************************/\n\nimport { FunctionComponent } from 'preact';\nimport { HTMLAttributes } from 'preact/compat';\nimport { classes } from '@adobe-commerce/elsie/lib';\nimport { useText } from '@adobe-commerce/elsie/i18n';\nimport { InLineAlert, Skeleton, SkeletonRow } from '@adobe-commerce/elsie/components';\nimport { ShippingAddress } from '@/quote-management/data/models/negotiable-quote-model';\nimport '@/quote-management/components/ShippingAddressDisplay/ShippingAddressDisplay.css';\nimport { WarningFilled } from '@adobe-commerce/elsie/icons';\n\nexport interface ShippingAddressDisplayProps extends Omit<HTMLAttributes<HTMLDivElement>, 'loading'> {\n  shippingAddress?: ShippingAddress;\n  loading?: boolean;\n  noAddressMessage?: string;\n}\n\nexport const ShippingAddressDisplay: FunctionComponent<ShippingAddressDisplayProps> = ({\n  className,\n  shippingAddress,\n  loading,\n  noAddressMessage,\n  ...props\n}) => {\n  const dictionary = useText({\n    noAddressHeading: 'NegotiableQuote.Manage.shippingAddress.noAddressHeading',\n    noAddressDescription: 'NegotiableQuote.Manage.shippingAddress.noAddressDescription',\n  });\n\n  if (loading) {\n    return <ShippingAddressDisplaySkeleton />;\n  }\n\n  if (!shippingAddress) {\n    return (\n      <div \n        className={classes(['quote-management-shipping-address-display', 'quote-management-shipping-address-display--empty', className])}\n        data-testid=\"shipping-address-display-empty\"\n        {...props}\n      >\n        <InLineAlert\n          type=\"warning\"\n          variant=\"primary\"\n          data-testid=\"shipping-address-display-empty-alert\"\n          icon={<WarningFilled />}\n          heading={dictionary.noAddressHeading}\n          description={noAddressMessage || dictionary.noAddressDescription}\n        />\n      </div>\n    );\n  }\n\n  return (\n    <div \n      className={classes(['quote-management-shipping-address-display', className])}\n      data-testid=\"shipping-address-display\"\n      {...props}\n    >\n      <div className=\"quote-management-shipping-address-display__field\" data-testid=\"address-name\">\n        <span className=\"quote-management-shipping-address-display__name\">\n          {shippingAddress.firstname} {shippingAddress.lastname}\n        </span>\n      </div>\n      \n      {shippingAddress.company && (\n        <div className=\"quote-management-shipping-address-display__field\" data-testid=\"address-company\">\n          {shippingAddress.company}\n        </div>\n      )}\n      \n      {shippingAddress.street.map((line, index) => (\n        <div \n          key={index} \n          className=\"quote-management-shipping-address-display__field\" \n          data-testid={`address-street-${index}`}\n        >\n          {line}\n        </div>\n      ))}\n      \n      <div className=\"quote-management-shipping-address-display__field\" data-testid=\"address-city-region\">\n        {shippingAddress.city}\n        {shippingAddress.region && `, ${shippingAddress.region.label}`}\n        {' '}\n        {shippingAddress.postcode}\n      </div>\n      \n      <div className=\"quote-management-shipping-address-display__field\" data-testid=\"address-country\">\n        {shippingAddress.country.label}\n      </div>\n      \n      <div className=\"quote-management-shipping-address-display__field\" data-testid=\"address-telephone\">\n        {shippingAddress.telephone}\n      </div>\n    </div>\n  );\n};\n\nexport const ShippingAddressDisplaySkeleton: FunctionComponent = () => {\n  return (\n    <Skeleton data-testid=\"shipping-address-display-skeleton\">\n      <SkeletonRow variant=\"row\" fullWidth={true} size=\"small\" lines={5} multilineGap='xsmall' />\n    </Skeleton>\n  );\n};\n\n","/********************************************************************\n *  Copyright 2025 Adobe\n *  All Rights Reserved.\n *\n * NOTICE:  Adobe permits you to use, modify, and distribute this \n * file in accordance with the terms of the Adobe license agreement \n * accompanying it. \n *******************************************************************/\n\nimport { HTMLAttributes, useEffect, useState } from 'preact/compat';\nimport { Container } from '@adobe-commerce/elsie/lib';\nimport { ShippingAddress } from '@/quote-management/data/models/negotiable-quote-model';\nimport { NegotiableQuoteTemplateModel } from '@/quote-management/data/models/negotiable-quote-template-model';\nimport { ShippingAddressDisplay as ShippingAddressDisplayComponent } from '@/quote-management/components/ShippingAddressDisplay';\nimport { events } from '@adobe-commerce/event-bus';\n\nexport interface ShippingAddressDisplayProps extends Omit<HTMLAttributes<HTMLDivElement>, 'loading'> {\n  shippingAddress?: ShippingAddress;\n  loading?: boolean;\n}\n\nexport const ShippingAddressDisplay: Container<ShippingAddressDisplayProps> = ({\n  shippingAddress: initialShippingAddress,\n  loading,\n  ...props\n}) => {\n  const [shippingAddress, setShippingAddress] = useState<ShippingAddress | undefined>(initialShippingAddress);\n\n  // Sync prop changes to internal state\n  useEffect(() => {\n    if (initialShippingAddress !== undefined) {\n      setShippingAddress(initialShippingAddress);\n    }\n  }, [initialShippingAddress]);\n\n  // Listen for quote-data events\n  useEffect(() => {\n    const quoteDataEvent = events.on('quote-management/quote-data', (data: { quote?: { shippingAddresses?: ShippingAddress[] } | null }) => {\n      const address = data.quote?.shippingAddresses?.[0];\n      setShippingAddress(address);\n    }, {\n      eager: true,\n    });\n    return () => quoteDataEvent?.off();\n  }, []);\n\n  // Listen for shipping-address-set events\n  useEffect(() => {\n    const shippingAddressSetEvent = events.on('quote-management/shipping-address-set', (data: { quote?: { shippingAddresses?: ShippingAddress[] } | null }) => {\n      const address = data.quote?.shippingAddresses?.[0];\n      setShippingAddress(address);\n    }, {\n      eager: true,\n    });\n    return () => shippingAddressSetEvent?.off();\n  }, []);\n\n  // Listen for quote-template-data events\n  useEffect(() => {\n    const quoteTemplateDataEvent = events.on('quote-management/quote-template-data', (data: { quoteTemplate?: NegotiableQuoteTemplateModel | null }) => {\n      const address = data.quoteTemplate?.shippingAddresses?.[0];\n      setShippingAddress(address);\n    }, {\n      eager: true,\n    });\n    return () => quoteTemplateDataEvent?.off();\n  }, []);\n\n  return (\n    <ShippingAddressDisplayComponent\n      shippingAddress={shippingAddress}\n      loading={loading}\n      {...props}\n    />\n  );\n};\n\n"],"names":["ShippingAddressDisplay","className","shippingAddress","loading","noAddressMessage","props","dictionary","useText","ShippingAddressDisplaySkeleton","jsxs","classes","jsx","line","index","InLineAlert","WarningFilled","Skeleton","SkeletonRow","initialShippingAddress","setShippingAddress","useState","useEffect","quoteDataEvent","events","data","address","_b","_a","shippingAddressSetEvent","quoteTemplateDataEvent","ShippingAddressDisplayComponent"],"mappings":"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"}