{"version":3,"file":"generateQuoteFromTemplate.js","sources":["/@dropins/storefront-quote-management/src/api/generateQuoteFromTemplate/graphql/generateNegotiableQuoteFromTemplate.ts","/@dropins/storefront-quote-management/src/api/generateQuoteFromTemplate/generateQuoteFromTemplate.ts"],"sourcesContent":["/********************************************************************\n *  Copyright 2025 Adobe\n *  All Rights Reserved.\n *\n * NOTICE:  Adobe permits you to use, modify, and distribute this\n * file in accordance with the terms of the Adobe license agreement\n * accompanying it.\n *******************************************************************/\n\nexport const GENERATE_NEGOTIABLE_QUOTE_FROM_TEMPLATE_MUTATION = /* GraphQL */ `\n  mutation GENERATE_NEGOTIABLE_QUOTE_FROM_TEMPLATE_MUTATION(\n    $input: GenerateNegotiableQuoteFromTemplateInput!\n  ) {\n    generateNegotiableQuoteFromTemplate(input: $input) {\n      negotiable_quote_uid\n    }\n  }\n`;\n","/********************************************************************\n *  Copyright 2025 Adobe\n *  All Rights Reserved.\n *\n * NOTICE:  Adobe permits you to use, modify, and distribute this\n * file in accordance with the terms of the Adobe license agreement\n * accompanying it.\n *******************************************************************/\n\nimport { fetchGraphQl } from '@/quote-management/api';\nimport { GENERATE_NEGOTIABLE_QUOTE_FROM_TEMPLATE_MUTATION } from './graphql/generateNegotiableQuoteFromTemplate';\nimport { state } from '@/quote-management/lib/state';\nimport { events } from '@adobe-commerce/event-bus';\n\nexport interface GenerateQuoteFromTemplateParams {\n  templateId: string;\n}\n\nexport const generateQuoteFromTemplate = async (\n  params: GenerateQuoteFromTemplateParams\n) => {\n  if (!params.templateId) {\n    throw new Error('Template ID is required');\n  }\n\n  if (!state.authenticated) {\n    throw new Error('Unauthorized');\n  }\n\n  try {\n    const results: any = await fetchGraphQl(\n      GENERATE_NEGOTIABLE_QUOTE_FROM_TEMPLATE_MUTATION,\n      {\n        variables: {\n          input: {\n            template_id: params.templateId,\n          },\n        },\n      }\n    );\n\n    if (\n      !results?.data?.generateNegotiableQuoteFromTemplate?.negotiable_quote_uid\n    ) {\n      throw new Error('No quote UID received');\n    }\n\n    const quoteId =\n      results.data.generateNegotiableQuoteFromTemplate.negotiable_quote_uid;\n\n    events.emit('quote-management/quote-template-generated', {\n      quoteId,\n    });\n\n    return { quoteId };\n  } catch (error) {\n    return Promise.reject(error);\n  }\n};\n"],"names":["GENERATE_NEGOTIABLE_QUOTE_FROM_TEMPLATE_MUTATION","generateQuoteFromTemplate","params","state","results","fetchGraphQl","_b","_a","quoteId","events","error"],"mappings":"6HASO,MAAMA,EAAiE;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA,ECSjEC,EAA4B,MACvCC,GACG,SACH,GAAI,CAACA,EAAO,WACV,MAAM,IAAI,MAAM,yBAAyB,EAG3C,GAAI,CAACC,EAAM,cACT,MAAM,IAAI,MAAM,cAAc,EAGhC,GAAI,CACF,MAAMC,EAAe,MAAMC,EACzBL,EACA,CACE,UAAW,CACT,MAAO,CACL,YAAaE,EAAO,UAAA,CACtB,CACF,CACF,EAGF,GACE,GAACI,GAAAC,EAAAH,GAAA,YAAAA,EAAS,OAAT,YAAAG,EAAe,sCAAf,MAAAD,EAAoD,sBAErD,MAAM,IAAI,MAAM,uBAAuB,EAGzC,MAAME,EACJJ,EAAQ,KAAK,oCAAoC,qBAEnD,OAAAK,EAAO,KAAK,4CAA6C,CACvD,QAAAD,CAAA,CACD,EAEM,CAAE,QAAAA,CAAA,CACX,OAASE,EAAO,CACd,OAAO,QAAQ,OAAOA,CAAK,CAC7B,CACF"}