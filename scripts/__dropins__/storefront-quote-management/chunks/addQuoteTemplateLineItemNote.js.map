{"version":3,"file":"addQuoteTemplateLineItemNote.js","sources":["/@dropins/storefront-quote-management/src/api/updateQuoteTemplateItemQuantities/graphql/updateNegotiableQuoteTemplateQuantities.ts","/@dropins/storefront-quote-management/src/api/updateQuoteTemplateItemQuantities/updateQuoteTemplateItemQuantities.ts","/@dropins/storefront-quote-management/src/api/removeQuoteTemplateItems/graphql/removeNegotiableQuoteTemplateItems.ts","/@dropins/storefront-quote-management/src/api/removeQuoteTemplateItems/removeQuoteTemplateItems.ts","/@dropins/storefront-quote-management/src/api/addQuoteTemplateLineItemNote/graphql/setQuoteTemplateLineItemNote.ts","/@dropins/storefront-quote-management/src/api/addQuoteTemplateLineItemNote/addQuoteTemplateLineItemNote.ts"],"sourcesContent":["/********************************************************************\n *  Copyright 2025 Adobe\n *  All Rights Reserved.\n *\n * NOTICE:  Adobe permits you to use, modify, and distribute this\n * file in accordance with the terms of the Adobe license agreement\n * accompanying it.\n *******************************************************************/\n\nimport { NEGOTIABLE_QUOTE_TEMPLATE_FRAGMENT } from '@/quote-management/api/graphql/NegotiableQuoteTemplateFragment';\n\nexport const UPDATE_NEGOTIABLE_QUOTE_TEMPLATE_QUANTITIES_MUTATION = /* GraphQL */ `\n  mutation UPDATE_NEGOTIABLE_QUOTE_TEMPLATE_QUANTITIES_MUTATION(\n    $input: UpdateNegotiableQuoteTemplateQuantitiesInput!\n  ) {\n    updateNegotiableQuoteTemplateQuantities(input: $input) {\n      quote_template {\n        ...NegotiableQuoteTemplateFragment\n      }\n    }\n  }\n  ${NEGOTIABLE_QUOTE_TEMPLATE_FRAGMENT}\n`;\n\n","/********************************************************************\n *  Copyright 2025 Adobe\n *  All Rights Reserved.\n *\n * NOTICE:  Adobe permits you to use, modify, and distribute this\n * file in accordance with the terms of the Adobe license agreement\n * accompanying it.\n *******************************************************************/\n\nimport { fetchGraphQl } from '@/quote-management/api';\nimport { UPDATE_NEGOTIABLE_QUOTE_TEMPLATE_QUANTITIES_MUTATION } from './graphql/updateNegotiableQuoteTemplateQuantities';\nimport { transformQuoteTemplate } from '@/quote-management/data/transforms';\nimport { state } from '@/quote-management/lib/state';\nimport { events } from '@adobe-commerce/event-bus';\n\nexport interface NegotiableQuoteTemplateItemQuantityInput {\n  itemId: string;\n  quantity: number;\n  minQty?: number;\n  maxQty?: number;\n}\n\nexport interface UpdateQuoteTemplateItemQuantitiesParams {\n  templateId: string;\n  items: NegotiableQuoteTemplateItemQuantityInput[];\n}\n\nexport const updateQuoteTemplateItemQuantities = async (\n  params: UpdateQuoteTemplateItemQuantitiesParams\n) => {\n  if (!params.templateId) {\n    throw new Error('Template ID is required');\n  }\n\n  if (!params.items || params.items.length === 0) {\n    throw new Error('Items array is required and must not be empty');\n  }\n\n  if (!state.authenticated) {\n    throw new Error('Unauthorized');\n  }\n\n  try {\n    const results: any = await fetchGraphQl(\n      UPDATE_NEGOTIABLE_QUOTE_TEMPLATE_QUANTITIES_MUTATION,\n      {\n        variables: {\n          input: {\n            template_id: params.templateId,\n            items: params.items.map((item) => ({\n              item_id: item.itemId,\n              quantity: item.quantity,\n              min_qty: item.minQty,\n              max_qty: item.maxQty,\n            })),\n          },\n        },\n      }\n    );\n\n    if (\n      !results?.data?.updateNegotiableQuoteTemplateQuantities?.quote_template\n    ) {\n      throw new Error('No quote template data received');\n    }\n\n    const transformedData = transformQuoteTemplate(\n      results.data.updateNegotiableQuoteTemplateQuantities.quote_template\n    );\n\n    if (!transformedData) {\n      throw new Error('Failed to transform quote template data');\n    }\n\n    events.emit('quote-management/quote-template-data', {\n      quoteTemplate: transformedData,\n      permissions: state.permissions,\n    });\n\n    return transformedData;\n  } catch (error) {\n    return Promise.reject(error);\n  }\n};\n","/********************************************************************\n *  Copyright 2025 Adobe\n *  All Rights Reserved.\n *\n * NOTICE:  Adobe permits you to use, modify, and distribute this\n * file in accordance with the terms of the Adobe license agreement\n * accompanying it.\n *******************************************************************/\n\nimport { NEGOTIABLE_QUOTE_TEMPLATE_FRAGMENT } from '@/quote-management/api/graphql/NegotiableQuoteTemplateFragment';\n\nexport const REMOVE_NEGOTIABLE_QUOTE_TEMPLATE_ITEMS_MUTATION = /* GraphQL */ `\n  mutation REMOVE_NEGOTIABLE_QUOTE_TEMPLATE_ITEMS_MUTATION(\n    $input: RemoveNegotiableQuoteTemplateItemsInput!\n  ) {\n    removeNegotiableQuoteTemplateItems(input: $input) {\n      ...NegotiableQuoteTemplateFragment\n    }\n  }\n  ${NEGOTIABLE_QUOTE_TEMPLATE_FRAGMENT}\n`;\n\n","/********************************************************************\n *  Copyright 2025 Adobe\n *  All Rights Reserved.\n *\n * NOTICE:  Adobe permits you to use, modify, and distribute this\n * file in accordance with the terms of the Adobe license agreement\n * accompanying it.\n *******************************************************************/\n\nimport { fetchGraphQl } from '@/quote-management/api';\nimport { REMOVE_NEGOTIABLE_QUOTE_TEMPLATE_ITEMS_MUTATION } from './graphql/removeNegotiableQuoteTemplateItems';\nimport { transformQuoteTemplate } from '@/quote-management/data/transforms';\nimport { state } from '@/quote-management/lib/state';\nimport { events } from '@adobe-commerce/event-bus';\n\nexport interface RemoveQuoteTemplateItemsParams {\n  templateId: string;\n  itemUids: string[];\n}\n\nexport const removeQuoteTemplateItems = async (\n  params: RemoveQuoteTemplateItemsParams\n) => {\n  if (!params.templateId) {\n    throw new Error('Template ID is required');\n  }\n\n  if (!params.itemUids || params.itemUids.length === 0) {\n    throw new Error('Item UIDs array is required and must not be empty');\n  }\n\n  if (!state.authenticated) {\n    throw new Error('Unauthorized');\n  }\n\n  try {\n    const results: any = await fetchGraphQl(\n      REMOVE_NEGOTIABLE_QUOTE_TEMPLATE_ITEMS_MUTATION,\n      {\n        variables: {\n          input: {\n            template_id: params.templateId,\n            item_uids: params.itemUids,\n          },\n        },\n      }\n    );\n\n    if (!results?.data?.removeNegotiableQuoteTemplateItems) {\n      throw new Error('No quote template data received');\n    }\n\n    const transformedData = transformQuoteTemplate(\n      results.data.removeNegotiableQuoteTemplateItems\n    );\n\n    if (!transformedData) {\n      throw new Error('Failed to transform quote template data');\n    }\n\n    events.emit('quote-management/quote-template-data', {\n      quoteTemplate: transformedData,\n      permissions: state.permissions,\n    });\n\n    return transformedData;\n  } catch (error) {\n    return Promise.reject(error);\n  }\n};\n","/********************************************************************\n *  Copyright 2025 Adobe\n *  All Rights Reserved.\n *\n * NOTICE:  Adobe permits you to use, modify, and distribute this\n * file in accordance with the terms of the Adobe license agreement\n * accompanying it.\n *******************************************************************/\n\nimport { NEGOTIABLE_QUOTE_TEMPLATE_FRAGMENT } from '@/quote-management/api/graphql/NegotiableQuoteTemplateFragment';\n\nexport const SET_QUOTE_TEMPLATE_LINE_ITEM_NOTE_MUTATION = /* GraphQL */ `\n  mutation SET_QUOTE_TEMPLATE_LINE_ITEM_NOTE_MUTATION(\n    $input: QuoteTemplateLineItemNoteInput!\n  ) {\n    setQuoteTemplateLineItemNote(input: $input) {\n      ...NegotiableQuoteTemplateFragment\n    }\n  }\n  ${NEGOTIABLE_QUOTE_TEMPLATE_FRAGMENT}\n`;\n\n","/********************************************************************\n *  Copyright 2025 Adobe\n *  All Rights Reserved.\n *\n * NOTICE:  Adobe permits you to use, modify, and distribute this\n * file in accordance with the terms of the Adobe license agreement\n * accompanying it.\n *******************************************************************/\n\nimport { fetchGraphQl } from '@/quote-management/api';\nimport { SET_QUOTE_TEMPLATE_LINE_ITEM_NOTE_MUTATION } from './graphql/setQuoteTemplateLineItemNote';\nimport { transformQuoteTemplate } from '@/quote-management/data/transforms';\nimport { state } from '@/quote-management/lib/state';\nimport { events } from '@adobe-commerce/event-bus';\n\nexport interface AddQuoteTemplateLineItemNoteParams {\n  templateId: string;\n  itemId: string;\n  note?: string;\n}\n\nexport const addQuoteTemplateLineItemNote = async (\n  params: AddQuoteTemplateLineItemNoteParams\n) => {\n  if (!params.templateId) {\n    throw new Error('Template ID is required');\n  }\n\n  if (!params.itemId) {\n    throw new Error('Item ID is required');\n  }\n\n  if (!state.authenticated) {\n    throw new Error('Unauthorized');\n  }\n\n  try {\n    const results: any = await fetchGraphQl(\n      SET_QUOTE_TEMPLATE_LINE_ITEM_NOTE_MUTATION,\n      {\n        variables: {\n          input: {\n            templateId: params.templateId,\n            item_uid: params.itemId,\n            note: params.note,\n          },\n        },\n      }\n    );\n\n    if (!results?.data?.setQuoteTemplateLineItemNote) {\n      throw new Error('No quote template data received');\n    }\n\n    const transformedData = transformQuoteTemplate(\n      results.data.setQuoteTemplateLineItemNote\n    );\n\n    if (!transformedData) {\n      throw new Error('Failed to transform quote template data');\n    }\n\n    events.emit('quote-management/quote-template-data', {\n      quoteTemplate: transformedData,\n      permissions: state.permissions,\n    });\n\n    return transformedData;\n  } catch (error) {\n    return Promise.reject(error);\n  }\n};\n"],"names":["UPDATE_NEGOTIABLE_QUOTE_TEMPLATE_QUANTITIES_MUTATION","NEGOTIABLE_QUOTE_TEMPLATE_FRAGMENT","updateQuoteTemplateItemQuantities","params","state","results","fetchGraphQl","item","_b","_a","transformedData","transformQuoteTemplate","events","error","REMOVE_NEGOTIABLE_QUOTE_TEMPLATE_ITEMS_MUTATION","removeQuoteTemplateItems","SET_QUOTE_TEMPLATE_LINE_ITEM_NOTE_MUTATION","addQuoteTemplateLineItemNote"],"mappings":"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"}