{"version":3,"file":"QuotesListTable.js","sources":["/@dropins/storefront-quote-management/src/components/QuotesListTable/QuotesListTable.tsx","/@dropins/storefront-quote-management/src/containers/QuotesListTable/QuotesListTable.tsx"],"sourcesContent":["/********************************************************************\n *  Copyright 2025 Adobe\n *  All Rights Reserved.\n *\n * NOTICE:  Adobe permits you to use, modify, and distribute this\n * file in accordance with the terms of the Adobe license agreement\n * accompanying it.\n *******************************************************************/\n\nimport { FunctionComponent, VNode } from 'preact';\nimport { HTMLAttributes } from 'preact/compat';\nimport { classes } from '@adobe-commerce/elsie/lib';\nimport { Table } from '@adobe-commerce/elsie/components';\nimport { useText } from '@adobe-commerce/elsie/i18n';\nimport '@/quote-management/components/QuotesListTable/QuotesListTable.css';\n\ntype Column = {\n  key: string;\n  label: string;\n};\n\nexport interface QuotesListTableProps\n  extends Omit<HTMLAttributes<HTMLDivElement>, 'loading' | 'children'> {\n  rowData: QuoteRowData[];\n  loading?: boolean;\n  className?: string;\n  emptyStateMessage?: VNode;\n  showItemRange?: boolean;\n  itemRangeMessage?: VNode;\n  showPageSizePicker?: boolean;\n  pageSizePickerMessage?: VNode;\n  showPagination?: boolean;\n  paginationMessage?: VNode;\n}\n\nexport type QuoteRowData = {\n  id: string;\n  quoteName: VNode;\n  created: VNode;\n  createdBy: VNode;\n  status: VNode;\n  lastUpdated: VNode;\n  quoteTemplate: VNode;\n  quoteTotal: VNode;\n  actions: VNode;\n  [key: string]: VNode | string | number | undefined;\n};\n\nexport const QuotesListTable: FunctionComponent<QuotesListTableProps> = ({\n  rowData = [],\n  loading = false,\n  className,\n  emptyStateMessage,\n  showItemRange = true,\n  itemRangeMessage,\n  showPageSizePicker = true,\n  pageSizePickerMessage,\n  showPagination = true,\n  paginationMessage,\n  ...props\n}) => {\n  const dictionary = useText({\n    quoteName: 'QuoteManagement.QuotesListTable.quoteName',\n    created: 'QuoteManagement.QuotesListTable.created',\n    createdBy: 'QuoteManagement.QuotesListTable.createdBy',\n    status: 'QuoteManagement.QuotesListTable.status',\n    lastUpdated: 'QuoteManagement.QuotesListTable.lastUpdated',\n    quoteTemplate: 'QuoteManagement.QuotesListTable.quoteTemplate',\n    quoteTotal: 'QuoteManagement.QuotesListTable.quoteTotal',\n    actions: 'QuoteManagement.QuotesListTable.actions',\n  });\n\n  const columns: Column[] = [\n    { key: 'quoteName', label: dictionary.quoteName },\n    { key: 'created', label: dictionary.created },\n    { key: 'createdBy', label: dictionary.createdBy },\n    { key: 'status', label: dictionary.status },\n    { key: 'lastUpdated', label: dictionary.lastUpdated },\n    { key: 'quoteTemplate', label: dictionary.quoteTemplate },\n    { key: 'quoteTotal', label: dictionary.quoteTotal },\n    { key: 'actions', label: dictionary.actions },\n  ];\n\n  // Check if should show the table when loading or there is data\n  const shouldShowTable = loading || rowData.length > 0;\n\n  // Check if we should show empty state\n  const shouldShowEmptyState =\n    !loading && rowData.length === 0 && emptyStateMessage;\n\n  // Show item range if requested and message is provided\n  const shouldShowItemRange = showItemRange && itemRangeMessage;\n\n  // Show page size picker if requested and message is provided\n  const shouldShowPageSizePicker = showPageSizePicker && pageSizePickerMessage;\n\n  // Show pagination if requested and message is provided\n  const shouldShowPagination = showPagination && paginationMessage;\n\n  // Show footer if any pagination element should be shown\n  const shouldShowFooter =\n    shouldShowItemRange || shouldShowPageSizePicker || shouldShowPagination;\n\n  return (\n    <div\n      {...props}\n      className={classes(['quote-management-quotes-list-table', className])}\n    >\n      {shouldShowTable && (\n        <Table\n          columns={columns}\n          rowData={rowData}\n          loading={loading}\n          mobileLayout=\"none\"\n          className=\"quote-management-quotes-list-table__table\"\n        />\n      )}\n      {shouldShowEmptyState && (\n        <div className=\"quotes-list-table__empty-state\">\n          {emptyStateMessage}\n        </div>\n      )}\n      {shouldShowFooter && (\n        <div className=\"quotes-list-table__footer\">\n          <div className=\"quotes-list-table__item-range\">\n            {shouldShowItemRange && itemRangeMessage}\n          </div>\n          <div className=\"quotes-list-table__pagination\">\n            {shouldShowPagination && paginationMessage}\n          </div>\n          <div className=\"quotes-list-table__page-size-picker\">\n            {shouldShowPageSizePicker && pageSizePickerMessage}\n          </div>\n        </div>\n      )}\n    </div>\n  );\n};\n","/********************************************************************\n *  Copyright 2025 Adobe\n *  All Rights Reserved.\n *\n * NOTICE:  Adobe permits you to use, modify, and distribute this\n * file in accordance with the terms of the Adobe license agreement\n * accompanying it.\n *******************************************************************/\n\nimport { HTMLAttributes, useEffect, useState } from 'preact/compat';\nimport { Container, Slot, SlotProps } from '@adobe-commerce/elsie/lib';\nimport {\n  Price,\n  Button,\n  IllustratedMessage,\n  Picker,\n  Pagination,\n  type PickerOption,\n} from '@adobe-commerce/elsie/components';\nimport { events } from '@adobe-commerce/event-bus';\nimport {\n  QuotesListTable as QuotesListTableComponent,\n  QuoteRowData,\n} from '@/quote-management/components';\nimport { negotiableQuotes } from '@/quote-management/api';\nimport { getDefaultPageSizeOptions } from '@/quote-management/data/transforms';\nimport {\n  NegotiableQuotesListModel,\n  NegotiableQuoteListEntry,\n} from '@/quote-management/data/models';\nimport { formattedDate } from '@/quote-management/utils/dateUtils';\n\nexport interface QuotesListTableProps extends HTMLAttributes<HTMLDivElement> {\n  pageSize?: number;\n  showItemRange?: boolean;\n  showPageSizePicker?: boolean;\n  showPagination?: boolean;\n  onViewQuote?: (quoteId: string, quoteName: string, status: string) => void;\n  onPageSizeChange?: (pageSize: number) => void;\n  onPageChange?: (page: number) => void;\n  slots?: {\n    /** Slot for customizing the quote name cell content */\n    QuoteName?: SlotProps<{ quote: NegotiableQuoteListEntry }>;\n    /** Slot for customizing the created date cell content */\n    Created?: SlotProps<{ quote: NegotiableQuoteListEntry }>;\n    /** Slot for customizing the created by cell content */\n    CreatedBy?: SlotProps<{ quote: NegotiableQuoteListEntry }>;\n    /** Slot for customizing the status cell content */\n    Status?: SlotProps<{ quote: NegotiableQuoteListEntry }>;\n    /** Slot for customizing the last updated cell content */\n    LastUpdated?: SlotProps<{ quote: NegotiableQuoteListEntry }>;\n    /** Slot for customizing the quote template cell content */\n    QuoteTemplate?: SlotProps<{ quote: NegotiableQuoteListEntry }>;\n    /** Slot for customizing the quote total cell content */\n    QuoteTotal?: SlotProps<{ quote: NegotiableQuoteListEntry }>;\n    /** Slot for customizing the actions cell content */\n    Actions?: SlotProps<{\n      quote: NegotiableQuoteListEntry;\n      onViewQuote?: (id: string, name: string, status: string) => void;\n    }>;\n    /** Slot for customizing the empty quotes message */\n    EmptyQuotes?: SlotProps;\n    /** Slot for customizing the item range display */\n    ItemRange?: SlotProps<{\n      startItem: number;\n      endItem: number;\n      totalCount: number;\n      currentPage: number;\n      pageSize: number;\n    }>;\n    /** Slot for customizing the page size picker */\n    PageSizePicker?: SlotProps<{\n      pageSize: number;\n      pageSizeOptions: number[];\n      onPageSizeChange?: (pageSize: number) => void;\n    }>;\n    /** Slot for customizing the pagination */\n    Pagination?: SlotProps<{\n      currentPage: number;\n      totalPages: number;\n      onChange?: (page: number) => void;\n    }>;\n  };\n}\n\nexport const QuotesListTable: Container<QuotesListTableProps> = ({\n  pageSize,\n  showItemRange = true,\n  showPageSizePicker = true,\n  showPagination = true,\n  onViewQuote,\n  onPageSizeChange,\n  onPageChange,\n  slots,\n  ...props\n}) => {\n  const [quotesData, setQuotesData] =\n    useState<NegotiableQuotesListModel | null>(null);\n  const [loading, setLoading] = useState(true);\n\n  // Default to first page size option if no pageSize prop provided\n  const defaultPageSize = getDefaultPageSizeOptions()[0];\n  const [currentPageSize, setCurrentPageSize] = useState(\n    pageSize || defaultPageSize\n  );\n  const [currentPage, setCurrentPage] = useState(1);\n\n  // Fetch quotes data when authenticated\n  useEffect(() => {\n    const fetchQuotes = async () => {\n      try {\n        setLoading(true);\n        const data = await negotiableQuotes({\n          pageSize: currentPageSize,\n          currentPage,\n        });\n        setQuotesData(data);\n      } catch (error) {\n        console.error('Failed to fetch quotes:', error);\n      } finally {\n        setLoading(false);\n      }\n    };\n\n    // Listen for authentication events\n    const unsubscribe = events.on(\n      'authenticated',\n      (isAuthenticated) => {\n        if (isAuthenticated) {\n          fetchQuotes();\n        } else {\n          setQuotesData(null);\n          setLoading(false);\n        }\n      },\n      { eager: true }\n    ); // eager: true means it fires immediately with current state\n\n    return () => {\n      unsubscribe?.off();\n    };\n  }, [currentPageSize, currentPage]);\n\n  // Listen for quote renamed event to refresh the list\n  useEffect(() => {\n    const fetchQuotes = async () => {\n      try {\n        const data = await negotiableQuotes({\n          pageSize: currentPageSize,\n          currentPage,\n        });\n        setQuotesData(data);\n      } catch (error) {\n        console.error('Failed to fetch quotes:', error);\n      }\n    };\n\n    const unsubscribe = events.on(\n      'quote-management/quote-renamed',\n      () => {\n        // Refetch quotes list to show the updated name\n        fetchQuotes();\n      },\n      { eager: true }\n    );\n\n    return () => {\n      unsubscribe?.off();\n    };\n  }, [currentPageSize, currentPage]);\n\n  // Handle page size change\n  const handlePageSizeChange = (newPageSize: number) => {\n    setCurrentPageSize(newPageSize);\n    setCurrentPage(1); // Reset to page 1 when page size changes\n    onPageSizeChange?.(newPageSize); // Also call parent callback\n  };\n\n  // Handle page change\n  const handlePageChange = (newPage: number) => {\n    setCurrentPage(newPage);\n    onPageChange?.(newPage); // Also call parent callback\n  };\n\n  // Handle page size picker selection\n  const handlePageSizeSelect = (event: Event) => {\n    const target = event.target as HTMLSelectElement;\n    const value = target?.value;\n    if (value) {\n      handlePageSizeChange(Number(value));\n    }\n  };\n\n  // Prepare transformed quote data for table component\n  const prepareRowData = (\n    quotes: NegotiableQuoteListEntry[],\n    slots?: QuotesListTableProps['slots'],\n    onViewQuote?: (quoteId: string, quoteName: string, status: string) => void\n  ): QuoteRowData[] => {\n    return quotes\n      .filter((quote) => quote?.uid) // Filter out null quotes\n      .map((quote) => {\n        const createdByName = `${quote.buyer.firstname} ${quote.buyer.lastname}`;\n\n        return {\n          id: quote.uid,\n          quoteName: (\n            <Slot name=\"QuoteName\" slot={slots?.QuoteName} context={{ quote }}>\n              <span>{quote.name}</span>\n            </Slot>\n          ),\n          created: (\n            <Slot name=\"Created\" slot={slots?.Created} context={{ quote }}>\n              <span>\n                {quote.createdAt\n                  ? formattedDate(quote.createdAt, 'short')\n                  : 'N/A'}\n              </span>\n            </Slot>\n          ),\n          createdBy: (\n            <Slot name=\"CreatedBy\" slot={slots?.CreatedBy} context={{ quote }}>\n              <span>{createdByName}</span>\n            </Slot>\n          ),\n          status: (\n            <Slot name=\"Status\" slot={slots?.Status} context={{ quote }}>\n              <span>{quote.status}</span>\n            </Slot>\n          ),\n          lastUpdated: (\n            <Slot\n              name=\"LastUpdated\"\n              slot={slots?.LastUpdated}\n              context={{ quote }}\n            >\n              <span>\n                {quote.updatedAt\n                  ? formattedDate(quote.updatedAt, 'short')\n                  : 'N/A'}\n              </span>\n            </Slot>\n          ),\n          quoteTemplate: (\n            <Slot\n              name=\"QuoteTemplate\"\n              slot={slots?.QuoteTemplate}\n              context={{ quote }}\n            >\n              <span>{quote.templateName}</span>\n            </Slot>\n          ),\n          quoteTotal: (\n            <Slot\n              name=\"QuoteTotal\"\n              slot={slots?.QuoteTotal}\n              context={{ quote }}\n            >\n              <Price\n                amount={quote.prices?.grandTotal?.value}\n                currency={quote.prices?.grandTotal?.currency}\n              />\n            </Slot>\n          ),\n          actions: (\n            <Slot\n              name=\"Actions\"\n              slot={slots?.Actions}\n              context={{ quote, onViewQuote }}\n            >\n              <Button\n                variant=\"tertiary\"\n                size=\"medium\"\n                onClick={() =>\n                  onViewQuote?.(quote.uid, quote.name, quote.status)\n                }\n              >\n                View\n              </Button>\n            </Slot>\n          ),\n        };\n      });\n  };\n\n  // Prepare data for rendering\n  const rowData = quotesData?.items\n    ? prepareRowData(quotesData.items, slots, onViewQuote)\n    : [];\n\n  const paginationInfo = quotesData?.paginationInfo;\n  const shouldShowPagination = !!paginationInfo;\n\n  // Empty state message\n  const emptyStateMessage = (\n    <Slot name=\"EmptyQuotes\" slot={slots?.EmptyQuotes} context={{ quotesData }}>\n      <IllustratedMessage heading=\"No Quotes Found\" />\n    </Slot>\n  );\n\n  // Item range message\n  const itemRangeMessage = paginationInfo ? (\n    <Slot name=\"ItemRange\" slot={slots?.ItemRange} context={paginationInfo}>\n      <span>\n        Items {paginationInfo.startItem} to {paginationInfo.endItem} of{' '}\n        {paginationInfo.totalCount} total\n      </span>\n    </Slot>\n  ) : undefined;\n\n  // Prepare page size picker message for component\n  const pageSizePickerMessage =\n    paginationInfo && paginationInfo.pageSizeOptions ? (\n      <Slot\n        name=\"PageSizePicker\"\n        slot={slots?.PageSizePicker}\n        context={{\n          pageSize: paginationInfo.pageSize,\n          pageSizeOptions: paginationInfo.pageSizeOptions,\n          onPageSizeChange: handlePageSizeChange,\n        }}\n      >\n        <span>Show </span>\n        <Picker\n          variant=\"primary\"\n          size=\"medium\"\n          value={String(paginationInfo.pageSize)}\n          options={paginationInfo.pageSizeOptions.map(\n            (size): PickerOption => ({\n              value: String(size),\n              text: String(size),\n            })\n          )}\n          handleSelect={handlePageSizeSelect}\n        />\n        <span> per page</span>\n      </Slot>\n    ) : undefined;\n\n  // Prepare pagination message for component\n  const paginationMessage = paginationInfo ? (\n    <Slot\n      name=\"Pagination\"\n      slot={slots?.Pagination}\n      context={{\n        currentPage: paginationInfo.currentPage,\n        totalPages: paginationInfo.totalPages,\n        onChange: handlePageChange,\n      }}\n    >\n      <Pagination\n        currentPage={paginationInfo.currentPage}\n        totalPages={paginationInfo.totalPages}\n        onChange={handlePageChange}\n      />\n    </Slot>\n  ) : undefined;\n\n  return (\n    <QuotesListTableComponent\n      rowData={rowData}\n      loading={loading}\n      className={props.className as string}\n      emptyStateMessage={emptyStateMessage}\n      showItemRange={showItemRange && shouldShowPagination}\n      itemRangeMessage={itemRangeMessage}\n      showPageSizePicker={showPageSizePicker && shouldShowPagination}\n      pageSizePickerMessage={pageSizePickerMessage}\n      showPagination={showPagination && shouldShowPagination}\n      paginationMessage={paginationMessage}\n    />\n  );\n};\n"],"names":["QuotesListTable","rowData","loading","className","emptyStateMessage","showItemRange","itemRangeMessage","showPageSizePicker","pageSizePickerMessage","showPagination","paginationMessage","props","dictionary","useText","columns","shouldShowTable","shouldShowEmptyState","shouldShowItemRange","shouldShowPageSizePicker","shouldShowPagination","shouldShowFooter","jsxs","classes","jsx","Table","pageSize","onViewQuote","onPageSizeChange","onPageChange","slots","quotesData","setQuotesData","useState","setLoading","defaultPageSize","getDefaultPageSizeOptions","currentPageSize","setCurrentPageSize","currentPage","setCurrentPage","useEffect","fetchQuotes","data","negotiableQuotes","error","unsubscribe","events","isAuthenticated","handlePageSizeChange","newPageSize","handlePageChange","newPage","handlePageSizeSelect","event","target","value","prepareRowData","quotes","quote","createdByName","Slot","formattedDate","Price","_b","_a","_d","_c","Button","paginationInfo","IllustratedMessage","Picker","size","Pagination","QuotesListTableComponent"],"mappings":"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"}