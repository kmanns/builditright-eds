{"version":3,"file":"guards.js","sources":["/@dropins/storefront-checkout/src/data/transforms/transform-api.ts","/@dropins/storefront-checkout/src/lib/guards.ts"],"sourcesContent":["/********************************************************************\n * ADOBE CONFIDENTIAL\n * __________________\n *\n *  Copyright 2025 Adobe\n *  All Rights Reserved.\n *\n * NOTICE:  All information contained herein is, and remains\n * the property of Adobe and its suppliers, if any. The intellectual\n * and technical concepts contained herein are proprietary to Adobe\n * and its suppliers and are protected by all applicable intellectual\n * property laws, including trade secret and copyright laws.\n * Dissemination of this information or reproduction of this material\n * is strictly forbidden unless prior written permission is obtained\n * from Adobe.\n *******************************************************************/\n\nimport {\n  AddressInput as AddressInputModel,\n  BillingAddressInput as BillingAddressInputModel,\n  PaymentMethodInput as PaymentMethodInputModel,\n  ShippingAddressInput as ShippingAddressInputModel,\n  ShippingMethodInput as ShippingMethodInputModel,\n} from '@/checkout/data/models/api';\n\nimport {\n  BillingAddressInput,\n  NegotiableQuoteBillingAddressInput,\n  NegotiableQuotePaymentMethodInput,\n  NegotiableQuoteShippingAddressInput,\n  PaymentMethodInput,\n  ShippingAddressInput,\n  ShippingMethodInput,\n} from '@/checkout/__generated__/types';\n\nexport function transformPaymentMethodInputModelToCartInput({\n  code,\n  ...additionalData\n}: PaymentMethodInputModel): PaymentMethodInput {\n  return {\n    code,\n    ...additionalData,\n  };\n}\n\nexport function transformPaymentMethodInputModelToQuoteInput({\n  code,\n  ...additionalData\n}: PaymentMethodInputModel): NegotiableQuotePaymentMethodInput {\n  return {\n    code,\n    ...additionalData,\n  };\n}\n\nexport const transformShippingMethodInput = (\n  input: ShippingMethodInputModel | ShippingMethodInput\n): ShippingMethodInput => {\n  if ('carrier_code' in input && 'method_code' in input) {\n    return input as ShippingMethodInput;\n  }\n\n  // Transform from model format to GraphQL format\n  const modelInput = input as ShippingMethodInputModel;\n\n  const { carrierCode, methodCode, ...additionalData } = modelInput;\n\n  return {\n    carrier_code: carrierCode,\n    method_code: methodCode,\n    ...additionalData,\n  };\n};\n\nexport function transformShippingMethodsInputModel(\n  input: Array<ShippingMethodInputModel | ShippingMethodInput>\n): Array<ShippingMethodInput> {\n  return input.map(transformShippingMethodInput);\n}\n\nfunction transformAddressInputModel(address: AddressInputModel) {\n  return {\n    fax: address.fax,\n    middlename: address.middleName,\n    prefix: address.prefix,\n    suffix: address.suffix,\n    vat_id: address.vatId,\n    city: address.city,\n    custom_attributes:\n      address.customAttributes?.map((attribute: any) => ({\n        attribute_code: attribute.code,\n        value: attribute.value,\n      })) || [],\n    company: address.company,\n    country_code: address.countryCode,\n    firstname: address.firstName,\n    lastname: address.lastName,\n    postcode: address.postcode,\n    region: address.region,\n    region_id: address.regionId,\n    save_in_address_book: address.saveInAddressBook,\n    street: address.street,\n    telephone: address.telephone,\n  };\n}\n\nexport function transformShippingAddressInputModelToCartInput(\n  input: ShippingAddressInputModel\n): ShippingAddressInput {\n  const { customerAddressId, pickupLocationCode, address } = input;\n\n  const result: ShippingAddressInput = {};\n\n  if (customerAddressId) {\n    return { customer_address_id: customerAddressId };\n  }\n\n  if (pickupLocationCode) {\n    result.pickup_location_code = pickupLocationCode;\n  }\n\n  if (!pickupLocationCode && address) {\n    result.address = transformAddressInputModel(address);\n  }\n\n  return result;\n}\n\nexport function transformShippingAddressInputModelToQuoteInput(\n  input: ShippingAddressInputModel\n): NegotiableQuoteShippingAddressInput {\n  const { customerAddressUid, address } = input;\n\n  const result: NegotiableQuoteShippingAddressInput = {};\n\n  if (customerAddressUid) {\n    return { customer_address_uid: customerAddressUid };\n  }\n\n  if (address) {\n    result.address = transformAddressInputModel(address);\n  }\n\n  return result;\n}\n\nexport function transformBillingAddressInputModelToCartInput(\n  input: BillingAddressInputModel\n): BillingAddressInput {\n  const {\n    customerAddressId,\n    sameAsShipping = false,\n    useForShipping = false,\n    address,\n  } = input;\n\n  let result: BillingAddressInput = {\n    use_for_shipping: useForShipping,\n    same_as_shipping: sameAsShipping,\n  };\n\n  if (!sameAsShipping && customerAddressId) {\n    result.customer_address_id = customerAddressId;\n    return result;\n  }\n\n  if (!sameAsShipping && address) {\n    result.address = transformAddressInputModel(address);\n  }\n\n  return result;\n}\n\nexport function transformBillingAddressInputModelToQuoteInput(\n  input: BillingAddressInputModel\n): NegotiableQuoteBillingAddressInput {\n  const {\n    customerAddressUid,\n    sameAsShipping = false,\n    useForShipping = false,\n    address,\n  } = input;\n\n  let result: NegotiableQuoteBillingAddressInput = {\n    use_for_shipping: useForShipping,\n    same_as_shipping: sameAsShipping,\n  };\n\n  if (!sameAsShipping && customerAddressUid) {\n    result.customer_address_uid = customerAddressUid;\n    return result;\n  }\n\n  if (!sameAsShipping && address) {\n    result.address = transformAddressInputModel(address);\n  }\n\n  return result;\n}\n","/********************************************************************\n * ADOBE CONFIDENTIAL\n * __________________\n *\n *  Copyright 2025 Adobe\n *  All Rights Reserved.\n *\n * NOTICE:  All information contained herein is, and remains\n * the property of Adobe and its suppliers, if any. The intellectual\n * and technical concepts contained herein are proprietary to Adobe\n * and its suppliers and are protected by all applicable intellectual\n * property laws, including trade secret and copyright laws.\n * Dissemination of this information or reproduction of this material\n * is strictly forbidden unless prior written permission is obtained\n * from Adobe.\n *******************************************************************/\n\nimport { MissingCartAndQuote } from '@/checkout/lib/errors';\nimport { state } from '@/checkout/lib/state';\n\nexport const ensureHasCartOrQuoteId = () => {\n  const { cartId, quoteId } = state;\n  if (!cartId && !quoteId) throw new MissingCartAndQuote();\n};\n"],"names":["transformPaymentMethodInputModelToCartInput","code","additionalData","transformPaymentMethodInputModelToQuoteInput","transformShippingMethodInput","input","modelInput","carrierCode","methodCode","transformShippingMethodsInputModel","transformAddressInputModel","address","_a","attribute","transformShippingAddressInputModelToCartInput","customerAddressId","pickupLocationCode","result","transformShippingAddressInputModelToQuoteInput","customerAddressUid","transformBillingAddressInputModelToCartInput","sameAsShipping","useForShipping","transformBillingAddressInputModelToQuoteInput","ensureHasCartOrQuoteId","cartId","quoteId","state","MissingCartAndQuote"],"mappings":"8CAmCO,SAASA,EAA4C,CAC1D,KAAAC,EACA,GAAGC,CACL,EAAgD,CACvC,MAAA,CACL,KAAAD,EACA,GAAGC,CACL,CACF,CAEO,SAASC,EAA6C,CAC3D,KAAAF,EACA,GAAGC,CACL,EAA+D,CACtD,MAAA,CACL,KAAAD,EACA,GAAGC,CACL,CACF,CAEa,MAAAE,EACXC,GACwB,CACpB,GAAA,iBAAkBA,GAAS,gBAAiBA,EACvC,OAAAA,EAIT,MAAMC,EAAaD,EAEb,CAAE,YAAAE,EAAa,WAAAC,EAAY,GAAGN,CAAmB,EAAAI,EAEhD,MAAA,CACL,aAAcC,EACd,YAAaC,EACb,GAAGN,CACL,CACF,EAEO,SAASO,EACdJ,EAC4B,CACrB,OAAAA,EAAM,IAAID,CAA4B,CAC/C,CAEA,SAASM,EAA2BC,EAA4B,OACvD,MAAA,CACL,IAAKA,EAAQ,IACb,WAAYA,EAAQ,WACpB,OAAQA,EAAQ,OAChB,OAAQA,EAAQ,OAChB,OAAQA,EAAQ,MAChB,KAAMA,EAAQ,KACd,oBACEC,EAAAD,EAAQ,mBAAR,YAAAC,EAA0B,IAAKC,IAAoB,CACjD,eAAgBA,EAAU,KAC1B,MAAOA,EAAU,KACnB,MAAO,CAAC,EACV,QAASF,EAAQ,QACjB,aAAcA,EAAQ,YACtB,UAAWA,EAAQ,UACnB,SAAUA,EAAQ,SAClB,SAAUA,EAAQ,SAClB,OAAQA,EAAQ,OAChB,UAAWA,EAAQ,SACnB,qBAAsBA,EAAQ,kBAC9B,OAAQA,EAAQ,OAChB,UAAWA,EAAQ,SACrB,CACF,CAEO,SAASG,EACdT,EACsB,CACtB,KAAM,CAAE,kBAAAU,EAAmB,mBAAAC,EAAoB,QAAAL,CAAY,EAAAN,EAErDY,EAA+B,CAAC,EAEtC,OAAIF,EACK,CAAE,oBAAqBA,CAAkB,GAG9CC,IACFC,EAAO,qBAAuBD,GAG5B,CAACA,GAAsBL,IAClBM,EAAA,QAAUP,EAA2BC,CAAO,GAG9CM,EACT,CAEO,SAASC,EACdb,EACqC,CAC/B,KAAA,CAAE,mBAAAc,EAAoB,QAAAR,CAAA,EAAYN,EAElCY,EAA8C,CAAC,EAErD,OAAIE,EACK,CAAE,qBAAsBA,CAAmB,GAGhDR,IACKM,EAAA,QAAUP,EAA2BC,CAAO,GAG9CM,EACT,CAEO,SAASG,EACdf,EACqB,CACf,KAAA,CACJ,kBAAAU,EACA,eAAAM,EAAiB,GACjB,eAAAC,EAAiB,GACjB,QAAAX,CAAA,EACEN,EAEJ,IAAIY,EAA8B,CAChC,iBAAkBK,EAClB,iBAAkBD,CACpB,EAEI,MAAA,CAACA,GAAkBN,GACrBE,EAAO,oBAAsBF,EACtBE,IAGL,CAACI,GAAkBV,IACdM,EAAA,QAAUP,EAA2BC,CAAO,GAG9CM,EACT,CAEO,SAASM,EACdlB,EACoC,CAC9B,KAAA,CACJ,mBAAAc,EACA,eAAAE,EAAiB,GACjB,eAAAC,EAAiB,GACjB,QAAAX,CAAA,EACEN,EAEJ,IAAIY,EAA6C,CAC/C,iBAAkBK,EAClB,iBAAkBD,CACpB,EAEI,MAAA,CAACA,GAAkBF,GACrBF,EAAO,qBAAuBE,EACvBF,IAGL,CAACI,GAAkBV,IACdM,EAAA,QAAUP,EAA2BC,CAAO,GAG9CM,EACT,CClLO,MAAMO,EAAyB,IAAM,CACpC,KAAA,CAAE,OAAAC,EAAQ,QAAAC,CAAA,EAAYC,EAC5B,GAAI,CAACF,GAAU,CAACC,EAAS,MAAM,IAAIE,CACrC"}