{"version":3,"file":"PurchaseOrder.js","sources":["/@dropins/storefront-checkout/src/components/PurchaseOrder/PurchaseOrder.tsx","/@dropins/storefront-checkout/src/containers/PurchaseOrder/PurchaseOrder.tsx"],"sourcesContent":["/********************************************************************\n * ADOBE CONFIDENTIAL\n * __________________\n *\n *  Copyright 2025 Adobe\n *  All Rights Reserved.\n *\n * NOTICE:  All information contained herein is, and remains\n * the property of Adobe and its suppliers, if any. The intellectual\n * and technical concepts contained herein are proprietary to Adobe\n * and its suppliers and are protected by all applicable intellectual\n * property laws, including trade secret and copyright laws.\n * Dissemination of this information or reproduction of this material\n * is strictly forbidden unless prior written permission is obtained\n * from Adobe.\n *******************************************************************/\n\nimport '@/checkout/components/PurchaseOrder/PurchaseOrder.css';\nimport { htmlPatterns } from '@/checkout/lib/validation';\nimport { Field, Input } from '@adobe-commerce/elsie/components';\nimport { useText } from '@adobe-commerce/elsie/i18n';\nimport { classes } from '@adobe-commerce/elsie/lib';\nimport { FunctionComponent } from 'preact';\nimport { HTMLAttributes } from 'preact/compat';\n\nexport interface PurchaseOrderProps extends HTMLAttributes<HTMLFormElement> {\n  error?: string;\n  referenceNumber?: string;\n  onReferenceNumberBlur?: (event: Event) => void;\n  onReferenceNumberChange?: (event: Event) => void;\n  onInvalidReferenceNumber?: (event: Event) => void;\n}\n\nexport const PurchaseOrder: FunctionComponent<PurchaseOrderProps> = ({\n  className,\n  error = '',\n  referenceNumber = '',\n  onReferenceNumberBlur,\n  onReferenceNumberChange,\n  onInvalidReferenceNumber,\n  ...props\n}) => {\n  const translations = useText({\n    refNumberHint: 'Checkout.PurchaseOrder.referenceNumberHint',\n    refNumberLabel: 'Checkout.PurchaseOrder.referenceNumberLabel',\n    refNumberPlaceholder: 'Checkout.PurchaseOrder.referenceNumberPlaceholder',\n  });\n\n  return (\n    <div\n      className=\"checkout-purchase-order\"\n      data-testid=\"checkout-purchase-order\"\n    >\n      <form\n        {...props}\n        noValidate\n        className={classes(['checkout-purchase-order__form', className])}\n        data-testid=\"checkout-purchase-order-form\"\n      >\n        <Field error={error} hint={translations.refNumberHint || undefined}>\n          <Input\n            aria-required=\"true\"\n            floatingLabel={`${translations.refNumberLabel} *`}\n            id=\"reference-number\"\n            name=\"reference-number\"\n            pattern={htmlPatterns.NOT_EMPTY}\n            placeholder={translations.refNumberPlaceholder}\n            required={true}\n            type=\"text\"\n            value={referenceNumber}\n            onBlur={onReferenceNumberBlur}\n            onChange={onReferenceNumberChange}\n            onInvalid={onInvalidReferenceNumber}\n          />\n        </Field>\n      </form>\n    </div>\n  );\n};\n","/********************************************************************\n * ADOBE CONFIDENTIAL\n * __________________\n *\n *  Copyright 2025 Adobe\n *  All Rights Reserved.\n *\n * NOTICE:  All information contained herein is, and remains\n * the property of Adobe and its suppliers, if any. The intellectual\n * and technical concepts contained herein are proprietary to Adobe\n * and its suppliers and are protected by all applicable intellectual\n * property laws, including trade secret and copyright laws.\n * Dissemination of this information or reproduction of this material\n * is strictly forbidden unless prior written permission is obtained\n * from Adobe.\n *******************************************************************/\n\nimport { PurchaseOrder as PurchaseOrderComponent } from '@/checkout/components';\nimport { validateNotEmpty } from '@/checkout/lib/validation';\nimport { useText } from '@adobe-commerce/elsie/i18n';\nimport { Container } from '@adobe-commerce/elsie/lib';\nimport { HTMLAttributes, useCallback, useState } from 'preact/compat';\n\nexport interface PurchaseOrderProps extends HTMLAttributes<HTMLFormElement> {\n  initialReferenceNumber?: string;\n  onReferenceNumberChange?: (referenceNumber: string) => void;\n  onReferenceNumberBlur?: (referenceNumber: string) => void;\n}\n\nexport const PurchaseOrder: Container<PurchaseOrderProps> = ({\n  initialReferenceNumber = '',\n  onReferenceNumberChange,\n  onReferenceNumberBlur,\n  ...props\n}) => {\n  const [error, setError] = useState<string>('');\n  const [referenceNumber, setReferenceNumber] = useState<string>(\n    initialReferenceNumber\n  );\n\n  const { missingRefNumberError } = useText({\n    missingRefNumberError: 'Checkout.PurchaseOrder.missingReferenceNumberError',\n  });\n\n  const validateRefNumber = useCallback(\n    (value: string) => {\n      const isMissing = validateNotEmpty(value);\n      setError(isMissing ? '' : missingRefNumberError);\n    },\n    [missingRefNumberError]\n  );\n\n  const checkValidity = useCallback(\n    (validity: ValidityState) => {\n      setError(validity.valid ? '' : missingRefNumberError);\n    },\n    [missingRefNumberError]\n  );\n\n  const handleReferenceNumberChange = useCallback(\n    (event: Event) => {\n      const target = event.target as HTMLInputElement;\n      const value = target.value;\n      setReferenceNumber(value);\n      validateRefNumber(value);\n      onReferenceNumberChange?.(value);\n    },\n    [onReferenceNumberChange, validateRefNumber]\n  );\n\n  const handleReferenceNumberBlur = useCallback(\n    (event: Event) => {\n      const target = event.target as HTMLInputElement;\n      const value = target.value;\n      validateRefNumber(value);\n      onReferenceNumberBlur?.(value);\n    },\n    [onReferenceNumberBlur, validateRefNumber]\n  );\n\n  const handleInvalidReferenceNumber = useCallback(\n    (event: Event) => {\n      const target = event.target as HTMLInputElement;\n      checkValidity(target.validity);\n    },\n    [checkValidity]\n  );\n\n  return (\n    <PurchaseOrderComponent\n      {...props}\n      error={error}\n      referenceNumber={referenceNumber}\n      onInvalidReferenceNumber={handleInvalidReferenceNumber}\n      onReferenceNumberBlur={handleReferenceNumberBlur}\n      onReferenceNumberChange={handleReferenceNumberChange}\n    />\n  );\n};\n"],"names":["PurchaseOrder","className","error","referenceNumber","onReferenceNumberBlur","onReferenceNumberChange","onInvalidReferenceNumber","props","translations","useText","jsx","classes","Field","Input","htmlPatterns","initialReferenceNumber","setError","useState","setReferenceNumber","missingRefNumberError","validateRefNumber","useCallback","value","isMissing","validateNotEmpty","checkValidity","validity","handleReferenceNumberChange","event","handleReferenceNumberBlur","handleInvalidReferenceNumber","target","PurchaseOrderComponent"],"mappings":"+kBAiCO,MAAMA,EAAuD,CAAC,CACnE,UAAAC,EACA,MAAAC,EAAQ,GACR,gBAAAC,EAAkB,GAClB,sBAAAC,EACA,wBAAAC,EACA,yBAAAC,EACA,GAAGC,CACL,IAAM,CACJ,MAAMC,EAAeC,EAAQ,CAC3B,cAAe,6CACf,eAAgB,8CAChB,qBAAsB,mDAAA,CACvB,EAGC,OAAAC,EAAC,MAAA,CACC,UAAU,0BACV,cAAY,0BAEZ,SAAAA,EAAC,OAAA,CACE,GAAGH,EACJ,WAAU,GACV,UAAWI,EAAQ,CAAC,gCAAiCV,CAAS,CAAC,EAC/D,cAAY,+BAEZ,WAACW,EAAM,CAAA,MAAAV,EAAc,KAAMM,EAAa,eAAiB,OACvD,SAAAE,EAACG,EAAA,CACC,gBAAc,OACd,cAAe,GAAGL,EAAa,cAAc,KAC7C,GAAG,mBACH,KAAK,mBACL,QAASM,EAAa,UACtB,YAAaN,EAAa,qBAC1B,SAAU,GACV,KAAK,OACL,MAAOL,EACP,OAAQC,EACR,SAAUC,EACV,UAAWC,CAAA,CAAA,CAEf,CAAA,CAAA,CAAA,CACF,CACF,CAEJ,ECjDaN,EAA+C,CAAC,CAC3D,uBAAAe,EAAyB,GACzB,wBAAAV,EACA,sBAAAD,EACA,GAAGG,CACL,IAAM,CACJ,KAAM,CAACL,EAAOc,CAAQ,EAAIC,EAAiB,EAAE,EACvC,CAACd,EAAiBe,CAAkB,EAAID,EAC5CF,CACF,EAEM,CAAE,sBAAAI,CAAsB,EAAIV,EAAQ,CACxC,sBAAuB,oDAAA,CACxB,EAEKW,EAAoBC,EACvBC,GAAkB,CACX,MAAAC,EAAYC,EAAiBF,CAAK,EAC/BN,EAAAO,EAAY,GAAKJ,CAAqB,CACjD,EACA,CAACA,CAAqB,CACxB,EAEMM,EAAgBJ,EACnBK,GAA4B,CAClBV,EAAAU,EAAS,MAAQ,GAAKP,CAAqB,CACtD,EACA,CAACA,CAAqB,CACxB,EAEMQ,EAA8BN,EACjCO,GAAiB,CAEhB,MAAMN,EADSM,EAAM,OACA,MACrBV,EAAmBI,CAAK,EACxBF,EAAkBE,CAAK,EACvBjB,GAAA,MAAAA,EAA0BiB,EAC5B,EACA,CAACjB,EAAyBe,CAAiB,CAC7C,EAEMS,EAA4BR,EAC/BO,GAAiB,CAEhB,MAAMN,EADSM,EAAM,OACA,MACrBR,EAAkBE,CAAK,EACvBlB,GAAA,MAAAA,EAAwBkB,EAC1B,EACA,CAAClB,EAAuBgB,CAAiB,CAC3C,EAEMU,EAA+BT,EAClCO,GAAiB,CAChB,MAAMG,EAASH,EAAM,OACrBH,EAAcM,EAAO,QAAQ,CAC/B,EACA,CAACN,CAAa,CAChB,EAGE,OAAAf,EAACsB,EAAA,CACE,GAAGzB,EACJ,MAAAL,EACA,gBAAAC,EACA,yBAA0B2B,EAC1B,sBAAuBD,EACvB,wBAAyBF,CAAA,CAC3B,CAEJ"}