{"version":3,"file":"classifiers.js","sources":["/@dropins/storefront-checkout/src/lib/errors/classifiers.ts"],"sourcesContent":["/********************************************************************\n * ADOBE CONFIDENTIAL\n * __________________\n *\n *  Copyright 2025 Adobe\n *  All Rights Reserved.\n *\n * NOTICE:  All information contained herein is, and remains\n * the property of Adobe and its suppliers, if any. The intellectual\n * and technical concepts contained herein are proprietary to Adobe\n * and its suppliers and are protected by all applicable intellectual\n * property laws, including trade secret and copyright laws.\n * Dissemination of this information or reproduction of this material\n * is strictly forbidden unless prior written permission is obtained\n * from Adobe.\n *******************************************************************/\n\nimport { InvalidInput, Unauthenticated } from './customErrors';\n\nexport type ErrorCode = string;\n\nexport enum ErrorCodes {\n  INVALID_INPUT = 'INVALID_INPUT',\n  SERVER_ERROR = 'SERVER_ERROR',\n  UNAUTHENTICATED = 'UNAUTHENTICATED',\n  UNKNOWN_ERROR = 'UNKNOWN_ERROR',\n  QUOTE_DATA_ERROR = 'QUOTE_DATA_ERROR',\n  QUOTE_PERMISSION_DENIED = 'QUOTE_PERMISSION_DENIED',\n  PERMISSION_DENIED = 'PERMISSION_DENIED',\n}\n\nconst KNOWN_SERVER_ERRORS = ['PlaceOrderError'];\n\nexport interface ErrorClassifier {\n  /**\n   * The specific code to return if this classifier matches.\n   */\n  code: ErrorCode;\n  /**\n   * A function that returns `true` if it recognizes the error.\n   * It must safely handle `unknown` inputs.\n   */\n  matches: (error: unknown) => boolean;\n}\n\n// Array of all known error classifiers.\n// The order is important! The first one to match will be used.\nexport const classifiers: ErrorClassifier[] = [\n  {\n    code: ErrorCodes.INVALID_INPUT,\n    matches: (error: unknown): boolean => {\n      return error instanceof InvalidInput;\n    },\n  },\n  {\n    code: ErrorCodes.UNAUTHENTICATED,\n    matches: (error: unknown): boolean => {\n      return error instanceof Unauthenticated;\n    },\n  },\n  {\n    code: ErrorCodes.SERVER_ERROR,\n    matches: (error: unknown): boolean => {\n      if (!error || typeof error !== 'object' || !('name' in error)) {\n        return false;\n      }\n\n      return KNOWN_SERVER_ERRORS.includes((error as { name: string }).name);\n    },\n  },\n];\n"],"names":["ErrorCodes","KNOWN_SERVER_ERRORS","classifiers","error","InvalidInput","Unauthenticated"],"mappings":"8CAqBY,IAAAA,GAAAA,IACVA,EAAA,cAAgB,gBAChBA,EAAA,aAAe,eACfA,EAAA,gBAAkB,kBAClBA,EAAA,cAAgB,gBAChBA,EAAA,iBAAmB,mBACnBA,EAAA,wBAA0B,0BAC1BA,EAAA,kBAAoB,oBAPVA,IAAAA,GAAA,CAAA,CAAA,EAUZ,MAAMC,EAAsB,CAAC,iBAAiB,EAgBjCC,EAAiC,CAC5C,CACE,KAAM,gBACN,QAAUC,GACDA,aAAiBC,CAE5B,EACA,CACE,KAAM,kBACN,QAAUD,GACDA,aAAiBE,CAE5B,EACA,CACE,KAAM,eACN,QAAUF,GACJ,CAACA,GAAS,OAAOA,GAAU,UAAY,EAAE,SAAUA,GAC9C,GAGFF,EAAoB,SAAUE,EAA2B,IAAI,CACtE,CAEJ"}