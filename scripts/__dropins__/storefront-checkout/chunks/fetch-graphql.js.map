{"version":3,"file":"fetch-graphql.js","sources":["/@dropins/storefront-checkout/src/lib/state.ts","/@dropins/storefront-checkout/src/data/models/store-config.ts","/@dropins/storefront-checkout/src/store/ui.ts","/@dropins/storefront-checkout/src/lib/enqueueRequest.ts","/@dropins/storefront-checkout/src/lib/filterControlledErrors.ts","/@dropins/storefront-checkout/src/lib/errors/customErrors.ts","/@dropins/storefront-checkout/src/lib/dispatchApiCall.ts","/@dropins/storefront-checkout/src/api/getStoreConfig/graphql/getStoreConfig.graphql.ts","/@dropins/storefront-checkout/src/api/getStoreConfig/getStoreConfig.ts","/@dropins/storefront-checkout/src/data/transforms/transform-store-config.ts","/@dropins/storefront-checkout/src/api/fetch-graphql/fetch-graphql.ts"],"sourcesContent":["/********************************************************************\n * ADOBE CONFIDENTIAL\n * __________________\n *\n *  Copyright 2024 Adobe\n *  All Rights Reserved.\n *\n * NOTICE:  All information contained herein is, and remains\n * the property of Adobe and its suppliers, if any. The intellectual\n * and technical concepts contained herein are proprietary to Adobe\n * and its suppliers and are protected by all applicable intellectual\n * property laws, including trade secret and copyright laws.\n * Dissemination of this information or reproduction of this material\n * is strictly forbidden unless prior written permission is obtained\n * from Adobe.\n *******************************************************************/\n\nimport { StoreConfig } from '@/checkout/data/models';\n\ntype State = {\n  authenticated: boolean;\n  cartId?: string | null;\n  config: StoreConfig | null;\n  initialized: boolean;\n  quoteId?: string | null;\n};\n\nconst _state: State = (() => ({\n  authenticated: false,\n  cartId: null,\n  config: null,\n  initialized: false,\n  quoteId: null,\n}))();\n\n// Proxy state to allow reactivity\nexport const state = new Proxy(_state, {\n  set(target, key, value) {\n    // @ts-ignore\n    target[key] = value;\n    return true;\n  },\n  get(target, key) {\n    return target[key as keyof State];\n  },\n});\n\nexport function isQuoteCheckout(): boolean {\n  return state.quoteId !== null;\n}\n\nexport function isCartCheckout(): boolean {\n  return state.cartId !== null;\n}\n","/********************************************************************\n * ADOBE CONFIDENTIAL\n * __________________\n *\n *  Copyright 2024 Adobe\n *  All Rights Reserved.\n *\n * NOTICE:  All information contained herein is, and remains\n * the property of Adobe and its suppliers, if any. The intellectual\n * and technical concepts contained herein are proprietary to Adobe\n * and its suppliers and are protected by all applicable intellectual\n * property laws, including trade secret and copyright laws.\n * Dissemination of this information or reproduction of this material\n * is strictly forbidden unless prior written permission is obtained\n * from Adobe.\n *******************************************************************/\n\nexport enum TaxDisplay {\n  EXCLUDING_TAX = 'EXCLUDING_TAX',\n  INCLUDING_EXCLUDING_TAX = 'INCLUDING_AND_EXCLUDING_TAX',\n  INCLUDING_TAX = 'INCLUDING_TAX',\n}\n\nexport interface StoreConfig {\n  defaultCountry: string;\n  agreementsEnabled: boolean;\n  shoppingCartDisplaySetting: {\n    shipping: TaxDisplay;\n  };\n}\n","/********************************************************************\n * ADOBE CONFIDENTIAL\n * __________________\n *\n *  Copyright 2025 Adobe\n *  All Rights Reserved.\n *\n * NOTICE:  All information contained herein is, and remains\n * the property of Adobe and its suppliers, if any. The intellectual\n * and technical concepts contained herein are proprietary to Adobe\n * and its suppliers and are protected by all applicable intellectual\n * property laws, including trade secret and copyright laws.\n * Dissemination of this information or reproduction of this material\n * is strictly forbidden unless prior written permission is obtained\n * from Adobe.\n *******************************************************************/\n\nimport { signal } from '@adobe-commerce/elsie/lib/signals';\n\n// Tracks when a set address call is expected and in the debounce period (set in api.ts).\n// Used to disable UI elements while pending: BillToShippingAddress checkbox and PlaceOrder button.\nexport const isSetAddressRequestPending = signal(false);\n\n","/********************************************************************\n * ADOBE CONFIDENTIAL\n * __________________\n *\n *  Copyright 2024 Adobe\n *  All Rights Reserved.\n *\n * NOTICE:  All information contained herein is, and remains\n * the property of Adobe and its suppliers, if any. The intellectual\n * and technical concepts contained herein are proprietary to Adobe\n * and its suppliers and are protected by all applicable intellectual\n * property laws, including trade secret and copyright laws.\n * Dissemination of this information or reproduction of this material\n * is strictly forbidden unless prior written permission is obtained\n * from Adobe.\n *******************************************************************/\n\nimport { Cart, NegotiableQuote } from '@/checkout/data/models';\nimport {\n  computed,\n  ReadonlySignal,\n  signal,\n} from '@adobe-commerce/elsie/lib/signals';\nimport { events } from '@adobe-commerce/event-bus';\n\nexport enum QueueName {\n  Updates = 'updates',\n  Default = 'default',\n  ShippingEstimate = 'shippingEstimate',\n}\n\ntype Request<T> = () => Promise<T>;\ntype QueueCompletedHandler<T> = (result: T) => void;\n\ninterface QueuedRequest<T> {\n  requestFn: Request<T>;\n  resolve: (value: T) => void;\n  reject: (error: any) => void;\n}\n\nconst queues = new Map<QueueName, QueuedRequest<any>[]>();\nconst processing = new Map<QueueName, boolean>();\nconst pendingRequests = signal<Set<QueueName>>(new Set());\nconst onQueueCompleted = new Map<QueueName, QueueCompletedHandler<any>>();\n\nonQueueCompleted.set(\n  QueueName.Updates,\n  (latestResult: Cart | NegotiableQuote) => {\n    events.emit('checkout/updated', latestResult);\n  }\n);\n\nasync function processQueue(type: QueueName): Promise<void> {\n  processing.set(type, true);\n\n  const queue = queues.get(type)!;\n  let latestSuccessResult: any;\n\n  while (queue.length > 0) {\n    const request = queue.shift()!;\n\n    try {\n      const result = await request.requestFn();\n      request.resolve(result);\n      latestSuccessResult = result;\n    } catch (error) {\n      request.reject(error);\n    }\n  }\n\n  processing.set(type, false);\n\n  const pendingSet = new Set(pendingRequests.value);\n  pendingSet.delete(type);\n  pendingRequests.value = pendingSet;\n\n  const handler = onQueueCompleted.get(type);\n\n  if (handler && latestSuccessResult) {\n    handler(latestSuccessResult);\n  }\n}\n\nexport function enqueueRequest<T>(\n  requestFn: Request<T>,\n  name: QueueName = QueueName.Default\n): Promise<T> {\n  if (!queues.has(name)) {\n    queues.set(name, []);\n  }\n\n  const queue = queues.get(name)!;\n\n  const promise = new Promise<T>((resolve, reject) => {\n    queue.push({ requestFn, resolve, reject });\n  });\n\n  const pendingSet = new Set(pendingRequests.value);\n  pendingSet.add(name);\n  pendingRequests.value = pendingSet;\n\n  if (!processing.get(name)) {\n    processQueue(name);\n  }\n\n  return promise;\n}\n\nexport const hasPendingUpdates: ReadonlySignal<boolean> = computed(() => {\n  return pendingRequests.value.has(QueueName.Updates);\n});\n\nexport const hasPendingShippingEstimate: ReadonlySignal<boolean> = computed(\n  () => {\n    return pendingRequests.value.has(QueueName.ShippingEstimate);\n  }\n);\n","/********************************************************************\n * ADOBE CONFIDENTIAL\n * __________________\n *\n *  Copyright 2024 Adobe\n *  All Rights Reserved.\n *\n * NOTICE:  All information contained herein is, and remains\n * the property of Adobe and its suppliers, if any. The intellectual\n * and technical concepts contained herein are proprietary to Adobe\n * and its suppliers and are protected by all applicable intellectual\n * property laws, including trade secret and copyright laws.\n * Dissemination of this information or reproduction of this material\n * is strictly forbidden unless prior written permission is obtained\n * from Adobe.\n *******************************************************************/\n\nimport { FetchQueryError } from '@/checkout/api/fetch-graphql';\n\ntype ErrorPath = (string | number)[];\n\nexport type ErrorWithPath = FetchQueryError[number] & {\n  path?: ErrorPath;\n};\n\nconst controlledErrorProps: string[] = ['sender_email', 'recipient_email'];\n\n/**\n * Filters out errors with known paths from a list of errors generated by a GraphQL query.\n *\n * Known issue: The query does not differentiate between physical and virtual gift cards, leading\n * to errors for physical ones as they don't have 'sender_email' and 'recipient_email' properties.\n *\n * @param {ErrorWithPath[]} errors - Array of errors to be filtered.\n * @return {ErrorWithPath[]} Uncontrolled (unexpected) errors not matching predefined paths.\n */\n\nexport function filterControlledErrors(errors: ErrorWithPath[]) {\n  return errors.filter(\n    (error) =>\n      !error.path ||\n      !controlledErrorProps.some((controlledErrorProp) => {\n        return error.path?.at(-1) === controlledErrorProp;\n      })\n  );\n}\n","/********************************************************************\n * ADOBE CONFIDENTIAL\n * __________________\n *\n *  Copyright 2025 Adobe\n *  All Rights Reserved.\n *\n * NOTICE:  All information contained herein is, and remains\n * the property of Adobe and its suppliers, if any. The intellectual\n * and technical concepts contained herein are proprietary to Adobe\n * and its suppliers and are protected by all applicable intellectual\n * property laws, including trade secret and copyright laws.\n * Dissemination of this information or reproduction of this material\n * is strictly forbidden unless prior written permission is obtained\n * from Adobe.\n *******************************************************************/\n\nimport { FetchQueryError } from '@/checkout/api/fetch-graphql';\n\nexport class FetchError extends Error {\n  constructor(reasons: FetchQueryError) {\n    super(reasons.map((e: any) => e.message).join(' '));\n    this.name = 'FetchError';\n  }\n}\n\nexport class InvalidInput extends Error {\n  constructor(message: string) {\n    super(message);\n    this.name = 'InvalidInput';\n  }\n}\n\nexport class MissingArgument extends InvalidInput {\n  constructor(argumentName: string) {\n    super(`${argumentName} is required.`);\n  }\n}\n\nexport class MissingCart extends MissingArgument {\n  constructor() {\n    super('Cart ID');\n  }\n}\n\nexport class MissingCartAndQuote extends InvalidInput {\n  constructor() {\n    super('Either Cart ID or Quote ID is required.');\n  }\n}\n\nexport class Unauthenticated extends Error {\n  constructor() {\n    super('User is not authenticated');\n  }\n}\n\nexport class MissingNegotiableQuoteId extends MissingArgument {\n  constructor() {\n    super('Negotiable Quote ID');\n  }\n}\n\nexport class MissingEmail extends MissingArgument {\n  constructor() {\n    super('Email');\n  }\n}\n\nexport class MissingPaymentMethod extends MissingArgument {\n  constructor() {\n    super('Payment method code');\n  }\n}\n\nexport class MissingShippingAddress extends MissingArgument {\n  constructor() {\n    super('Shipping address');\n  }\n}\n\nexport class MissingShippingMethod extends MissingArgument {\n  constructor() {\n    super('Shipping method');\n  }\n}\n\nexport class MissingBillingAddress extends MissingArgument {\n  constructor() {\n    super('Billing address');\n  }\n}\n\nexport class MissingCountry extends MissingArgument {\n  constructor() {\n    super('Country Code');\n  }\n}\n","/********************************************************************\n * ADOBE CONFIDENTIAL\n * __________________\n *\n *  Copyright 2024 Adobe\n *  All Rights Reserved.\n *\n * NOTICE:  All information contained herein is, and remains\n * the property of Adobe and its suppliers, if any. The intellectual\n * and technical concepts contained herein are proprietary to Adobe\n * and its suppliers and are protected by all applicable intellectual\n * property laws, including trade secret and copyright laws.\n * Dissemination of this information or reproduction of this material\n * is strictly forbidden unless prior written permission is obtained\n * from Adobe.\n *******************************************************************/\n\nimport { fetchGraphQl, FetchOptions, FetchQueryError } from '@/checkout/api';\nimport { enqueueRequest, QueueName } from '@/checkout/lib/enqueueRequest';\nimport { filterControlledErrors } from '@/checkout/lib/filterControlledErrors';\nimport { FetchError } from '@/checkout/lib/errors';\n\ntype DispatchApiCallParams<T> = {\n  defaultValueOnFail?: T;\n  options?: FetchOptions;\n  path: string;\n  query: string;\n  queueName?: QueueName;\n  transformer?: (data: any) => T;\n  type: 'query' | 'mutation';\n};\n\nexport function getValueAtPath(obj: any, path: string) {\n  return path\n    .split('.')\n    .reduce(\n      (acc, part) => (acc && acc[part] !== undefined ? acc[part] : undefined),\n      obj\n    );\n}\n\nasync function dispatchApiCall<T>(\n  params: DispatchApiCallParams<T>\n): Promise<T> {\n  const {\n    defaultValueOnFail,\n    options,\n    path,\n    query,\n    queueName,\n    transformer,\n    type,\n  } = params;\n\n  try {\n    const processApiCall = async () => {\n      const { data, errors } = await fetchGraphQl<T>(query, {\n        method: type === 'query' ? 'GET' : 'POST',\n        cache: type === 'query' ? 'no-cache' : undefined,\n        ...options,\n      });\n\n      if (errors) {\n        const uncontrolledErrors = filterControlledErrors(errors);\n\n        if (uncontrolledErrors.length > 0) {\n          throw new FetchError(uncontrolledErrors as FetchQueryError);\n        }\n      }\n\n      let result = getValueAtPath(data, path);\n\n      if (result === undefined) {\n        throw new Error(`No data found at path: ${path}`);\n      }\n\n      return transformer ? transformer(result) : result;\n    };\n\n    // Execute the API call, either directly or through the queue\n    const result =\n      type === 'mutation'\n        ? await enqueueRequest<T>(processApiCall, queueName)\n        : await processApiCall();\n\n    return result;\n  } catch (error: any) {\n    if (defaultValueOnFail !== undefined) return defaultValueOnFail;\n    throw error;\n  }\n}\n\nexport { dispatchApiCall };\n","/********************************************************************\n * ADOBE CONFIDENTIAL\n * __________________\n *\n *  Copyright 2024 Adobe\n *  All Rights Reserved.\n *\n * NOTICE:  All information contained herein is, and remains\n * the property of Adobe and its suppliers, if any. The intellectual\n * and technical concepts contained herein are proprietary to Adobe\n * and its suppliers and are protected by all applicable intellectual\n * property laws, including trade secret and copyright laws.\n * Dissemination of this information or reproduction of this material\n * is strictly forbidden unless prior written permission is obtained\n * from Adobe.\n *******************************************************************/\n\nexport const getStoreConfigQuery = /* GraphQL */ `\n  query getStoreConfig {\n    storeConfig {\n      default_country\n      is_checkout_agreements_enabled\n      is_guest_checkout_enabled\n      is_one_page_checkout_enabled\n      shopping_cart_display_shipping\n    }\n  }\n`;\n","/********************************************************************\n * ADOBE CONFIDENTIAL\n * __________________\n *\n *  Copyright 2024 Adobe\n *  All Rights Reserved.\n *\n * NOTICE:  All information contained herein is, and remains\n * the property of Adobe and its suppliers, if any. The intellectual\n * and technical concepts contained herein are proprietary to Adobe\n * and its suppliers and are protected by all applicable intellectual\n * property laws, including trade secret and copyright laws.\n * Dissemination of this information or reproduction of this material\n * is strictly forbidden unless prior written permission is obtained\n * from Adobe.\n *******************************************************************/\n\nimport { StoreConfig, TaxDisplay } from '@/checkout/data/models';\nimport { transformStoreConfig } from '@/checkout/data/transforms';\nimport { dispatchApiCall, state } from '@/checkout/lib';\nimport { getStoreConfigQuery } from './graphql/getStoreConfig.graphql';\n\nexport const DEFAULT_COUNTRY = 'US';\n\nexport const STORE_CONFIG_DEFAULTS: StoreConfig = {\n  defaultCountry: DEFAULT_COUNTRY,\n  agreementsEnabled: true,\n  shoppingCartDisplaySetting: {\n    shipping: TaxDisplay.EXCLUDING_TAX,\n  },\n};\n\nexport const getStoreConfig = async () => {\n  return await dispatchApiCall({\n    defaultValueOnFail: STORE_CONFIG_DEFAULTS,\n    options: { method: 'GET', cache: 'no-cache' },\n    path: 'storeConfig',\n    query: getStoreConfigQuery,\n    transformer: transformStoreConfig,\n    type: 'query',\n  });\n};\n\nexport const getStoreConfigCache = () => state.config;\n","/********************************************************************\n * ADOBE CONFIDENTIAL\n * __________________\n *\n *  Copyright 2024 Adobe\n *  All Rights Reserved.\n *\n * NOTICE:  All information contained herein is, and remains\n * the property of Adobe and its suppliers, if any. The intellectual\n * and technical concepts contained herein are proprietary to Adobe\n * and its suppliers and are protected by all applicable intellectual\n * property laws, including trade secret and copyright laws.\n * Dissemination of this information or reproduction of this material\n * is strictly forbidden unless prior written permission is obtained\n * from Adobe.\n *******************************************************************/\n\nimport { GetStoreConfigQuery } from '@/checkout/__generated__/types';\nimport { STORE_CONFIG_DEFAULTS } from '@/checkout/api/getStoreConfig';\nimport { StoreConfig, TaxDisplay } from '@/checkout/data/models';\n\nexport function transformTaxDisplay(data: number | null | undefined) {\n  switch (data) {\n    case 1:\n      return TaxDisplay.EXCLUDING_TAX;\n    case 2:\n      return TaxDisplay.INCLUDING_TAX;\n    case 3:\n      return TaxDisplay.INCLUDING_EXCLUDING_TAX;\n    default:\n      return TaxDisplay.EXCLUDING_TAX;\n  }\n}\n\nexport function transformStoreConfig(\n  data: GetStoreConfigQuery['storeConfig']\n): StoreConfig {\n  if (!data) return STORE_CONFIG_DEFAULTS;\n\n  const {\n    default_country,\n    is_checkout_agreements_enabled,\n    shopping_cart_display_shipping,\n  } = data;\n\n  return {\n    defaultCountry: default_country || STORE_CONFIG_DEFAULTS.defaultCountry,\n    agreementsEnabled: is_checkout_agreements_enabled,\n    shoppingCartDisplaySetting: {\n      shipping: transformTaxDisplay(shopping_cart_display_shipping),\n    },\n  };\n}\n","/********************************************************************\n * ADOBE CONFIDENTIAL\n * __________________\n *\n *  Copyright 2024 Adobe\n *  All Rights Reserved.\n *\n * NOTICE:  All information contained herein is, and remains\n * the property of Adobe and its suppliers, if any. The intellectual\n * and technical concepts contained herein are proprietary to Adobe\n * and its suppliers and are protected by all applicable intellectual\n * property laws, including trade secret and copyright laws.\n * Dissemination of this information or reproduction of this material\n * is strictly forbidden unless prior written permission is obtained\n * from Adobe.\n *******************************************************************/\n\nimport { FetchGraphQL } from '@adobe-commerce/fetch-graphql';\n\nexport const {\n  setEndpoint,\n  setFetchGraphQlHeader,\n  removeFetchGraphQlHeader,\n  setFetchGraphQlHeaders,\n  fetchGraphQl,\n  getConfig,\n} = new FetchGraphQL().getMethods();\n\nexport type {\n  FetchOptions,\n  FetchQueryError,\n} from '@adobe-commerce/fetch-graphql';\n"],"names":["_state","state","target","key","value","isQuoteCheckout","TaxDisplay","isSetAddressRequestPending","signal","QueueName","queues","processing","pendingRequests","onQueueCompleted","latestResult","events","processQueue","type","queue","latestSuccessResult","request","result","error","pendingSet","handler","enqueueRequest","requestFn","name","promise","resolve","reject","hasPendingUpdates","computed","hasPendingShippingEstimate","controlledErrorProps","filterControlledErrors","errors","controlledErrorProp","_a","FetchError","reasons","e","InvalidInput","message","MissingArgument","argumentName","MissingCart","MissingCartAndQuote","Unauthenticated","MissingNegotiableQuoteId","MissingEmail","MissingPaymentMethod","MissingShippingAddress","MissingShippingMethod","MissingBillingAddress","MissingCountry","getValueAtPath","obj","path","acc","part","dispatchApiCall","params","defaultValueOnFail","options","query","queueName","transformer","processApiCall","data","fetchGraphQl","uncontrolledErrors","getStoreConfigQuery","DEFAULT_COUNTRY","STORE_CONFIG_DEFAULTS","getStoreConfig","transformStoreConfig","getStoreConfigCache","transformTaxDisplay","default_country","is_checkout_agreements_enabled","shopping_cart_display_shipping","setEndpoint","setFetchGraphQlHeader","removeFetchGraphQlHeader","setFetchGraphQlHeaders","getConfig","FetchGraphQL"],"mappings":"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"}